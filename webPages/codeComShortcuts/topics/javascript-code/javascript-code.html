<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>javascript-code</title>
    <link rel="stylesheet" href="../../css/drop-topic-codeCmdShort.css">
    <link rel="stylesheet" href="../../css/copy-code-codeCmdShrt.css">

    <link rel="stylesheet" href="../../../../css/colors.css">

    <script type="module" src="../../js/drop-topic-codeCmdShrt.js" defer></script>    
    <script type="module" src="../../js/copy-code-codeCmdShrt.js" defer></script>    
</head>
<body>
    <header>
        <div class="home-links-container">
            <a tabindex="0" id="codehomelink" href="../../codeComShortcuts.html">codeCommandsShortcuts</a>
            <!-- <a tabindex="0" id="backlink" href="../index.html">&larr;back (Shorcuts & Commands)</a> -->
        </div>
        <h2 style="color:red">incrementing letter focus is not working on this page</h2>
        <h1>Javascript - Code</h1>
        <div class="home-links-container">
            <a tabindex="0" id="homelink" href="../../index.html">home</a>
        </div>
    </header>
    <main>
        <div class="topics-container">
            <!-- Letter Focus Code -->
            <div class="topic">
                <header>
                    <h3><a id="letterFocus" href="#" class="topic-title">Letter Focus</a></h3>
                </header>
                <!-- Letter Focus Code -->
                <div class="topic-snips show">
                    <div class="code-cmd">
                        <a id="letterFocusCode" href="#"><h4>Letter Focus</h4></a>
                        <sup class="r">
                            **create pop up with extra info on <code>filter()</code> and <code>findIndex()</code>
                        </sup>
                        <p>
                            <strong>Chat Question: does filter() work the same?</strong>
                            <br>
                            ChatGPT said:
                            Awesome question filter is similar to findIndex, but with one big difference in what it returns.
                            <br>
                            ‚úÖ Both:
                        </p>
                        <ul>
                            <li>* Take a <span class="mcy">callback</span> function that checks a condition.</li>
                            <li>* Go through the array element by element.</li>
                            <li>* Use the callback to test each item.</li>
                        </ul>
                        
                        <p>
                            üîç Difference:
                            Method Returns
                            findIndex The index of the first matching item
                            filter A new array of all matching items
                        </p>
                        <div class="code-container">
                            <pre tabindex="0" class="copy-code">
document.addEventListener("keydown", (e) => {
    if (inputBoxFocused) return; // Ignore if typing in input box
    let letter = e.key.toLowerCase();
    if (letter === "i") e.preventDefault(); // Prevent unwanted behavior for "i"
    // Filter elements that start with the pressed letter    
    let letteredArr = idElsArr.<span class="y">filter(</span><span class="mcy">(el) => el.id.toLowerCase().startsWith(letter)</span><span class="y">
        )</span> <span class="l">// creates new array</span>;
    // No matching elements
    if (letteredArr.length === 0 ) {    
        return
    } 
    else {        
        let focusedEl = document.activeElement;
        let focusedIndex = idElsArr.indexOf(focusedEl);
        // console.log(iLetter, letteredArr[iLetter])
        // If pressing a different letter, find the closest match below
        if (lastPressedLetter !== letter) {
            let closestIndex = letteredArr.<span class="y">findIndex(</span><span class="mcy">el => idElsArr.indexOf(el) > focusedIndex</span>
            <span class="y">)</span> <span class="l">// takes callback and returns whatever that callback returns</span>;
            iLetter = closestIndex !== -1 ? closestIndex : 0; // If none found below,
            //  start from first
        } else {
            // If pressing the same letter, cycle forward
            iLetter = (letteredArr.indexOf(focusedEl) + 1) % letteredArr.length;
        }
        // Handle Shift + Letter for backwards cycling
        if (e.shiftKey) {
            iLetter = (letteredArr.indexOf(focusedEl) - 1 + letteredArr.length) % letteredArr.length;
        }
        // Focus the selected element
        letteredArr[iLetter].focus();  
        lastPressedLetter = letter;
        
    }
});</pre>
                        </div>
                        
                    </div>
                    <div class="code-cmd">
                    <div class="code-cmd">
                        <h4>Incrementing / Decrements Letter Focus</h4>
                        <div class="code-container">
                            <pre tabindex="0" class="copy-code">
// This page has really good letter focus cycle
if(letter == 'c' && !e.metaKey){
    if(!e.shiftKey){
    copyCodes[iCopyCodes].focus()
    iCopyCodes = (iCopyCodes + 1) % copyCodes.length
    } else{
        iCopyCodes = (iCopyCodes - 1 + copyCodes.length) % copyCodes.length
    }
    copyCodes[iCopyCodes].focus()
    console.log(iLetter)
}</pre>
                        </div>
                    </div>
                    <div class="code-cmd">
                        <h4>CamelCase function</h4>
                        <div class="code-container">
                            <pre tabindex="0" class="copy-code">
function toCamelCase(str) {
    return str
    .toLowerCase()
    .replace(/[^a-zA-Z0-9]+(.)/g, (match, chr) => chr.toUpperCase());
}</pre>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Drop Downs -->
            <div class="topic">
                <header>
                    <h3><a id="dropDowns" href="#" class="topic-title">Drop downs</a></h3>
                </header>
                <div class="topic-snips show">
                    <div class="code-cmd">
                        <h4>Incrementing / Decrements Letter Focus</h4>
                        <div class="code-container">
                            <pre tabindex="0" class="copy-code">
function hideTopics(){

}</pre>
                        </div>
                    </div>
                    <div class="code-cmd">
                        <h4>CamelCase function</h4>
                        <div class="code-container">
                            <pre tabindex="0" class="copy-code">
function toCamelCase(str) {
    return str
    .toLowerCase()
    .replace(/[^a-zA-Z0-9]+(.)/g, (match, chr) => chr.toUpperCase());
}</pre>
                        </div>
                    </div>
                </div>
            </div>
            
        </div>        
    </main>
</body>
