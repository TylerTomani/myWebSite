<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dads</title>
</head>
<body>
        <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
        
        <head>
            <html class="en">
            <title>New Invoice :: Skynova.com</title>
        
            <meta name="Description" content="Create a new invoice on Skynova.com">
            <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
            <script
                type="text/javascript">(window.NREUM || (NREUM = {})).init = { privacy: { cookies_enabled: true }, ajax: { deny_list: ["bam.nr-data.net"] }, distributed_tracing: { enabled: true } }; (window.NREUM || (NREUM = {})).loader_config = { agentID: "1588848781", accountID: "100425", trustKey: "100425", xpid: "VQYHVVRWGwIEU1dSBgQAUV0=", licenseKey: "8a693f45cd", applicationID: "1476015779" };;/*! For license information please see nr-loader-spa-1.269.0.min.js.LICENSE.txt */
                    (() => { var e, t, r = { 8122: (e, t, r) => { "use strict"; r.d(t, { a: () => i }); var n = r(944); function i(e, t) { try { if (!e || "object" != typeof e) return (0, n.R)(3); if (!t || "object" != typeof t) return (0, n.R)(4); const r = Object.create(Object.getPrototypeOf(t), Object.getOwnPropertyDescriptors(t)), o = 0 === Object.keys(r).length ? e : r; for (let a in o) if (void 0 !== e[a]) try { if (null === e[a]) { r[a] = null; continue } Array.isArray(e[a]) && Array.isArray(t[a]) ? r[a] = Array.from(new Set([...e[a], ...t[a]])) : "object" == typeof e[a] && "object" == typeof t[a] ? r[a] = i(e[a], t[a]) : r[a] = e[a] } catch (e) { (0, n.R)(1, e) } return r } catch (e) { (0, n.R)(2, e) } } }, 2555: (e, t, r) => { "use strict"; r.d(t, { Vp: () => c, fn: () => s, x1: () => u }); var n = r(384), i = r(8122); const o = { beacon: n.NT.beacon, errorBeacon: n.NT.errorBeacon, licenseKey: void 0, applicationID: void 0, sa: void 0, queueTime: void 0, applicationTime: void 0, ttGuid: void 0, user: void 0, account: void 0, product: void 0, extra: void 0, jsAttributes: {}, userAttributes: void 0, atts: void 0, transactionName: void 0, tNamePlain: void 0 }, a = {}; function s(e) { try { const t = c(e); return !!t.licenseKey && !!t.errorBeacon && !!t.applicationID } catch (e) { return !1 } } function c(e) { if (!e) throw new Error("All info objects require an agent identifier!"); if (!a[e]) throw new Error("Info for ".concat(e, " was never set")); return a[e] } function u(e, t) { if (!e) throw new Error("All info objects require an agent identifier!"); a[e] = (0, i.a)(t, o); const r = (0, n.nY)(e); r && (r.info = a[e]) } }, 9417: (e, t, r) => { "use strict"; r.d(t, { D0: () => h, gD: () => p, xN: () => g }); var n = r(993); const i = e => { if (!e || "string" != typeof e) return !1; try { document.createDocumentFragment().querySelector(e) } catch { return !1 } return !0 }; var o = r(2614), a = r(944), s = r(384), c = r(8122); const u = "[data-nr-mask]", d = () => { const e = { mask_selector: "*", block_selector: "[data-nr-block]", mask_input_options: { color: !1, date: !1, "datetime-local": !1, email: !1, month: !1, number: !1, range: !1, search: !1, tel: !1, text: !1, time: !1, url: !1, week: !1, textarea: !1, select: !1, password: !0 } }; return { ajax: { deny_list: void 0, block_internal: !0, enabled: !0, harvestTimeSeconds: 10, autoStart: !0 }, distributed_tracing: { enabled: void 0, exclude_newrelic_header: void 0, cors_use_newrelic_header: void 0, cors_use_tracecontext_headers: void 0, allowed_origins: void 0 }, feature_flags: [], generic_events: { enabled: !0, harvestTimeSeconds: 30, autoStart: !0 }, harvest: { tooManyRequestsDelay: 60 }, jserrors: { enabled: !0, harvestTimeSeconds: 10, autoStart: !0 }, logging: { enabled: !0, harvestTimeSeconds: 10, autoStart: !0, level: n.p_.INFO }, metrics: { enabled: !0, autoStart: !0 }, obfuscate: void 0, page_action: { enabled: !0 }, user_actions: { enabled: !0 }, page_view_event: { enabled: !0, autoStart: !0 }, page_view_timing: { enabled: !0, harvestTimeSeconds: 30, autoStart: !0 }, privacy: { cookies_enabled: !0 }, proxy: { assets: void 0, beacon: void 0 }, session: { expiresMs: o.wk, inactiveMs: o.BB }, session_replay: { autoStart: !0, enabled: !1, harvestTimeSeconds: 60, preload: !1, sampling_rate: 10, error_sampling_rate: 100, collect_fonts: !1, inline_images: !1, fix_stylesheets: !0, mask_all_inputs: !0, get mask_text_selector() { return e.mask_selector }, set mask_text_selector(t) { i(t) ? e.mask_selector = "".concat(t, ",").concat(u) : "" === t || null === t ? e.mask_selector = u : (0, a.R)(5, t) }, get block_class() { return "nr-block" }, get ignore_class() { return "nr-ignore" }, get mask_text_class() { return "nr-mask" }, get block_selector() { return e.block_selector }, set block_selector(t) { i(t) ? e.block_selector += ",".concat(t) : "" !== t && (0, a.R)(6, t) }, get mask_input_options() { return e.mask_input_options }, set mask_input_options(t) { t && "object" == typeof t ? e.mask_input_options = { ...t, password: !0 } : (0, a.R)(7, t) } }, session_trace: { enabled: !0, harvestTimeSeconds: 10, autoStart: !0 }, soft_navigations: { enabled: !0, harvestTimeSeconds: 10, autoStart: !0 }, spa: { enabled: !0, harvestTimeSeconds: 10, autoStart: !0 }, ssl: void 0 } }, l = {}, f = "All configuration objects require an agent identifier!"; function h(e) { if (!e) throw new Error(f); if (!l[e]) throw new Error("Configuration for ".concat(e, " was never set")); return l[e] } function g(e, t) { if (!e) throw new Error(f); l[e] = (0, c.a)(t, d()); const r = (0, s.nY)(e); r && (r.init = l[e]) } function p(e, t) { if (!e) throw new Error(f); var r = h(e); if (r) { for (var n = t.split("."), i = 0; i < n.length - 1; i++)if ("object" != typeof (r = r[n[i]])) return; r = r[n[n.length - 1]] } return r } }, 5603: (e, t, r) => { "use strict"; r.d(t, { a: () => c, o: () => s }); var n = r(384), i = r(8122); const o = { accountID: void 0, trustKey: void 0, agentID: void 0, licenseKey: void 0, applicationID: void 0, xpid: void 0 }, a = {}; function s(e) { if (!e) throw new Error("All loader-config objects require an agent identifier!"); if (!a[e]) throw new Error("LoaderConfig for ".concat(e, " was never set")); return a[e] } function c(e, t) { if (!e) throw new Error("All loader-config objects require an agent identifier!"); a[e] = (0, i.a)(t, o); const r = (0, n.nY)(e); r && (r.loader_config = a[e]) } }, 3371: (e, t, r) => { "use strict"; r.d(t, { V: () => f, f: () => l }); var n = r(8122), i = r(384), o = r(6154), a = r(9324); let s = 0; const c = { buildEnv: a.F3, distMethod: a.Xs, version: a.xv, originTime: o.WN }, u = { customTransaction: void 0, disabled: !1, isolatedBacklog: !1, loaderType: void 0, maxBytes: 3e4, onerror: void 0, origin: "" + o.gm.location, ptid: void 0, releaseIds: {}, appMetadata: {}, session: void 0, denyList: void 0, timeKeeper: void 0, obfuscator: void 0 }, d = {}; function l(e) { if (!e) throw new Error("All runtime objects require an agent identifier!"); if (!d[e]) throw new Error("Runtime for ".concat(e, " was never set")); return d[e] } function f(e, t) { if (!e) throw new Error("All runtime objects require an agent identifier!"); d[e] = { ...(0, n.a)(t, u), ...c }, Object.hasOwnProperty.call(d[e], "harvestCount") || Object.defineProperty(d[e], "harvestCount", { get: () => ++s }); const r = (0, i.nY)(e); r && (r.runtime = d[e]) } }, 9324: (e, t, r) => { "use strict"; r.d(t, { F3: () => i, Xs: () => o, Yq: () => a, xv: () => n }); const n = "1.269.0", i = "PROD", o = "CDN", a = "2.0.0-alpha.12" }, 6154: (e, t, r) => { "use strict"; r.d(t, { A4: () => s, OF: () => d, RI: () => i, Vr: () => h, WN: () => g, bv: () => o, gm: () => a, lR: () => f, m: () => u, mw: () => c, sb: () => l }); var n = r(1863); const i = "undefined" != typeof window && !!window.document, o = "undefined" != typeof WorkerGlobalScope && ("undefined" != typeof self && self instanceof WorkerGlobalScope && self.navigator instanceof WorkerNavigator || "undefined" != typeof globalThis && globalThis instanceof WorkerGlobalScope && globalThis.navigator instanceof WorkerNavigator), a = i ? window : "undefined" != typeof WorkerGlobalScope && ("undefined" != typeof self && self instanceof WorkerGlobalScope && self || "undefined" != typeof globalThis && globalThis instanceof WorkerGlobalScope && globalThis), s = "complete" === a?.document?.readyState, c = Boolean("hidden" === a?.document?.visibilityState), u = "" + a?.location, d = /iPad|iPhone|iPod/.test(a.navigator?.userAgent), l = d && "undefined" == typeof SharedWorker, f = (() => { const e = a.navigator?.userAgent?.match(/Firefox[/\s](\d+\.\d+)/); return Array.isArray(e) && e.length >= 2 ? +e[1] : 0 })(), h = !!a.navigator?.sendBeacon, g = Date.now() - (0, n.t)() }, 4777: (e, t, r) => { "use strict"; r.d(t, { J: () => o }); var n = r(944); const i = { agentIdentifier: "", ee: void 0 }; class o { constructor(e) { try { if ("object" != typeof e) return (0, n.R)(8); this.sharedContext = {}, Object.assign(this.sharedContext, i), Object.entries(e).forEach((([e, t]) => { Object.keys(i).includes(e) && (this.sharedContext[e] = t) })) } catch (e) { (0, n.R)(9, e) } } } }, 7295: (e, t, r) => { "use strict"; r.d(t, { Xv: () => a, gX: () => i, iW: () => o }); var n = []; function i(e) { if (!e || o(e)) return !1; if (0 === n.length) return !0; for (var t = 0; t < n.length; t++) { var r = n[t]; if ("*" === r.hostname) return !1; if (s(r.hostname, e.hostname) && c(r.pathname, e.pathname)) return !1 } return !0 } function o(e) { return void 0 === e.hostname } function a(e) { if (n = [], e && e.length) for (var t = 0; t < e.length; t++) { let r = e[t]; if (!r) continue; 0 === r.indexOf("http://") ? r = r.substring(7) : 0 === r.indexOf("https://") && (r = r.substring(8)); const i = r.indexOf("/"); let o, a; i > 0 ? (o = r.substring(0, i), a = r.substring(i)) : (o = r, a = ""); let [s] = o.split(":"); n.push({ hostname: s, pathname: a }) } } function s(e, t) { return !(e.length > t.length) && t.indexOf(e) === t.length - e.length } function c(e, t) { return 0 === e.indexOf("/") && (e = e.substring(1)), 0 === t.indexOf("/") && (t = t.substring(1)), "" === e || e === t } }, 1687: (e, t, r) => { "use strict"; r.d(t, { Ak: () => c, Ze: () => l, x3: () => u }); var n = r(7836), i = r(3606), o = r(860), a = r(2646); const s = {}; function c(e, t) { const r = { staged: !1, priority: o.P[t] || 0 }; d(e), s[e].get(t) || s[e].set(t, r) } function u(e, t) { e && s[e] && (s[e].get(t) && s[e].delete(t), h(e, t, !1), s[e].size && f(e)) } function d(e) { if (!e) throw new Error("agentIdentifier required"); s[e] || (s[e] = new Map) } function l(e = "", t = "feature", r = !1) { if (d(e), !e || !s[e].get(t) || r) return h(e, t); s[e].get(t).staged = !0, f(e) } function f(e) { const t = Array.from(s[e]); t.every((([e, t]) => t.staged)) && (t.sort(((e, t) => e[1].priority - t[1].priority)), t.forEach((([t]) => { s[e].delete(t), h(e, t) }))) } function h(e, t, r = !0) { const o = e ? n.ee.get(e) : n.ee, s = i.i.handlers; if (!o.aborted && o.backlog && s) { if (r) { const e = o.backlog[t], r = s[t]; if (r) { for (let t = 0; e && t < e.length; ++t)g(e[t], r); Object.entries(r).forEach((([e, t]) => { Object.values(t || {}).forEach((t => { t[0]?.on && t[0]?.context() instanceof a.y && t[0].on(e, t[1]) })) })) } } o.isolatedBacklog || delete s[t], o.backlog[t] = null, o.emit("drain-" + t, []) } } function g(e, t) { var r = e[1]; Object.values(t[r] || {}).forEach((t => { var r = e[0]; if (t[0] === r) { var n = t[1], i = e[3], o = e[2]; n.apply(i, o) } })) } }, 7836: (e, t, r) => { "use strict"; r.d(t, { P: () => c, ee: () => u }); var n = r(384), i = r(8990), o = r(3371), a = r(2646), s = r(5607); const c = "nr@context:".concat(s.W), u = function e(t, r) { var n = {}, s = {}, d = {}, l = !1; try { l = 16 === r.length && (0, o.f)(r).isolatedBacklog } catch (e) { } var f = { on: g, addEventListener: g, removeEventListener: function (e, t) { var r = n[e]; if (!r) return; for (var i = 0; i < r.length; i++)r[i] === t && r.splice(i, 1) }, emit: function (e, r, n, i, o) { !1 !== o && (o = !0); if (u.aborted && !i) return; t && o && t.emit(e, r, n); for (var a = h(n), c = p(e), d = c.length, l = 0; l < d; l++)c[l].apply(a, r); var g = v()[s[e]]; g && g.push([f, e, r, a]); return a }, get: m, listeners: p, context: h, buffer: function (e, t) { const r = v(); if (t = t || "feature", f.aborted) return; Object.entries(e || {}).forEach((([e, n]) => { s[n] = t, t in r || (r[t] = []) })) }, abort: function () { f._aborted = !0, Object.keys(f.backlog).forEach((e => { delete f.backlog[e] })) }, isBuffering: function (e) { return !!v()[s[e]] }, debugId: r, backlog: l ? {} : t && "object" == typeof t.backlog ? t.backlog : {}, isolatedBacklog: l }; return Object.defineProperty(f, "aborted", { get: () => { let e = f._aborted || !1; return e || (t && (e = t.aborted), e) } }), f; function h(e) { return e && e instanceof a.y ? e : e ? (0, i.I)(e, c, (() => new a.y(c))) : new a.y(c) } function g(e, t) { n[e] = p(e).concat(t) } function p(e) { return n[e] || [] } function m(t) { return d[t] = d[t] || e(f, t) } function v() { return f.backlog } }(void 0, "globalEE"), d = (0, n.Zm)(); d.ee || (d.ee = u) }, 2646: (e, t, r) => { "use strict"; r.d(t, { y: () => n }); class n { constructor(e) { this.contextId = e } } }, 9908: (e, t, r) => { "use strict"; r.d(t, { d: () => n, p: () => i }); var n = r(7836).ee.get("handle"); function i(e, t, r, i, o) { o ? (o.buffer([e], i), o.emit(e, t, r)) : (n.buffer([e], i), n.emit(e, t, r)) } }, 3606: (e, t, r) => { "use strict"; r.d(t, { i: () => o }); var n = r(9908); o.on = a; var i = o.handlers = {}; function o(e, t, r, o) { a(o || n.d, i, e, t, r) } function a(e, t, r, i, o) { o || (o = "feature"), e || (e = n.d); var a = t[o] = t[o] || {}; (a[r] = a[r] || []).push([e, i]) } }, 3878: (e, t, r) => { "use strict"; function n(e, t) { return { capture: e, passive: !1, signal: t } } function i(e, t, r = !1, i) { window.addEventListener(e, t, n(r, i)) } function o(e, t, r = !1, i) { document.addEventListener(e, t, n(r, i)) } r.d(t, { DD: () => o, jT: () => n, sp: () => i }) }, 5607: (e, t, r) => { "use strict"; r.d(t, { W: () => n }); const n = (0, r(9566).bz)() }, 9566: (e, t, r) => { "use strict"; r.d(t, { LA: () => s, ZF: () => c, bz: () => a, el: () => u }); var n = r(6154); const i = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"; function o(e, t) { return e ? 15 & e[t] : 16 * Math.random() | 0 } function a() { const e = n.gm?.crypto || n.gm?.msCrypto; let t, r = 0; return e && e.getRandomValues && (t = e.getRandomValues(new Uint8Array(30))), i.split("").map((e => "x" === e ? o(t, r++).toString(16) : "y" === e ? (3 & o() | 8).toString(16) : e)).join("") } function s(e) { const t = n.gm?.crypto || n.gm?.msCrypto; let r, i = 0; t && t.getRandomValues && (r = t.getRandomValues(new Uint8Array(e))); const a = []; for (var s = 0; s < e; s++)a.push(o(r, i++).toString(16)); return a.join("") } function c() { return s(16) } function u() { return s(32) } }, 2614: (e, t, r) => { "use strict"; r.d(t, { BB: () => a, H3: () => n, g: () => u, iL: () => c, tS: () => s, uh: () => i, wk: () => o }); const n = "NRBA", i = "SESSION", o = 144e5, a = 18e5, s = { STARTED: "session-started", PAUSE: "session-pause", RESET: "session-reset", RESUME: "session-resume", UPDATE: "session-update" }, c = { SAME_TAB: "same-tab", CROSS_TAB: "cross-tab" }, u = { OFF: 0, FULL: 1, ERROR: 2 } }, 1863: (e, t, r) => { "use strict"; function n() { return Math.floor(performance.now()) } r.d(t, { t: () => n }) }, 7485: (e, t, r) => { "use strict"; r.d(t, { D: () => i }); var n = r(6154); function i(e) { if (0 === (e || "").indexOf("data:")) return { protocol: "data" }; try { const t = new URL(e, location.href), r = { port: t.port, hostname: t.hostname, pathname: t.pathname, search: t.search, protocol: t.protocol.slice(0, t.protocol.indexOf(":")), sameOrigin: t.protocol === n.gm?.location?.protocol && t.host === n.gm?.location?.host }; return r.port && "" !== r.port || ("http:" === t.protocol && (r.port = "80"), "https:" === t.protocol && (r.port = "443")), r.pathname && "" !== r.pathname ? r.pathname.startsWith("/") || (r.pathname = "/".concat(r.pathname)) : r.pathname = "/", r } catch (e) { return {} } } }, 944: (e, t, r) => { "use strict"; function n(e, t) { "function" == typeof console.debug && console.debug("New Relic Warning: https://github.com/newrelic/newrelic-browser-agent/blob/main/docs/warning-codes.md#".concat(e), t) } r.d(t, { R: () => n }) }, 5284: (e, t, r) => { "use strict"; r.d(t, { t: () => c, B: () => s }); var n = r(7836), i = r(6154); const o = "newrelic"; const a = new Set, s = {}; function c(e, t) { const r = n.ee.get(t); s[t] ??= {}, e && "object" == typeof e && (a.has(t) || (r.emit("rumresp", [e]), s[t] = e, a.add(t), function (e = {}) { try { i.gm.dispatchEvent(new CustomEvent(o, { detail: e })) } catch (e) { } }({ loaded: !0 }))) } }, 8990: (e, t, r) => { "use strict"; r.d(t, { I: () => i }); var n = Object.prototype.hasOwnProperty; function i(e, t, r) { if (n.call(e, t)) return e[t]; var i = r(); if (Object.defineProperty && Object.keys) try { return Object.defineProperty(e, t, { value: i, writable: !0, enumerable: !1 }), i } catch (e) { } return e[t] = i, i } }, 6389: (e, t, r) => { "use strict"; function n(e, t = 500, r = {}) { const n = r?.leading || !1; let i; return (...r) => { n && void 0 === i && (e.apply(this, r), i = setTimeout((() => { i = clearTimeout(i) }), t)), n || (clearTimeout(i), i = setTimeout((() => { e.apply(this, r) }), t)) } } function i(e) { let t = !1; return (...r) => { t || (t = !0, e.apply(this, r)) } } r.d(t, { J: () => i, s: () => n }) }, 3304: (e, t, r) => { "use strict"; r.d(t, { A: () => o }); var n = r(7836); const i = () => { const e = new WeakSet; return (t, r) => { if ("object" == typeof r && null !== r) { if (e.has(r)) return; e.add(r) } return r } }; function o(e) { try { return JSON.stringify(e, i()) ?? "" } catch (e) { try { n.ee.emit("internal-error", [e]) } catch (e) { } return "" } } }, 5289: (e, t, r) => { "use strict"; r.d(t, { GG: () => o, sB: () => a }); var n = r(3878); function i() { return "undefined" == typeof document || "complete" === document.readyState } function o(e, t) { if (i()) return e(); (0, n.sp)("load", e, t) } function a(e) { if (i()) return e(); (0, n.DD)("DOMContentLoaded", e) } }, 384: (e, t, r) => { "use strict"; r.d(t, { NT: () => o, US: () => d, Zm: () => a, bQ: () => c, dV: () => s, nY: () => u, pV: () => l }); var n = r(6154), i = r(1863); const o = { beacon: "bam.nr-data.net", errorBeacon: "bam.nr-data.net" }; function a() { return n.gm.NREUM || (n.gm.NREUM = {}), void 0 === n.gm.newrelic && (n.gm.newrelic = n.gm.NREUM), n.gm.NREUM } function s() { let e = a(); return e.o || (e.o = { ST: n.gm.setTimeout, SI: n.gm.setImmediate, CT: n.gm.clearTimeout, XHR: n.gm.XMLHttpRequest, REQ: n.gm.Request, EV: n.gm.Event, PR: n.gm.Promise, MO: n.gm.MutationObserver, FETCH: n.gm.fetch, WS: n.gm.WebSocket }), e } function c(e, t) { let r = a(); r.initializedAgents ??= {}, t.initializedAt = { ms: (0, i.t)(), date: new Date }, r.initializedAgents[e] = t } function u(e) { let t = a(); return t.initializedAgents?.[e] } function d(e, t) { a()[e] = t } function l() { return function () { let e = a(); const t = e.info || {}; e.info = { beacon: o.beacon, errorBeacon: o.errorBeacon, ...t } }(), function () { let e = a(); const t = e.init || {}; e.init = { ...t } }(), s(), function () { let e = a(); const t = e.loader_config || {}; e.loader_config = { ...t } }(), a() } }, 2843: (e, t, r) => { "use strict"; r.d(t, { u: () => i }); var n = r(3878); function i(e, t = !1, r, i) { (0, n.DD)("visibilitychange", (function () { if (t) return void ("hidden" === document.visibilityState && e()); e(document.visibilityState) }), r, i) } }, 8139: (e, t, r) => { "use strict"; r.d(t, { u: () => f }); var n = r(7836), i = r(3434), o = r(8990), a = r(6154); const s = {}, c = a.gm.XMLHttpRequest, u = "addEventListener", d = "removeEventListener", l = "nr@wrapped:".concat(n.P); function f(e) { var t = function (e) { return (e || n.ee).get("events") }(e); if (s[t.debugId]++) return t; s[t.debugId] = 1; var r = (0, i.YM)(t, !0); function f(e) { r.inPlace(e, [u, d], "-", g) } function g(e, t) { return e[1] } return "getPrototypeOf" in Object && (a.RI && h(document, f), h(a.gm, f), h(c.prototype, f)), t.on(u + "-start", (function (e, t) { var n = e[1]; if (null !== n && ("function" == typeof n || "object" == typeof n)) { var i = (0, o.I)(n, l, (function () { var e = { object: function () { if ("function" != typeof n.handleEvent) return; return n.handleEvent.apply(n, arguments) }, function: n }[typeof n]; return e ? r(e, "fn-", null, e.name || "anonymous") : n })); this.wrapped = e[1] = i } })), t.on(d + "-start", (function (e) { e[1] = this.wrapped || e[1] })), t } function h(e, t, ...r) { let n = e; for (; "object" == typeof n && !Object.prototype.hasOwnProperty.call(n, u);)n = Object.getPrototypeOf(n); n && t(n, ...r) } }, 3434: (e, t, r) => { "use strict"; r.d(t, { Jt: () => o, YM: () => c }); var n = r(7836), i = r(5607); const o = "nr@original:".concat(i.W); var a = Object.prototype.hasOwnProperty, s = !1; function c(e, t) { return e || (e = n.ee), r.inPlace = function (e, t, n, i, o) { n || (n = ""); const a = "-" === n.charAt(0); for (let s = 0; s < t.length; s++) { const c = t[s], u = e[c]; d(u) || (e[c] = r(u, a ? c + n : n, i, c, o)) } }, r.flag = o, r; function r(t, r, n, s, c) { return d(t) ? t : (r || (r = ""), nrWrapper[o] = t, function (e, t, r) { if (Object.defineProperty && Object.keys) try { return Object.keys(e).forEach((function (r) { Object.defineProperty(t, r, { get: function () { return e[r] }, set: function (t) { return e[r] = t, t } }) })), t } catch (e) { u([e], r) } for (var n in e) a.call(e, n) && (t[n] = e[n]) }(t, nrWrapper, e), nrWrapper); function nrWrapper() { var o, a, d, l; try { a = this, o = [...arguments], d = "function" == typeof n ? n(o, a) : n || {} } catch (t) { u([t, "", [o, a, s], d], e) } i(r + "start", [o, a, s], d, c); try { return l = t.apply(a, o) } catch (e) { throw i(r + "err", [o, a, e], d, c), e } finally { i(r + "end", [o, a, l], d, c) } } } function i(r, n, i, o) { if (!s || t) { var a = s; s = !0; try { e.emit(r, n, i, t, o) } catch (t) { u([t, r, n, i], e) } s = a } } } function u(e, t) { t || (t = n.ee); try { t.emit("internal-error", e) } catch (e) { } } function d(e) { return !(e && "function" == typeof e && e.apply && !e[o]) } }, 9300: (e, t, r) => { "use strict"; r.d(t, { T: () => n }); const n = r(860).K.ajax }, 3333: (e, t, r) => { "use strict"; r.d(t, { TZ: () => n, Zp: () => i, mq: () => s, nf: () => a, qN: () => o }); const n = r(860).K.genericEvents, i = ["auxclick", "click", "copy", "keydown", "paste", "scrollend"], o = ["focus", "blur"], a = 4, s = 1e3 }, 6774: (e, t, r) => { "use strict"; r.d(t, { T: () => n }); const n = r(860).K.jserrors }, 993: (e, t, r) => { "use strict"; r.d(t, { ET: () => o, TZ: () => a, p_: () => i }); var n = r(860); const i = { ERROR: "ERROR", WARN: "WARN", INFO: "INFO", DEBUG: "DEBUG", TRACE: "TRACE" }, o = "log", a = n.K.logging }, 3785: (e, t, r) => { "use strict"; r.d(t, { R: () => c, b: () => u }); var n = r(9908), i = r(1863), o = r(860), a = r(3969), s = r(993); function c(e, t, r = {}, c = s.p_.INFO) { (0, n.p)(a.xV, ["API/logging/".concat(c.toLowerCase(), "/called")], void 0, o.K.metrics, e), (0, n.p)(s.ET, [(0, i.t)(), t, r, c], void 0, o.K.logging, e) } function u(e) { return "string" == typeof e && Object.values(s.p_).some((t => t === e.toUpperCase().trim())) } }, 3969: (e, t, r) => { "use strict"; r.d(t, { TZ: () => n, XG: () => s, rs: () => i, xV: () => a, z_: () => o }); const n = r(860).K.metrics, i = "sm", o = "cm", a = "storeSupportabilityMetrics", s = "storeEventMetrics" }, 6630: (e, t, r) => { "use strict"; r.d(t, { T: () => n }); const n = r(860).K.pageViewEvent }, 782: (e, t, r) => { "use strict"; r.d(t, { T: () => n }); const n = r(860).K.pageViewTiming }, 6344: (e, t, r) => { "use strict"; r.d(t, { BB: () => d, G4: () => o, Qb: () => l, TZ: () => i, Ug: () => a, _s: () => s, bc: () => u, yP: () => c }); var n = r(2614); const i = r(860).K.sessionReplay, o = { RECORD: "recordReplay", PAUSE: "pauseReplay", REPLAY_RUNNING: "replayRunning", ERROR_DURING_REPLAY: "errorDuringReplay" }, a = .12, s = { DomContentLoaded: 0, Load: 1, FullSnapshot: 2, IncrementalSnapshot: 3, Meta: 4, Custom: 5 }, c = { [n.g.ERROR]: 15e3, [n.g.FULL]: 3e5, [n.g.OFF]: 0 }, u = { RESET: { message: "Session was reset", sm: "Reset" }, IMPORT: { message: "Recorder failed to import", sm: "Import" }, TOO_MANY: { message: "429: Too Many Requests", sm: "Too-Many" }, TOO_BIG: { message: "Payload was too large", sm: "Too-Big" }, CROSS_TAB: { message: "Session Entity was set to OFF on another tab", sm: "Cross-Tab" }, ENTITLEMENTS: { message: "Session Replay is not allowed and will not be started", sm: "Entitlement" } }, d = 5e3, l = { API: "api" } }, 5270: (e, t, r) => { "use strict"; r.d(t, { Aw: () => c, CT: () => u, SR: () => s }); var n = r(384), i = r(9417), o = r(7767), a = r(6154); function s(e) { return !!(0, n.dV)().o.MO && (0, o.V)(e) && !0 === (0, i.gD)(e, "session_trace.enabled") } function c(e) { return !0 === (0, i.gD)(e, "session_replay.preload") && s(e) } function u(e, t) { const r = t.correctAbsoluteTimestamp(e); return { originalTimestamp: e, correctedTimestamp: r, timestampDiff: e - r, originTime: a.WN, correctedOriginTime: t.correctedOriginTime, originTimeDiff: Math.floor(a.WN - t.correctedOriginTime) } } }, 3738: (e, t, r) => { "use strict"; r.d(t, { He: () => i, Kp: () => s, Lc: () => u, Rz: () => d, TZ: () => n, bD: () => o, d3: () => a, jx: () => l, uP: () => c }); const n = r(860).K.sessionTrace, i = "bstResource", o = "resource", a = "-start", s = "-end", c = "fn" + a, u = "fn" + s, d = "pushState", l = 1e3 }, 3962: (e, t, r) => { "use strict"; r.d(t, { AM: () => o, O2: () => s, Qu: () => c, TZ: () => a, ih: () => u, tC: () => i }); var n = r(860); const i = ["click", "keydown", "submit"], o = "api", a = n.K.softNav, s = { INITIAL_PAGE_LOAD: "", ROUTE_CHANGE: 1, UNSPECIFIED: 2 }, c = { INTERACTION: 1, AJAX: 2, CUSTOM_END: 3, CUSTOM_TRACER: 4 }, u = { IP: "in progress", FIN: "finished", CAN: "cancelled" } }, 7378: (e, t, r) => { "use strict"; r.d(t, { $p: () => R, BR: () => b, Kp: () => x, L3: () => y, Lc: () => c, NC: () => o, SG: () => d, TZ: () => i, U6: () => g, UT: () => m, d3: () => w, dT: () => f, e5: () => A, gx: () => v, l9: () => l, oW: () => h, op: () => p, rw: () => u, tH: () => E, uP: () => s, wW: () => T, xq: () => a }); var n = r(384); const i = r(860).K.spa, o = ["click", "submit", "keypress", "keydown", "keyup", "change"], a = 999, s = "fn-start", c = "fn-end", u = "cb-start", d = "api-ixn-", l = "remaining", f = "interaction", h = "spaNode", g = "jsonpNode", p = "fetch-start", m = "fetch-done", v = "fetch-body-", b = "jsonp-end", y = (0, n.dV)().o.ST, w = "-start", x = "-end", R = "-body", T = "cb" + x, A = "jsTime", E = "fetch" }, 4234: (e, t, r) => { "use strict"; r.d(t, { W: () => i }); var n = r(7836); class i { constructor(e, t, r) { this.agentIdentifier = e, this.aggregator = t, this.ee = n.ee.get(e), this.featureName = r, this.blocked = !1 } } }, 7767: (e, t, r) => { "use strict"; r.d(t, { V: () => o }); var n = r(9417), i = r(6154); const o = e => i.RI && !0 === (0, n.gD)(e, "privacy.cookies_enabled") }, 425: (e, t, r) => { "use strict"; r.d(t, { j: () => j }); var n = r(860), i = r(2555), o = r(3371), a = r(9908), s = r(7836), c = r(1687), u = r(5289), d = r(6154), l = r(944), f = r(3969), h = r(384), g = r(6344); const p = ["setErrorHandler", "finished", "addToTrace", "addRelease", "addPageAction", "setCurrentRouteName", "setPageViewName", "setCustomAttribute", "interaction", "noticeError", "setUserId", "setApplicationVersion", "start", g.G4.RECORD, g.G4.PAUSE, "log", "wrapLogger"], m = ["setErrorHandler", "finished", "addToTrace", "addRelease"]; var v = r(1863), b = r(2614), y = r(993), w = r(3785), x = r(2646), R = r(3434); function T(e, t, r, n) { if ("object" != typeof t || !t || "string" != typeof r || !r || "function" != typeof t[r]) return (0, l.R)(29); const i = function (e) { return (e || s.ee).get("logger") }(e), o = (0, R.YM)(i), a = new x.y(s.P); return a.level = n.level, a.customAttributes = n.customAttributes, o.inPlace(t, [r], "wrap-logger-", a), i } function A() { const e = (0, h.pV)(); p.forEach((t => { e[t] = (...r) => function (t, ...r) { let n = []; return Object.values(e.initializedAgents).forEach((e => { e && e.api ? e.exposed && e.api[t] && n.push(e.api[t](...r)) : (0, l.R)(38, t) })), n.length > 1 ? n : n[0] }(t, ...r) })) } const E = {}; var S = r(9417), N = r(5603), O = r(5284); const I = e => { const t = e.startsWith("http"); e += "/", r.p = t ? e : "https://" + e }; let _ = !1; function j(e, t = {}, p, x) { let { init: R, info: j, loader_config: P, runtime: C = {}, exposed: k = !0 } = t; C.loaderType = p; const L = (0, h.pV)(); j || (R = L.init, j = L.info, P = L.loader_config), (0, S.xN)(e.agentIdentifier, R || {}), (0, N.a)(e.agentIdentifier, P || {}), j.jsAttributes ??= {}, d.bv && (j.jsAttributes.isWorker = !0), (0, i.x1)(e.agentIdentifier, j); const D = (0, S.D0)(e.agentIdentifier), H = [j.beacon, j.errorBeacon]; _ || (D.proxy.assets && (I(D.proxy.assets), H.push(D.proxy.assets)), D.proxy.beacon && H.push(D.proxy.beacon), A(), (0, h.US)("activatedFeatures", O.B), e.runSoftNavOverSpa &&= !0 === D.soft_navigations.enabled && D.feature_flags.includes("soft_nav")), C.denyList = [...D.ajax.deny_list || [], ...D.ajax.block_internal ? H : []], C.ptid = e.agentIdentifier, (0, o.V)(e.agentIdentifier, C), e.ee = s.ee.get(e.agentIdentifier), void 0 === e.api && (e.api = function (e, t, h = !1) { t || (0, c.Ak)(e, "api"); const p = {}; var x = s.ee.get(e), R = x.get("tracer"); E[e] = b.g.OFF, x.on(g.G4.REPLAY_RUNNING, (t => { E[e] = t })); var A = "api-", S = A + "ixn-"; function N(t, r, n, o) { const a = (0, i.Vp)(e); return null === r ? delete a.jsAttributes[t] : (0, i.x1)(e, { ...a, jsAttributes: { ...a.jsAttributes, [t]: r } }), _(A, n, !0, o || null === r ? "session" : void 0)(t, r) } function O() { } p.log = function (e, { customAttributes: t = {}, level: r = y.p_.INFO } = {}) { (0, a.p)(f.xV, ["API/log/called"], void 0, n.K.metrics, x), (0, w.R)(x, e, t, r) }, p.wrapLogger = (e, t, { customAttributes: r = {}, level: i = y.p_.INFO } = {}) => { (0, a.p)(f.xV, ["API/wrapLogger/called"], void 0, n.K.metrics, x), T(x, e, t, { customAttributes: r, level: i }) }, m.forEach((e => { p[e] = _(A, e, !0, "api") })), p.addPageAction = _(A, "addPageAction", !0, n.K.genericEvents), p.setPageViewName = function (t, r) { if ("string" == typeof t) return "/" !== t.charAt(0) && (t = "/" + t), (0, o.f)(e).customTransaction = (r || "http://custom.transaction") + t, _(A, "setPageViewName", !0)() }, p.setCustomAttribute = function (e, t, r = !1) { if ("string" == typeof e) { if (["string", "number", "boolean"].includes(typeof t) || null === t) return N(e, t, "setCustomAttribute", r); (0, l.R)(40, typeof t) } else (0, l.R)(39, typeof e) }, p.setUserId = function (e) { if ("string" == typeof e || null === e) return N("enduser.id", e, "setUserId", !0); (0, l.R)(41, typeof e) }, p.setApplicationVersion = function (e) { if ("string" == typeof e || null === e) return N("application.version", e, "setApplicationVersion", !1); (0, l.R)(42, typeof e) }, p.start = () => { try { (0, a.p)(f.xV, ["API/start/called"], void 0, n.K.metrics, x), x.emit("manual-start-all") } catch (e) { (0, l.R)(23, e) } }, p[g.G4.RECORD] = function () { (0, a.p)(f.xV, ["API/recordReplay/called"], void 0, n.K.metrics, x), (0, a.p)(g.G4.RECORD, [], void 0, n.K.sessionReplay, x) }, p[g.G4.PAUSE] = function () { (0, a.p)(f.xV, ["API/pauseReplay/called"], void 0, n.K.metrics, x), (0, a.p)(g.G4.PAUSE, [], void 0, n.K.sessionReplay, x) }, p.interaction = function (e) { return (new O).get("object" == typeof e ? e : {}) }; const I = O.prototype = { createTracer: function (e, t) { var r = {}, i = this, o = "function" == typeof t; return (0, a.p)(f.xV, ["API/createTracer/called"], void 0, n.K.metrics, x), h || (0, a.p)(S + "tracer", [(0, v.t)(), e, r], i, n.K.spa, x), function () { if (R.emit((o ? "" : "no-") + "fn-start", [(0, v.t)(), i, o], r), o) try { return t.apply(this, arguments) } catch (e) { const t = "string" == typeof e ? new Error(e) : e; throw R.emit("fn-err", [arguments, this, t], r), t } finally { R.emit("fn-end", [(0, v.t)()], r) } } } }; function _(e, t, r, i) { return function () { return (0, a.p)(f.xV, ["API/" + t + "/called"], void 0, n.K.metrics, x), i && (0, a.p)(e + t, [(0, v.t)(), ...arguments], r ? null : this, i, x), r ? void 0 : this } } function j() { r.e(478).then(r.bind(r, 8778)).then((({ setAPI: t }) => { t(e), (0, c.Ze)(e, "api") })).catch((e => { (0, l.R)(27, e), x.abort() })) } return ["actionText", "setName", "setAttribute", "save", "ignore", "onEnd", "getContext", "end", "get"].forEach((e => { I[e] = _(S, e, void 0, h ? n.K.softNav : n.K.spa) })), p.setCurrentRouteName = h ? _(S, "routeName", void 0, n.K.softNav) : _(A, "routeName", !0, n.K.spa), p.noticeError = function (t, r) { "string" == typeof t && (t = new Error(t)), (0, a.p)(f.xV, ["API/noticeError/called"], void 0, n.K.metrics, x), (0, a.p)("err", [t, (0, v.t)(), !1, r, !!E[e]], void 0, n.K.jserrors, x) }, d.RI ? (0, u.GG)((() => j()), !0) : j(), p }(e.agentIdentifier, x, e.runSoftNavOverSpa)), void 0 === e.exposed && (e.exposed = k), _ = !0 } }, 8374: (e, t, r) => { r.nc = (() => { try { return document?.currentScript?.nonce } catch (e) { } return "" })() }, 860: (e, t, r) => { "use strict"; r.d(t, { K: () => n, P: () => i }); const n = { ajax: "ajax", genericEvents: "generic_events", jserrors: "jserrors", logging: "logging", metrics: "metrics", pageAction: "page_action", pageViewEvent: "page_view_event", pageViewTiming: "page_view_timing", sessionReplay: "session_replay", sessionTrace: "session_trace", softNav: "soft_navigations", spa: "spa" }, i = { [n.pageViewEvent]: 1, [n.pageViewTiming]: 2, [n.metrics]: 3, [n.jserrors]: 4, [n.spa]: 5, [n.ajax]: 6, [n.sessionTrace]: 7, [n.softNav]: 8, [n.sessionReplay]: 9, [n.logging]: 10, [n.genericEvents]: 11 } } }, n = {}; function i(e) { var t = n[e]; if (void 0 !== t) return t.exports; var o = n[e] = { exports: {} }; return r[e](o, o.exports, i), o.exports } i.m = r, i.d = (e, t) => { for (var r in t) i.o(t, r) && !i.o(e, r) && Object.defineProperty(e, r, { enumerable: !0, get: t[r] }) }, i.f = {}, i.e = e => Promise.all(Object.keys(i.f).reduce(((t, r) => (i.f[r](e, t), t)), [])), i.u = e => ({ 212: "nr-spa-compressor", 249: "nr-spa-recorder", 478: "nr-spa" }[e] + "-1.269.0.min.js"), i.o = (e, t) => Object.prototype.hasOwnProperty.call(e, t), e = {}, t = "NRBA-1.269.0.PROD:", i.l = (r, n, o, a) => { if (e[r]) e[r].push(n); else { var s, c; if (void 0 !== o) for (var u = document.getElementsByTagName("script"), d = 0; d < u.length; d++) { var l = u[d]; if (l.getAttribute("src") == r || l.getAttribute("data-webpack") == t + o) { s = l; break } } if (!s) { c = !0; var f = { 478: "sha512-BDnQSqs6w93jZNuA2+ydjStO6iZUcCDM2G5ACNl42PnZebXqSDjfzp21rEmyIS/uS1Mm/KhHBftMozfaupNTFQ==", 249: "sha512-+3RM3jpjuKfYqtWclSvdJHGFcW1Zs3W91YF6LLj05mh2KF2Dd4d/UbOS+Gj8JJIB3+OhK9x9MEoWBx6J1Qp+Hw==", 212: "sha512-2D6xSed7GvSJDbO/jQCNsTNZTswnT4nkZPDOuerj6rroMh2F2IQsO5rZkHWXh31IDaiIxoiUn44tUfBomWqChw==" }; (s = document.createElement("script")).charset = "utf-8", s.timeout = 120, i.nc && s.setAttribute("nonce", i.nc), s.setAttribute("data-webpack", t + o), s.src = r, 0 !== s.src.indexOf(window.location.origin + "/") && (s.crossOrigin = "anonymous"), f[a] && (s.integrity = f[a]) } e[r] = [n]; var h = (t, n) => { s.onerror = s.onload = null, clearTimeout(g); var i = e[r]; if (delete e[r], s.parentNode && s.parentNode.removeChild(s), i && i.forEach((e => e(n))), t) return t(n) }, g = setTimeout(h.bind(null, void 0, { type: "timeout", target: s }), 12e4); s.onerror = h.bind(null, s.onerror), s.onload = h.bind(null, s.onload), c && document.head.appendChild(s) } }, i.r = e => { "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e, "__esModule", { value: !0 }) }, i.p = "https://js-agent.newrelic.com/", (() => { var e = { 38: 0, 788: 0 }; i.f.j = (t, r) => { var n = i.o(e, t) ? e[t] : void 0; if (0 !== n) if (n) r.push(n[2]); else { var o = new Promise(((r, i) => n = e[t] = [r, i])); r.push(n[2] = o); var a = i.p + i.u(t), s = new Error; i.l(a, (r => { if (i.o(e, t) && (0 !== (n = e[t]) && (e[t] = void 0), n)) { var o = r && ("load" === r.type ? "missing" : r.type), a = r && r.target && r.target.src; s.message = "Loading chunk " + t + " failed.\n(" + o + ": " + a + ")", s.name = "ChunkLoadError", s.type = o, s.request = a, n[1](s) } }), "chunk-" + t, t) } }; var t = (t, r) => { var n, o, [a, s, c] = r, u = 0; if (a.some((t => 0 !== e[t]))) { for (n in s) i.o(s, n) && (i.m[n] = s[n]); if (c) c(i) } for (t && t(r); u < a.length; u++)o = a[u], i.o(e, o) && e[o] && e[o][0](), e[o] = 0 }, r = self["webpackChunk:NRBA-1.269.0.PROD"] = self["webpackChunk:NRBA-1.269.0.PROD"] || []; r.forEach(t.bind(null, 0)), r.push = t.bind(null, r.push.bind(r)) })(), (() => { "use strict"; i(8374); var e = i(944), t = i(6344), r = i(9566); class n { agentIdentifier; constructor(e = (0, r.LA)(16)) { this.agentIdentifier = e } #e(t, ...r) { if ("function" == typeof this.api?.[t]) return this.api[t](...r); (0, e.R)(35, t) } addPageAction(e, t) { return this.#e("addPageAction", e, t) } setPageViewName(e, t) { return this.#e("setPageViewName", e, t) } setCustomAttribute(e, t, r) { return this.#e("setCustomAttribute", e, t, r) } noticeError(e, t) { return this.#e("noticeError", e, t) } setUserId(e) { return this.#e("setUserId", e) } setApplicationVersion(e) { return this.#e("setApplicationVersion", e) } setErrorHandler(e) { return this.#e("setErrorHandler", e) } finished(e) { return this.#e("finished", e) } addRelease(e, t) { return this.#e("addRelease", e, t) } start(e) { return this.#e("start", e) } recordReplay() { return this.#e(t.G4.RECORD) } pauseReplay() { return this.#e(t.G4.PAUSE) } addToTrace(e) { return this.#e("addToTrace", e) } setCurrentRouteName(e) { return this.#e("setCurrentRouteName", e) } interaction() { return this.#e("interaction") } log(e, t) { return this.#e("log", e, t) } wrapLogger(e, t, r) { return this.#e("wrapLogger", e, t, r) } } var o = i(860), a = i(9417); const s = Object.values(o.K); function c(e) { const t = {}; return s.forEach((r => { t[r] = function (e, t) { return !0 === (0, a.gD)(t, "".concat(e, ".enabled")) }(r, e) })), t } var u = i(425); var d = i(1687), l = i(4234), f = i(5289), h = i(6154), g = i(5270), p = i(7767), m = i(6389); class v extends l.W { constructor(e, t, r, n = !0) { super(e, t, r), this.auto = n, this.abortHandler = void 0, this.featAggregate = void 0, this.onAggregateImported = void 0, !1 === (0, a.gD)(this.agentIdentifier, "".concat(this.featureName, ".autoStart")) && (this.auto = !1), this.auto ? (0, d.Ak)(e, r) : this.ee.on("manual-start-all", (0, m.J)((() => { (0, d.Ak)(this.agentIdentifier, this.featureName), this.auto = !0, this.importAggregator() }))) } importAggregator(t = {}) { if (this.featAggregate || !this.auto) return; let r; this.onAggregateImported = new Promise((e => { r = e })); const n = async () => { let n; try { if ((0, p.V)(this.agentIdentifier)) { const { setupAgentSession: e } = await i.e(478).then(i.bind(i, 6526)); n = e(this.agentIdentifier) } } catch (t) { (0, e.R)(20, t), this.ee.emit("internal-error", [t]), this.featureName === o.K.sessionReplay && this.abortHandler?.() } try { if (!this.#t(this.featureName, n)) return (0, d.Ze)(this.agentIdentifier, this.featureName), void r(!1); const { lazyFeatureLoader: e } = await i.e(478).then(i.bind(i, 6103)), { Aggregate: o } = await e(this.featureName, "aggregate"); this.featAggregate = new o(this.agentIdentifier, this.aggregator, t), r(!0) } catch (t) { (0, e.R)(34, t), this.abortHandler?.(), (0, d.Ze)(this.agentIdentifier, this.featureName, !0), r(!1), this.ee && this.ee.abort() } }; h.RI ? (0, f.GG)((() => n()), !0) : n() } #t(e, t) { switch (e) { case o.K.sessionReplay: return (0, g.SR)(this.agentIdentifier) && !!t; case o.K.sessionTrace: return !!t; default: return !0 } } } var b = i(6630); class y extends v { static featureName = b.T; constructor(e, t, r = !0) { super(e, t, b.T, r), this.importAggregator() } } var w = i(4777); class x extends w.J { constructor(e) { super(e), this.aggregatedData = {} } store(e, t, r, n, i) { var o = this.getBucket(e, t, r, i); return o.metrics = function (e, t) { t || (t = { count: 0 }); return t.count += 1, Object.entries(e || {}).forEach((([e, r]) => { t[e] = R(r, t[e]) })), t }(n, o.metrics), o } merge(e, t, r, n, i) { var o = this.getBucket(e, t, n, i); if (o.metrics) { var a = o.metrics; a.count += r.count, Object.keys(r || {}).forEach((e => { if ("count" !== e) { var t = a[e], n = r[e]; n && !n.c ? a[e] = R(n.t, t) : a[e] = function (e, t) { if (!t) return e; t.c || (t = T(t.t)); return t.min = Math.min(e.min, t.min), t.max = Math.max(e.max, t.max), t.t += e.t, t.sos += e.sos, t.c += e.c, t }(n, a[e]) } })) } else o.metrics = r } storeMetric(e, t, r, n) { var i = this.getBucket(e, t, r); return i.stats = R(n, i.stats), i } getBucket(e, t, r, n) { this.aggregatedData[e] || (this.aggregatedData[e] = {}); var i = this.aggregatedData[e][t]; return i || (i = this.aggregatedData[e][t] = { params: r || {} }, n && (i.custom = n)), i } get(e, t) { return t ? this.aggregatedData[e] && this.aggregatedData[e][t] : this.aggregatedData[e] } take(e) { for (var t = {}, r = "", n = !1, i = 0; i < e.length; i++)t[r = e[i]] = Object.values(this.aggregatedData[r] || {}), t[r].length && (n = !0), delete this.aggregatedData[r]; return n ? t : null } } function R(e, t) { return null == e ? function (e) { e ? e.c++ : e = { c: 1 }; return e }(t) : t ? (t.c || (t = T(t.t)), t.c += 1, t.t += e, t.sos += e * e, e > t.max && (t.max = e), e < t.min && (t.min = e), t) : { t: e } } function T(e) { return { t: e, min: e, max: e, sos: e * e, c: 1 } } var A = i(384); var E = i(9908), S = i(2843), N = i(3878), O = i(782), I = i(1863); class _ extends v { static featureName = O.T; constructor(e, t, r = !0) { super(e, t, O.T, r), h.RI && ((0, S.u)((() => (0, E.p)("docHidden", [(0, I.t)()], void 0, O.T, this.ee)), !0), (0, N.sp)("pagehide", (() => (0, E.p)("winPagehide", [(0, I.t)()], void 0, O.T, this.ee))), this.importAggregator()) } } var j = i(3969); class P extends v { static featureName = j.TZ; constructor(e, t, r = !0) { super(e, t, j.TZ, r), this.importAggregator() } } var C = i(6774), k = i(3304); class L { constructor(e, t, r, n, i) { this.name = "UncaughtError", this.message = "string" == typeof e ? e : (0, k.A)(e), this.sourceURL = t, this.line = r, this.column = n, this.__newrelic = i } } function D(e) { return K(e) ? e : new L(void 0 !== e?.message ? e.message : e, e?.filename || e?.sourceURL, e?.lineno || e?.line, e?.colno || e?.col, e?.__newrelic) } function H(e) { let t = "Unhandled Promise Rejection"; if (K(e?.reason)) try { return e.reason.message = t + ": " + e.reason.message, D(e.reason) } catch (t) { return D(e.reason) } if (void 0 === e.reason) return D(t); const r = D(e.reason); return r.message = t + ": " + r?.message, r } function M(e) { if (e.error instanceof SyntaxError && !/:\d+$/.test(e.error.stack?.trim())) { const t = new L(e.message, e.filename, e.lineno, e.colno, e.error.__newrelic); return t.name = SyntaxError.name, t } return K(e.error) ? e.error : D(e) } function K(e) { return e instanceof Error && !!e.stack } class U extends v { static featureName = C.T; #r = !1; constructor(e, r, n = !0) { super(e, r, C.T, n); try { this.removeOnAbort = new AbortController } catch (e) { } this.ee.on("internal-error", (e => { this.abortHandler && (0, E.p)("ierr", [D(e), (0, I.t)(), !0, {}, this.#r], void 0, this.featureName, this.ee) })), this.ee.on(t.G4.REPLAY_RUNNING, (e => { this.#r = e })), h.gm.addEventListener("unhandledrejection", (e => { this.abortHandler && (0, E.p)("err", [H(e), (0, I.t)(), !1, { unhandledPromiseRejection: 1 }, this.#r], void 0, this.featureName, this.ee) }), (0, N.jT)(!1, this.removeOnAbort?.signal)), h.gm.addEventListener("error", (e => { this.abortHandler && (0, E.p)("err", [M(e), (0, I.t)(), !1, {}, this.#r], void 0, this.featureName, this.ee) }), (0, N.jT)(!1, this.removeOnAbort?.signal)), this.abortHandler = this.#n, this.importAggregator() } #n() { this.removeOnAbort?.abort(), this.abortHandler = void 0 } } var V = i(5603), G = i(8990); let B = 1; const F = "nr@id"; function W(e) { const t = typeof e; return !e || "object" !== t && "function" !== t ? -1 : e === h.gm ? 0 : (0, G.I)(e, F, (function () { return B++ })) } function z(e) { if ("string" == typeof e && e.length) return e.length; if ("object" == typeof e) { if ("undefined" != typeof ArrayBuffer && e instanceof ArrayBuffer && e.byteLength) return e.byteLength; if ("undefined" != typeof Blob && e instanceof Blob && e.size) return e.size; if (!("undefined" != typeof FormData && e instanceof FormData)) try { return (0, k.A)(e).length } catch (e) { return } } } var q = i(8139), Z = i(7836), Y = i(3434); const X = {}, J = ["open", "send"]; function Q(t) { var r = t || Z.ee; const n = function (e) { return (e || Z.ee).get("xhr") }(r); if (X[n.debugId]++) return n; X[n.debugId] = 1, (0, q.u)(r); var i = (0, Y.YM)(n), o = h.gm.XMLHttpRequest, a = h.gm.MutationObserver, s = h.gm.Promise, c = h.gm.setInterval, u = "readystatechange", d = ["onload", "onerror", "onabort", "onloadstart", "onloadend", "onprogress", "ontimeout"], l = [], f = h.gm.XMLHttpRequest = function (t) { const r = new o(t), a = n.context(r); try { n.emit("new-xhr", [r], a), r.addEventListener(u, (s = a, function () { var e = this; e.readyState > 3 && !s.resolved && (s.resolved = !0, n.emit("xhr-resolved", [], e)), i.inPlace(e, d, "fn-", y) }), (0, N.jT)(!1)) } catch (t) { (0, e.R)(15, t); try { n.emit("internal-error", [t]) } catch (e) { } } var s; return r }; function g(e, t) { i.inPlace(t, ["onreadystatechange"], "fn-", y) } if (function (e, t) { for (var r in e) t[r] = e[r] }(o, f), f.prototype = o.prototype, i.inPlace(f.prototype, J, "-xhr-", y), n.on("send-xhr-start", (function (e, t) { g(e, t), function (e) { l.push(e), a && (p ? p.then(b) : c ? c(b) : (m = -m, v.data = m)) }(t) })), n.on("open-xhr-start", g), a) { var p = s && s.resolve(); if (!c && !s) { var m = 1, v = document.createTextNode(m); new a(b).observe(v, { characterData: !0 }) } } else r.on("fn-end", (function (e) { e[0] && e[0].type === u || b() })); function b() { for (var e = 0; e < l.length; e++)g(0, l[e]); l.length && (l = []) } function y(e, t) { return t } return n } var ee = "fetch-", te = ee + "body-", re = ["arrayBuffer", "blob", "json", "text", "formData"], ne = h.gm.Request, ie = h.gm.Response, oe = "prototype"; const ae = {}; function se(e) { const t = function (e) { return (e || Z.ee).get("fetch") }(e); if (!(ne && ie && h.gm.fetch)) return t; if (ae[t.debugId]++) return t; function r(e, r, n) { var i = e[r]; "function" == typeof i && (e[r] = function () { var e, r = [...arguments], o = {}; t.emit(n + "before-start", [r], o), o[Z.P] && o[Z.P].dt && (e = o[Z.P].dt); var a = i.apply(this, r); return t.emit(n + "start", [r, e], a), a.then((function (e) { return t.emit(n + "end", [null, e], a), e }), (function (e) { throw t.emit(n + "end", [e], a), e })) }) } return ae[t.debugId] = 1, re.forEach((e => { r(ne[oe], e, te), r(ie[oe], e, te) })), r(h.gm, "fetch", ee), t.on(ee + "end", (function (e, r) { var n = this; if (r) { var i = r.headers.get("content-length"); null !== i && (n.rxSize = i), t.emit(ee + "done", [null, r], n) } else t.emit(ee + "done", [e], n) })), t } var ce = i(7485); class ue { constructor(e) { this.agentIdentifier = e } generateTracePayload(e) { if (!this.shouldGenerateTrace(e)) return null; var t = (0, V.o)(this.agentIdentifier); if (!t) return null; var n = (t.accountID || "").toString() || null, i = (t.agentID || "").toString() || null, o = (t.trustKey || "").toString() || null; if (!n || !i) return null; var a = (0, r.ZF)(), s = (0, r.el)(), c = Date.now(), u = { spanId: a, traceId: s, timestamp: c }; return (e.sameOrigin || this.isAllowedOrigin(e) && this.useTraceContextHeadersForCors()) && (u.traceContextParentHeader = this.generateTraceContextParentHeader(a, s), u.traceContextStateHeader = this.generateTraceContextStateHeader(a, c, n, i, o)), (e.sameOrigin && !this.excludeNewrelicHeader() || !e.sameOrigin && this.isAllowedOrigin(e) && this.useNewrelicHeaderForCors()) && (u.newrelicHeader = this.generateTraceHeader(a, s, c, n, i, o)), u } generateTraceContextParentHeader(e, t) { return "00-" + t + "-" + e + "-01" } generateTraceContextStateHeader(e, t, r, n, i) { return i + "@nr=0-1-" + r + "-" + n + "-" + e + "----" + t } generateTraceHeader(e, t, r, n, i, o) { if (!("function" == typeof h.gm?.btoa)) return null; var a = { v: [0, 1], d: { ty: "Browser", ac: n, ap: i, id: e, tr: t, ti: r } }; return o && n !== o && (a.d.tk = o), btoa((0, k.A)(a)) } shouldGenerateTrace(e) { return this.isDtEnabled() && this.isAllowedOrigin(e) } isAllowedOrigin(e) { var t = !1, r = {}; if ((0, a.gD)(this.agentIdentifier, "distributed_tracing") && (r = (0, a.D0)(this.agentIdentifier).distributed_tracing), e.sameOrigin) t = !0; else if (r.allowed_origins instanceof Array) for (var n = 0; n < r.allowed_origins.length; n++) { var i = (0, ce.D)(r.allowed_origins[n]); if (e.hostname === i.hostname && e.protocol === i.protocol && e.port === i.port) { t = !0; break } } return t } isDtEnabled() { var e = (0, a.gD)(this.agentIdentifier, "distributed_tracing"); return !!e && !!e.enabled } excludeNewrelicHeader() { var e = (0, a.gD)(this.agentIdentifier, "distributed_tracing"); return !!e && !!e.exclude_newrelic_header } useNewrelicHeaderForCors() { var e = (0, a.gD)(this.agentIdentifier, "distributed_tracing"); return !!e && !1 !== e.cors_use_newrelic_header } useTraceContextHeadersForCors() { var e = (0, a.gD)(this.agentIdentifier, "distributed_tracing"); return !!e && !!e.cors_use_tracecontext_headers } } var de = i(9300), le = i(7295), fe = ["load", "error", "abort", "timeout"], he = fe.length, ge = (0, A.dV)().o.REQ, pe = (0, A.dV)().o.XHR; class me extends v { static featureName = de.T; constructor(e, t, r = !0) { super(e, t, de.T, r), this.dt = new ue(e), this.handler = (e, t, r, n) => (0, E.p)(e, t, r, n, this.ee); try { const e = { xmlhttprequest: "xhr", fetch: "fetch", beacon: "beacon" }; h.gm?.performance?.getEntriesByType("resource").forEach((t => { if (t.initiatorType in e && 0 !== t.responseStatus) { const r = { status: t.responseStatus }, n = { rxSize: t.transferSize, duration: Math.floor(t.duration), cbTime: 0 }; ve(r, t.name), this.handler("xhr", [r, n, t.startTime, t.responseEnd, e[t.initiatorType]], void 0, o.K.ajax) } })) } catch (e) { } se(this.ee), Q(this.ee), function (e, t, r, n) { function i(e) { var t = this; t.totalCbs = 0, t.called = 0, t.cbTime = 0, t.end = x, t.ended = !1, t.xhrGuids = {}, t.lastSize = null, t.loadCaptureCalled = !1, t.params = this.params || {}, t.metrics = this.metrics || {}, e.addEventListener("load", (function (r) { R(t, e) }), (0, N.jT)(!1)), h.lR || e.addEventListener("progress", (function (e) { t.lastSize = e.loaded }), (0, N.jT)(!1)) } function a(e) { this.params = { method: e[0] }, ve(this, e[1]), this.metrics = {} } function s(t, r) { var i = (0, V.o)(e); i.xpid && this.sameOrigin && r.setRequestHeader("X-NewRelic-ID", i.xpid); var o = n.generateTracePayload(this.parsedOrigin); if (o) { var a = !1; o.newrelicHeader && (r.setRequestHeader("newrelic", o.newrelicHeader), a = !0), o.traceContextParentHeader && (r.setRequestHeader("traceparent", o.traceContextParentHeader), o.traceContextStateHeader && r.setRequestHeader("tracestate", o.traceContextStateHeader), a = !0), a && (this.dt = o) } } function c(e, r) { var n = this.metrics, i = e[0], o = this; if (n && i) { var a = z(i); a && (n.txSize = a) } this.startTime = (0, I.t)(), this.body = i, this.listener = function (e) { try { "abort" !== e.type || o.loadCaptureCalled || (o.params.aborted = !0), ("load" !== e.type || o.called === o.totalCbs && (o.onloadCalled || "function" != typeof r.onload) && "function" == typeof o.end) && o.end(r) } catch (e) { try { t.emit("internal-error", [e]) } catch (e) { } } }; for (var s = 0; s < he; s++)r.addEventListener(fe[s], this.listener, (0, N.jT)(!1)) } function u(e, t, r) { this.cbTime += e, t ? this.onloadCalled = !0 : this.called += 1, this.called !== this.totalCbs || !this.onloadCalled && "function" == typeof r.onload || "function" != typeof this.end || this.end(r) } function d(e, t) { var r = "" + W(e) + !!t; this.xhrGuids && !this.xhrGuids[r] && (this.xhrGuids[r] = !0, this.totalCbs += 1) } function l(e, t) { var r = "" + W(e) + !!t; this.xhrGuids && this.xhrGuids[r] && (delete this.xhrGuids[r], this.totalCbs -= 1) } function f() { this.endTime = (0, I.t)() } function g(e, r) { r instanceof pe && "load" === e[0] && t.emit("xhr-load-added", [e[1], e[2]], r) } function p(e, r) { r instanceof pe && "load" === e[0] && t.emit("xhr-load-removed", [e[1], e[2]], r) } function m(e, t, r) { t instanceof pe && ("onload" === r && (this.onload = !0), ("load" === (e[0] && e[0].type) || this.onload) && (this.xhrCbStart = (0, I.t)())) } function v(e, r) { this.xhrCbStart && t.emit("xhr-cb-time", [(0, I.t)() - this.xhrCbStart, this.onload, r], r) } function b(e) { var t, r = e[1] || {}; if ("string" == typeof e[0] ? 0 === (t = e[0]).length && h.RI && (t = "" + h.gm.location.href) : e[0] && e[0].url ? t = e[0].url : h.gm?.URL && e[0] && e[0] instanceof URL ? t = e[0].href : "function" == typeof e[0].toString && (t = e[0].toString()), "string" == typeof t && 0 !== t.length) { t && (this.parsedOrigin = (0, ce.D)(t), this.sameOrigin = this.parsedOrigin.sameOrigin); var i = n.generateTracePayload(this.parsedOrigin); if (i && (i.newrelicHeader || i.traceContextParentHeader)) if (e[0] && e[0].headers) s(e[0].headers, i) && (this.dt = i); else { var o = {}; for (var a in r) o[a] = r[a]; o.headers = new Headers(r.headers || {}), s(o.headers, i) && (this.dt = i), e.length > 1 ? e[1] = o : e.push(o) } } function s(e, t) { var r = !1; return t.newrelicHeader && (e.set("newrelic", t.newrelicHeader), r = !0), t.traceContextParentHeader && (e.set("traceparent", t.traceContextParentHeader), t.traceContextStateHeader && e.set("tracestate", t.traceContextStateHeader), r = !0), r } } function y(e, t) { this.params = {}, this.metrics = {}, this.startTime = (0, I.t)(), this.dt = t, e.length >= 1 && (this.target = e[0]), e.length >= 2 && (this.opts = e[1]); var r, n = this.opts || {}, i = this.target; "string" == typeof i ? r = i : "object" == typeof i && i instanceof ge ? r = i.url : h.gm?.URL && "object" == typeof i && i instanceof URL && (r = i.href), ve(this, r); var o = ("" + (i && i instanceof ge && i.method || n.method || "GET")).toUpperCase(); this.params.method = o, this.body = n.body, this.txSize = z(n.body) || 0 } function w(e, t) { if (this.endTime = (0, I.t)(), this.params || (this.params = {}), (0, le.iW)(this.params)) return; let n; this.params.status = t ? t.status : 0, "string" == typeof this.rxSize && this.rxSize.length > 0 && (n = +this.rxSize); const i = { txSize: this.txSize, rxSize: n, duration: (0, I.t)() - this.startTime }; r("xhr", [this.params, i, this.startTime, this.endTime, "fetch"], this, o.K.ajax) } function x(e) { const t = this.params, n = this.metrics; if (!this.ended) { this.ended = !0; for (let t = 0; t < he; t++)e.removeEventListener(fe[t], this.listener, !1); t.aborted || (0, le.iW)(t) || (n.duration = (0, I.t)() - this.startTime, this.loadCazptureCalled || 4 !== e.readyState ? null == t.status && (t.status = 0) : R(this, e), n.cbTime = this.cbTime, r("xhr", [t, n, this.startTime, this.endTime, "xhr"], this, o.K.ajax)) } } function R(e, r) { e.params.status = r.status; var n = function (e, t) { var r = e.responseType; return "json" === r && null !== t ? t : "arraybuffer" === r || "blob" === r || "json" === r ? z(e.response) : "text" === r || "" === r || void 0 === r ? z(e.responseText) : void 0 }(r, e.lastSize); if (n && (e.metrics.rxSize = n), e.sameOrigin) { var i = r.getResponseHeader("X-NewRelic-App-Data"); i && ((0, E.p)(j.rs, ["Ajax/CrossApplicationTracing/Header/Seen"], void 0, o.K.metrics, t), e.params.cat = i.split(", ").pop()) } e.loadCaptureCalled = !0 } t.on("new-xhr", i), t.on("open-xhr-start", a), t.on("open-xhr-end", s), t.on("send-xhr-start", c), t.on("xhr-cb-time", u), t.on("xhr-load-added", d), t.on("xhr-load-removed", l), t.on("xhr-resolved", f), t.on("addEventListener-end", g), t.on("removeEventListener-end", p), t.on("fn-end", v), t.on("fetch-before-start", b), t.on("fetch-start", y), t.on("fn-start", m), t.on("fetch-done", w) }(e, this.ee, this.handler, this.dt), this.importAggregator() } } function ve(e, t) { var r = (0, ce.D)(t), n = e.params || e; n.hostname = r.hostname, n.port = r.port, n.protocol = r.protocol, n.host = r.hostname + ":" + r.port, n.pathname = r.pathname, e.parsedOrigin = r, e.sameOrigin = r.sameOrigin } const be = {}, ye = ["pushState", "replaceState"]; function we(e) { const t = function (e) { return (e || Z.ee).get("history") }(e); return !h.RI || be[t.debugId]++ || (be[t.debugId] = 1, (0, Y.YM)(t).inPlace(window.history, ye, "-")), t } var xe = i(3738); const { He: Re, bD: Te, d3: Ae, Kp: Ee, TZ: Se, Lc: Ne, uP: Oe, Rz: Ie } = xe; class _e extends v { static featureName = Se; constructor(e, t, r = !0) { super(e, t, Se, r); if (!(0, p.V)(this.agentIdentifier)) return void (0, d.x3)(this.agentIdentifier, this.featureName); const n = this.ee; let i; we(n), this.eventsEE = (0, q.u)(n), this.eventsEE.on(Oe, (function (e, t) { this.bstStart = (0, I.t)() })), this.eventsEE.on(Ne, (function (e, t) { (0, E.p)("bst", [e[0], t, this.bstStart, (0, I.t)()], void 0, o.K.sessionTrace, n) })), n.on(Ie + Ae, (function (e) { this.time = (0, I.t)(), this.startPath = location.pathname + location.hash })), n.on(Ie + Ee, (function (e) { (0, E.p)("bstHist", [location.pathname + location.hash, this.startPath, this.time], void 0, o.K.sessionTrace, n) })); try { i = new PerformanceObserver((e => { const t = e.getEntries(); (0, E.p)(Re, [t], void 0, o.K.sessionTrace, n) })), i.observe({ type: Te, buffered: !0 }) } catch (e) { } this.importAggregator({ resourceObserver: i }) } } var je = i(2614); class Pe extends v { static featureName = t.TZ; #i; constructor(e, r, n = !0) { let i; super(e, r, t.TZ, n), this.replayRunning = !1; try { i = JSON.parse(localStorage.getItem("".concat(je.H3, "_").concat(je.uh))) } catch (e) { } (0, g.SR)(e) && this.ee.on(t.G4.RECORD, (() => this.#o())), this.#a(i) ? (this.#i = i?.sessionReplayMode, this.#s()) : this.importAggregator(), this.ee.on("err", (e => { this.replayRunning && (this.errorNoticed = !0, (0, E.p)(t.G4.ERROR_DURING_REPLAY, [e], void 0, this.featureName, this.ee)) })), this.ee.on(t.G4.REPLAY_RUNNING, (e => { this.replayRunning = e })) } #a(e) { return e && (e.sessionReplayMode === je.g.FULL || e.sessionReplayMode === je.g.ERROR) || (0, g.Aw)(this.agentIdentifier) } #c = !1; async#s(e) { if (!this.#c) { this.#c = !0; try { const { Recorder: t } = await Promise.all([i.e(478), i.e(249)]).then(i.bind(i, 2496)); this.recorder ??= new t({ mode: this.#i, agentIdentifier: this.agentIdentifier, trigger: e, ee: this.ee }), this.recorder.startRecording(), this.abortHandler = this.recorder.stopRecording } catch (e) { } this.importAggregator({ recorder: this.recorder, errorNoticed: this.errorNoticed }) } } #o() { this.featAggregate ? this.featAggregate.mode !== je.g.FULL && this.featAggregate.initializeRecording(je.g.FULL, !0) : (this.#i = je.g.FULL, this.#s(t.Qb.API), this.recorder && this.recorder.parent.mode !== je.g.FULL && (this.recorder.parent.mode = je.g.FULL, this.recorder.stopRecording(), this.recorder.startRecording(), this.abortHandler = this.recorder.stopRecording)) } } var Ce = i(3962); class ke extends v { static featureName = Ce.TZ; constructor(e, t, r = !0) { if (super(e, t, Ce.TZ, r), !h.RI || !(0, A.dV)().o.MO) return; const n = we(this.ee), i = (0, q.u)(this.ee), o = () => (0, E.p)("newURL", [(0, I.t)(), "" + window.location], void 0, this.featureName, this.ee); n.on("pushState-end", o), n.on("replaceState-end", o); try { this.removeOnAbort = new AbortController } catch (e) { } (0, N.sp)("popstate", (e => (0, E.p)("newURL", [e.timeStamp, "" + window.location], void 0, this.featureName, this.ee)), !0, this.removeOnAbort?.signal); let a = !1; const s = new ((0, A.dV)().o.MO)(((e, t) => { a || (a = !0, requestAnimationFrame((() => { (0, E.p)("newDom", [(0, I.t)()], void 0, this.featureName, this.ee), a = !1 }))) })), c = (0, m.s)((e => { (0, E.p)("newUIEvent", [e], void 0, this.featureName, this.ee), s.observe(document.body, { attributes: !0, childList: !0, subtree: !0, characterData: !0 }) }), 100, { leading: !0 }); i.on("fn-start", (([e]) => { Ce.tC.includes(e?.type) && c(e) })); for (let e of Ce.tC) document.addEventListener(e, (() => { })); this.abortHandler = function () { this.removeOnAbort?.abort(), s.disconnect(), this.abortHandler = void 0 }, this.importAggregator({ domObserver: s }) } } var Le = i(7378); const De = {}, He = ["appendChild", "insertBefore", "replaceChild"]; function Me(e) { const t = function (e) { return (e || Z.ee).get("jsonp") }(e); if (!h.RI || De[t.debugId]) return t; De[t.debugId] = !0; var r = (0, Y.YM)(t), n = /[?&](?:callback|cb)=([^&#]+)/, i = /(.*)\.([^.]+)/, o = /^(\w+)(\.|$)(.*)$/; function a(e, t) { if (!e) return t; const r = e.match(o), n = r[1]; return a(r[3], t[n]) } return r.inPlace(Node.prototype, He, "dom-"), t.on("dom-start", (function (e) { !function (e) { if (!e || "string" != typeof e.nodeName || "script" !== e.nodeName.toLowerCase()) return; if ("function" != typeof e.addEventListener) return; var o = (s = e.src, c = s.match(n), c ? c[1] : null); var s, c; if (!o) return; var u = function (e) { var t = e.match(i); if (t && t.length >= 3) return { key: t[2], parent: a(t[1], window) }; return { key: e, parent: window } }(o); if ("function" != typeof u.parent[u.key]) return; var d = {}; function l() { t.emit("jsonp-end", [], d), e.removeEventListener("load", l, (0, N.jT)(!1)), e.removeEventListener("error", f, (0, N.jT)(!1)) } function f() { t.emit("jsonp-error", [], d), t.emit("jsonp-end", [], d), e.removeEventListener("load", l, (0, N.jT)(!1)), e.removeEventListener("error", f, (0, N.jT)(!1)) } r.inPlace(u.parent, [u.key], "cb-", d), e.addEventListener("load", l, (0, N.jT)(!1)), e.addEventListener("error", f, (0, N.jT)(!1)), t.emit("new-jsonp", [e.src], d) }(e[0]) })), t } const Ke = {}; function Ue(e) { const t = function (e) { return (e || Z.ee).get("promise") }(e); if (Ke[t.debugId]) return t; Ke[t.debugId] = !0; var r = t.context, n = (0, Y.YM)(t), i = h.gm.Promise; return i && function () { function e(r) { var o = t.context(), a = n(r, "executor-", o, null, !1); const s = Reflect.construct(i, [a], e); return t.context(s).getCtx = function () { return o }, s } h.gm.Promise = e, Object.defineProperty(e, "name", { value: "Promise" }), e.toString = function () { return i.toString() }, Object.setPrototypeOf(e, i), ["all", "race"].forEach((function (r) { const n = i[r]; e[r] = function (e) { let i = !1;[...e || []].forEach((e => { this.resolve(e).then(a("all" === r), a(!1)) })); const o = n.apply(this, arguments); return o; function a(e) { return function () { t.emit("propagate", [null, !i], o, !1, !1), i = i || !e } } } })), ["resolve", "reject"].forEach((function (r) { const n = i[r]; e[r] = function (e) { const r = n.apply(this, arguments); return e !== r && t.emit("propagate", [e, !0], r, !1, !1), r } })), e.prototype = i.prototype; const o = i.prototype.then; i.prototype.then = function (...e) { var i = this, a = r(i); a.promise = i, e[0] = n(e[0], "cb-", a, null, !1), e[1] = n(e[1], "cb-", a, null, !1); const s = o.apply(this, e); return a.nextPromise = s, t.emit("propagate", [i, !0], s, !1, !1), s }, i.prototype.then[Y.Jt] = o, t.on("executor-start", (function (e) { e[0] = n(e[0], "resolve-", this, null, !1), e[1] = n(e[1], "resolve-", this, null, !1) })), t.on("executor-err", (function (e, t, r) { e[1](r) })), t.on("cb-end", (function (e, r, n) { t.emit("propagate", [n, !0], this.nextPromise, !1, !1) })), t.on("propagate", (function (e, r, n) { this.getCtx && !r || (this.getCtx = function () { if (e instanceof Promise) var r = t.context(e); return r && r.getCtx ? r.getCtx() : this }) })) }(), t } const Ve = {}, Ge = "setTimeout", Be = "setInterval", Fe = "clearTimeout", We = "-start", ze = [Ge, "setImmediate", Be, Fe, "clearImmediate"]; function qe(e) { const t = function (e) { return (e || Z.ee).get("timer") }(e); if (Ve[t.debugId]++) return t; Ve[t.debugId] = 1; var r = (0, Y.YM)(t); return r.inPlace(h.gm, ze.slice(0, 2), Ge + "-"), r.inPlace(h.gm, ze.slice(2, 3), Be + "-"), r.inPlace(h.gm, ze.slice(3), Fe + "-"), t.on(Be + We, (function (e, t, n) { e[0] = r(e[0], "fn-", null, n) })), t.on(Ge + We, (function (e, t, n) { this.method = n, this.timerDuration = isNaN(e[1]) ? 0 : +e[1], e[0] = r(e[0], "fn-", this, n) })), t } const Ze = {}; function Ye(e) { const t = function (e) { return (e || Z.ee).get("mutation") }(e); if (!h.RI || Ze[t.debugId]) return t; Ze[t.debugId] = !0; var r = (0, Y.YM)(t), n = h.gm.MutationObserver; return n && (window.MutationObserver = function (e) { return this instanceof n ? new n(r(e, "fn-")) : n.apply(this, arguments) }, MutationObserver.prototype = n.prototype), t } const { TZ: Xe, d3: Je, Kp: Qe, $p: $e, wW: et, e5: tt, tH: rt, uP: nt, rw: it, Lc: ot } = Le; class at extends v { static featureName = Xe; constructor(e, t, r = !0) { if (super(e, t, Xe, r), !h.RI) return; try { this.removeOnAbort = new AbortController } catch (e) { } let n, i = 0; const o = this.ee.get("tracer"), a = Me(this.ee), s = Ue(this.ee), c = qe(this.ee), u = Q(this.ee), d = this.ee.get("events"), l = se(this.ee), f = we(this.ee), g = Ye(this.ee); function p(e, t) { f.emit("newURL", ["" + window.location, t]) } function m() { i++, n = window.location.hash, this[nt] = (0, I.t)() } function v() { i--, window.location.hash !== n && p(0, !0); var e = (0, I.t)(); this[tt] = ~~this[tt] + e - this[nt], this[ot] = e } function b(e, t) { e.on(t, (function () { this[t] = (0, I.t)() })) } this.ee.on(nt, m), s.on(it, m), a.on(it, m), this.ee.on(ot, v), s.on(et, v), a.on(et, v), this.ee.on("fn-err", ((...t) => { t[2]?.__newrelic?.[e] || (0, E.p)("function-err", [...t], void 0, this.featureName, this.ee) })), this.ee.buffer([nt, ot, "xhr-resolved"], this.featureName), d.buffer([nt], this.featureName), c.buffer(["setTimeout" + Qe, "clearTimeout" + Je, nt], this.featureName), u.buffer([nt, "new-xhr", "send-xhr" + Je], this.featureName), l.buffer([rt + Je, rt + "-done", rt + $e + Je, rt + $e + Qe], this.featureName), f.buffer(["newURL"], this.featureName), g.buffer([nt], this.featureName), s.buffer(["propagate", it, et, "executor-err", "resolve" + Je], this.featureName), o.buffer([nt, "no-" + nt], this.featureName), a.buffer(["new-jsonp", "cb-start", "jsonp-error", "jsonp-end"], this.featureName), b(l, rt + Je), b(l, rt + "-done"), b(a, "new-jsonp"), b(a, "jsonp-end"), b(a, "cb-start"), f.on("pushState-end", p), f.on("replaceState-end", p), window.addEventListener("hashchange", p, (0, N.jT)(!0, this.removeOnAbort?.signal)), window.addEventListener("load", p, (0, N.jT)(!0, this.removeOnAbort?.signal)), window.addEventListener("popstate", (function () { p(0, i > 1) }), (0, N.jT)(!0, this.removeOnAbort?.signal)), this.abortHandler = this.#n, this.importAggregator() } #n() { this.removeOnAbort?.abort(), this.abortHandler = void 0 } } var st = i(3333); class ct extends v { static featureName = st.TZ; constructor(e, t, r = !0) { super(e, t, st.TZ, r); const n = (0, a.D0)(this.agentIdentifier), i = [n.page_action.enabled, n.user_actions.enabled]; h.RI && n.user_actions.enabled && (st.Zp.forEach((e => (0, N.sp)(e, (e => (0, E.p)("ua", [e], void 0, this.featureName, this.ee)), !0))), st.qN.forEach((e => (0, N.sp)(e, (e => (0, E.p)("ua", [e], void 0, this.featureName, this.ee)))))), i.some((e => e)) ? this.importAggregator() : (0, d.x3)(this.agentIdentifier, this.featureName) } } var ut = i(993), dt = i(3785); class lt extends v { static featureName = ut.TZ; constructor(e, t, r = !0) { super(e, t, ut.TZ, r); const n = this.ee; this.ee.on("wrap-logger-end", (function ([e]) { const { level: t, customAttributes: r } = this; (0, dt.R)(n, e, r, t) })), this.importAggregator() } } new class extends n { constructor(t, r) { super(r), h.gm ? (this.sharedAggregator = new x({ agentIdentifier: this.agentIdentifier }), this.features = {}, (0, A.bQ)(this.agentIdentifier, this), this.desiredFeatures = new Set(t.features || []), this.desiredFeatures.add(y), this.runSoftNavOverSpa = [...this.desiredFeatures].some((e => e.featureName === o.K.softNav)), (0, u.j)(this, t, t.loaderType || "agent"), this.run()) : (0, e.R)(21) } get config() { return { info: this.info, init: this.init, loader_config: this.loader_config, runtime: this.runtime } } run() { try { const t = c(this.agentIdentifier), r = [...this.desiredFeatures]; r.sort(((e, t) => o.P[e.featureName] - o.P[t.featureName])), r.forEach((r => { if (!t[r.featureName] && r.featureName !== o.K.pageViewEvent) return; if (this.runSoftNavOverSpa && r.featureName === o.K.spa) return; if (!this.runSoftNavOverSpa && r.featureName === o.K.softNav) return; const n = function (e) { switch (e) { case o.K.ajax: return [o.K.jserrors]; case o.K.sessionTrace: return [o.K.ajax, o.K.pageViewEvent]; case o.K.sessionReplay: return [o.K.sessionTrace]; case o.K.pageViewTiming: return [o.K.pageViewEvent]; default: return [] } }(r.featureName).filter((e => !(e in this.features))); n.length > 0 && (0, e.R)(36, { targetFeature: r.featureName, missingDependencies: n }), this.features[r.featureName] = new r(this.agentIdentifier, this.sharedAggregator) })) } catch (t) { (0, e.R)(22, t); for (const e in this.features) this.features[e].abortHandler?.(); const r = (0, A.Zm)(); delete r.initializedAgents[this.agentIdentifier]?.api, delete r.initializedAgents[this.agentIdentifier]?.features, delete this.sharedAggregator; return r.ee.get(this.agentIdentifier).abort(), !1 } } }({ features: [me, y, _, _e, Pe, P, U, ct, lt, ke, at], loaderType: "spa" }) })() })();</script>
            <link rel=stylesheet href="css/V0002199/style.css" type="text/css" media=screen>
        
        
        
        
            <div id="header2" style="z-index:99;">
        
                <div id="top-utilities" class="container" style="z-index:98;">
        
                    <div id="logo">
                        <a href="/" class="linkOnce"><img src="/images/logo_skynova.svg" alt="skynova"></a>
                    </div>
        
                    <ul id="utilities" class="hover-menu" style="z-index:5;">
                        <li class="hover-menu-text"><b>mptomani@gmail.com</b></li>
                        <li class="hover-menu-border-right"></li>
        
                        <li class="hover-menu-parent"><a class="aynax-link hover-menu-util ">Help</a>
        
                            <ul class="hover-menu-dropdown">
        
                                <li><a class="hover-menu-item linkOnce" href="/app/faq">F.A.Q.</a></li>
                                <li><a class="hover-menu-item linkOnce" href="/app/support">Contact Support</a></li>
        
                            </ul>
                        </li>
                        <li class="hover-menu-border-right"></li>
        
                        <li class="hover-menu-parent"><a id="menuSettings" class="aynax-link hover-menu-util ">Settings</a>
                            <ul class="hover-menu-dropdown">
        
                                <li><a id="menuMyProfile" class="hover-menu-item linkOnce" href="/app/profile">My Profile</a>
                                </li>
                                <li><a class="hover-menu-item linkOnce" href="/manageEmployees.php">Manage Employees</a></li>
                                <li><a class="hover-menu-item linkOnce" href="/app/changeLoginEmail">Change E-mail Address</a>
                                </li>
                                <li><a class="hover-menu-item linkOnce" href="/app/changeLoginPassword">Change Password</a></li>
                                <li><a class="hover-menu-item linkOnce" href="/app/onlinePayment">Online Payment</a></li>
                                <li><a id="menuCloseAccount" class="hover-menu-item linkOnce" href="/app/cancel">Close
                                        Account</a></li>
                            </ul>
                        </li>
                        <li class="hover-menu-border-right"></li>
                        <li class="hover-menu-top"><a id="menuLogout" class="aynax-link hover-menu-util" href="#"
                                onclick="if (typeof SnapEngage != 'undefined') {SnapEngage.clearAllCookies()}; document.location='/app/logout';">Log
                                out</a></li>
        
        
        
                    </ul>
        
                </div>
                <div id="no-js-message" class="alert alert-danger">
                    <strong>JavaScript is disabled in your browser! </strong> This site will not work without javascript.
                    <br /> To enable javascript follow the instructions here: <a href="https://www.enable-javascript.com"
                        target="__blank">enable-javascript.com</a>
                </div>
                <div id="top-menu">
                    <div class="container rel" style="z-index:97;">
                        <ul class="hover-menu">
        
                            <li class="hover-menu-parent top-menu-item-active">
        
                                <a class="hover-menu-topmenu" id="tmsli">Sales</a>
                                <ul class="hover-menu-dropdown">
        
                                    <li><b>Invoices</b></li>
                                    <li><a class="hover-menu-item linkOnce" href="/newInvoice.php">New Invoice</a></li>
                                    <li><a class="hover-menu-item linkOnce" href="/showInvoices.php">List of Invoices</a></li>
                                    <li><a class="hover-menu-item linkOnce" href="/showItems.php">Items</a></li>
                                    <li><a class="hover-menu-item linkOnce" href="/showPayments.php">List of Payments</a></li>
        
                                    <li><b>Customers</b></li>
                                    <li><a class="hover-menu-item linkOnce" href="/newCustomer.php">New Customer</a></li>
                                    <li><a class="hover-menu-item linkOnce" href="/showCustomersInfo.php">List of Customers</a>
                                    </li>
                                    <li><b>Other</b></li>
                                    <li><a class="hover-menu-item linkOnce" href="/showQuotes.php">Quotes</a></li>
                                    <li><a class="hover-menu-item linkOnce" href="/showEstimates.php">Estimates</a></li>
                                    <li><a class="hover-menu-item linkOnce" href="/showCreditNotes.php">Credit Notes</a></li>
                                    <li><a class="hover-menu-item linkOnce" href="/showAdvancePayments.php">Deposit Requests</a>
                                    </li>
                                    <li><a class="hover-menu-item linkOnce" href="/showBusinessProposals.php">Business
                                            Proposals</a></li>
        
                                </ul>
                            </li>
        
        
        
        
                            <li class="hover-menu-parent "><a id="menuExpenses" class="hover-menu-topmenu"
                                    id="tmpli">Expenses</a>
        
                                <ul class="hover-menu-dropdown" style="width:220px">
                                    <li><b>Expenses</b></li>
        
        
                                    <li><a class="hover-menu-item linkOnce" href="/expense.php">New Expense</a></li>
        
        
                                    <li><a id="listOfExpenses" class="hover-menu-item linkOnce" href="/listExpenses.php">List of
                                            Expenses</a></li>
                                    <li><a id="listOfReceipts" class="hover-menu-item linkOnce" href="/listReceipts.php">List of
                                            Receipts</a></li>
                                    <li><a id="listOfPayments" class="hover-menu-item linkOnce" href="/listPaymentsOut.php">List
                                            of Payments</a></li>
        
                                    <li><b>Vendors</b></li>
                                    <li><a class="hover-menu-item linkOnce" href="/newVendor.php">New Vendor</a></li>
                                    <li><a class="hover-menu-item linkOnce" href="/listVendors.php">List of Vendors</a></li>
        
                                </ul>
        
                            </li>
        
                            <li class="hover-menu-parent "><a class="hover-menu-topmenu">Timesheets</a>
                                <ul class="hover-menu-dropdown">
                                    <li><b>My Hours</b></li>
        
                                    <li><a class="hover-menu-item linkOnce" href="/logHours.php?rf=l&new=true">Log Hours</a>
                                    </li>
                                    <li><a class="hover-menu-item linkOnce" href="/myTimesheets.php">My Timesheets</a></li>
                                    <li><a class="hover-menu-item linkOnce" href="/myHoursBreakdown.php">My Hours</a></li>
        
        
                                    <li><b>Manage Team</b></li>
        
        
                                    <li><a class="hover-menu-item linkOnce" href="/employeeTimesheets.php">Employee
                                            Timesheets</a></li>
                                    <li><a class="hover-menu-item linkOnce" href="/employeeAttendance.php">Employee
                                            Attendance</a></li>
                                    <li><a class="hover-menu-item linkOnce" href="/employeeHoursBreakdown.php">List of Hours</a>
                                    </li>
        
        
                                    <li><a id="menuManageEmployee" class="hover-menu-item linkOnce" href="/employee.php ">Add a
                                            Team Member</a></li>
        
                                    <li><b>Projects</b></li>
                                    <li><a class="hover-menu-item linkOnce" href="/listProjects.php">List of Projects</a></li>
                                    <li><a class="hover-menu-item linkOnce"
                                            href="/listProjects.php?c=project&p=1&d=up&n=&g=new">Invoice Project</a></li>
                                    <li><b>Preferences</b></li>
                                    <li><a class="hover-menu-item linkOnce" href="/timesheetPreferences.php">Timesheet
                                            Preferences</a></li>
        
        
                                </ul>
                            </li>
        
        
                            <li class="hover-menu-parent "><a class="hover-menu-topmenu" id="tmali">Accounting</a>
                                <ul class="hover-menu-dropdown">
        
        
                                    <li><b>Accounting</b></li>
                                    <li><a id="chartOfAccounts" class="hover-menu-item linkOnce" href="/listAccounts.php">Chart
                                            of Accounts</a></li>
                                    <li><a id="listOfJournalEntries" class="hover-menu-item linkOnce"
                                            href="/listJournalPages.php">List of Journal Entries</a></li>
                                    <li><a id="listOfTransactions" class="hover-menu-item linkOnce"
                                            href="/listTransactions.php">List of Transactions</a></li>
                                    <li><a id="generalLedger" class="hover-menu-item linkOnce" href="/generalLedger.php">General
                                            Ledger</a></li>
                                    <li><b>Sales Tax</b></li>
                                    <li><a id="listOfSalesTaxes" class="hover-menu-item linkOnce" href="/listSalesTax.php">List
                                            of Sales Taxes</a></li>
                                    <li><a id="salesTaxOwed" class="hover-menu-item linkOnce" href="/listTaxOwed.php">Sales Tax
                                            Owed</a></li>
                                    <li><a id="salesTaxPayments" class="hover-menu-item linkOnce"
                                            href="/listTaxPayments.php">Sales Tax Payments</a></li>
        
        
                                    <li><b>Reports</b></li>
                                    <li><a id="incomeStatement" class="hover-menu-item linkOnce" href="/incomeStatement.php">
                                            Income Statement</a></li>
                                    <li><a id="balanceSheet" class="hover-menu-item linkOnce" href="/balanceSheet.php">Balance
                                            Sheet</a></li>
                                    <li><a id="cashFlowStatement" class="hover-menu-item linkOnce"
                                            href="/cashFlowStatement.php">Cash Flow Statement</a></li>
        
        
        
        
        
                                </ul>
                            </li>
        
        
        
        
                        </ul>
        
        
                    </div>
                </div>
        
            </div><!--end header-->
        
        
        
            <style>
                .noclick {
                    pointer-events: none;
                }
            </style>
            <script>
                $('.linkOnce').click(function (e) {
                    //stop link behavior
                    e.preventDefault();

                    //go to the url
                    var elem = $(this);
                    var href = elem.attr('href');
                    location.replace(href);

                    //use css to disable pointer-events for 6000ms, in case connection is slow
                    elem.addClass('noclick');
                    setTimeout(function () {
                        elem.removeClass('noclick');
                    }, 6000);
                });
            </script>
        
            <style>
                #tablePaginatorFirstPage,
                #tablePaginatorPreviousPage,
                #tablePaginatorCurrentPage,
                #tablePaginatorNextPage,
                #tablePaginatorLastPage,
                #tablePaginatorAllPages {
                    line-height: normal !important;
                    padding: 3px 6px !important;
                    width: unset !important;
                }
        
                #innerSendForm * {
                    box-sizing: content-box !important;
                    line-height: normal;
                }
        
                #invoiceFormWrapper * {
                    box-sizing: content-box !important;
                }
        
                #divWithInfoMessage td {
                    padding: 4px !important;
                }
        
                .divWithFilter input {
                    box-sizing: content-box !important;
                }
        
                #div2 {
                    margin-left: -250px;
                    left: 50% !important;
                }
        
                #recordPayment_date {
                    box-sizing: content-box !important;
                }
        
                tr.recordPayment_paymentHistoryTR>td {
                    padding-top: 5px !important;
                    padding-bottom: 5px !important;
                }
        
                tr.recordPayment_paymentHistoryTR>td img {
                    margin-top: 3px !important;
                }
        
                .btn {
                    padding: 0 16px !important;
                    line-height: 30px !important;
                }
        
                .btn.btn-lg {
                    padding: 2px 19px !important;
                    box-shadow: none !important;
                    border: 0.9px solid #aaa !important;
                    line-height: 30px !important;
                }
        
                th.table-dropdown .btn,
                td.table-dropdown .btn {
                    height: 19px !important;
                    line-height: 19px !important;
                    padding: 0 !important;
                }
        
                #top-menu .dropdown-item:hover,
                #top-menu .dropdown-item:active,
                #utilities .dropdown-item:hover,
                #utilities .dropdown-item:active {
                    box-shadow: none;
                    border: none;
                    text-decoration: none;
                    background-color: #54a0e7;
                    color: #fff;
                }
        
                #no-js-message {
                    display: none;
                    font-size: 13px;
                    line-height: 19px;
                    font-weight: normal !important;
                    text-align: center;
                    max-width: 800px;
                    margin: 1em auto;
                    background-color: #fffadc !important;
                    border: 2px solid #fcf5cd !important;
                    padding: 8px 40px;
                }
        
                .alert-danger,
                .bg-danger {
                    background: #FFFADC url('../../images/red_error_25.gif') 6px 6px no-repeat !important;
                }
        
                .alert-danger:before {
                    content: none !important;
                }
        
                /* hack to avoid having the icon in v3 overlaping the icon in v2 */
            </style>
            <noscript>
                <style>
                    #no-js-message {
                        display: block;
                    }
                </style>
            </noscript>
        
        
            <div id="header">
        
                <div id="top-utilities" class="container">
        
                    <div class="logo">
                        <a href="/"><img src="/images/logo_skynova.svg" alt="skynova"></a>
                    </div>
        
                    <ul id="utilities" class="menu" style="z-index:5;">
        
                        <li class="menu-text"><b>mptomani@gmail.com</b></li>
                        <li class="menu-border-right"></li>
        
                        <li class="menu-item ">
        
                            <a class="menu-header">Help</a>
                            <ul class="menu-dropdown">
                                <li><a class="dropdown-item" href="/app/faq">F.A.Q.</a></li>
        
        
                                <li><a class="dropdown-item" href="/app/support">Contact Support</a></li>
                            </ul>
        
                        </li>
        
                        <li class="menu-border-right"></li>
        
                        <li class="menu-item ">
        
                            <a class="menu-header">Settings</a>
                            <ul class="menu-dropdown">
        
                                <li><a class="dropdown-item" href="/app/profile">My Profile</a></li>
                                <li><a class="dropdown-item" href="/app/changeLoginEmail">Change E-mail Address</a></li>
                                <li><a class="dropdown-item" href="/app/changeLoginPassword">Change Password</a></li>
                                <li><a class="dropdown-item" href="/app/onlinePayment">Online Payment</a></li>
                                <li><a class="dropdown-item" href="/app/cancel">Close Account</a></li>
                            </ul>
        
                        </li>
        
        
        
                        <li class="menu-border-right"></li>
                        <li class="menu-item">
                            <a id="menuLogout" class="menu-header" href="/app/logout">Log out</a>
                        </li>
        
        
                    </ul>
        
        
                </div>
        
                <div id="no-js-message" class="alert alert-danger">
                    <strong>JavaScript is disabled in your browser! </strong> This site will not work without javascript.
                    <br /> To enable javascript follow the instructions here: <a href="https://www.enable-javascript.com"
                        target="__blank">enable-javascript.com</a>
                </div>
                <div id="top-menu">
        
                    <div class="container">
        
                        <ul class="menu">
        
                            <li class="menu-item top-menu-item-active">
        
                                <a class="menu-header" href="/app/home">Home</a>
        
                            </li>
        
        
        
        
        
        
        
        
        
        
        
                            <li class="menu-item active">
                                <a class="menu-header" href="#">Invoices</a>
                                <ul class="menu-dropdown">
        
        
                                    <li><a class="dropdown-item" href="/newInvoice.php">New Invoice</a></li>
                                    <li><a class="dropdown-item" href="/showInvoices.php">List of Invoices</a></li>
                                    <li><a class="dropdown-item" href="/showPayments.php">List of Payments</a></li>
        
        
                                </ul>
                            </li>
        
        
                            <li class="menu-item ">
                                <a class="menu-header" href="#">Reports</a>
                                <ul class="menu-dropdown">
                                    <li><a class="dropdown-item" href="/incomeStatement.php">Income Statement</a></li>
                                    <li><a class="dropdown-item" href="/balanceSheet.php">Balance Sheet</a></li>
                                    <li><a class="dropdown-item" href="/cashFlowStatement.php">Cash Flow Statement</a></li>
                                    <li><a class="dropdown-item" href="/listTaxOwed.php">Sales Tax Owed</a></li>
                                </ul>
                            </li>
        
        
        
        
        
        
        
                        </ul>
                    </div>
                </div>
            </div><!--end header-->
        
        
        
        
        
            <div class="page--margin">
                <div id="MessageContent" style="display: none; padding-bottom: 0px;">
                    <table border=0 cellpadding=0 cellspacing=0 style="width:100%;margin-bottom:20px;">
                        <tr>
                            <td colspan=2 style="padding-top:3px;">
                                <div id="divWithInfoMessage">
                                    <table cellpadding=0 cellspacing=0
                                        style="width:100%;margin:0px; margin-top:0px; margin-bottom:10px;background-color:#FFFADC;border-top:2px solid #FCF5CD; border-bottom:2px solid #FCF5CD;padding:5px;padding-left:12px;padding-top:10px;">
                                        <tr>
                                            <td valign="top">
                                                <img style="margin:0px;padding:0px;" src="images/blue-information-25.gif">
                                            </td>
                                            <td style="padding-left:10px;">
                                                <span onclick="document.getElementById('MessageContent').style.display='none';"
                                                    title="Remove Message"
                                                    style="float:right;margin-top:-7px;font-size:10px;font-family:arial;color:#808080; font-weight:bold;cursor:pointer;">[x]</span>
                                                <font style="font-size:13px;font-family:verdana;color:#3c3c3c;">
                                                    <p
                                                        style="margin-top: 3px;font-weight:bold;font-family:verdana;font-size:13px;">
                                                        Headers and footers on your print-outs</p>
                                                    <p style="font-family:verdana;">
                                                        The headers and footers on your print-outs are placed there by your
                                                        internet browser.
                                                    </p>
                                                    <p style="font-family:verdana;">
                                                        There are two ways to avoid this:<br />
                                                        1) Print a PDF-version (it is always clean).<br />
                                                        2) Remove the header and footer from your browser settings. Heres
                                                        how:<br />
                                                        - In the print dialog, click on <b>More Settings</b> or <b>Show
                                                            details</b> to expand the options.<br />
                                                        - Uncheck "<b>Headers and footers</b>" or <b>Print headers and
                                                            footers.</b>"
                                                    </p>
        
                                                    <script type="text/javascript">
                                                        $('#print_message_check').live('click', function (event) {
                                                            if ($('#print_message_check').is(':checked')) {
                                                                $.ajax({
                                                                    type: "GET",
                                                                    url: "turnPrintMessageOff.inc.php",
                                                                    data: "act=ajax_request&function_name=printMessageOff",
                                                                    success: function (msg) {
                                                                        document.getElementById('MessageContent').innerHTML = '';
                                                                    }
                                                                });
                                                            }
                                                        });
                                                    </script>
                                                    <div style="width: 100%;padding-top:5px;">
                                                        <table align="center" cellpadding="0" cellspacing="0"
                                                            class="pricingTable" style="border: none;" width="100%">
                                                            <tr>
                                                                <td align="left" style="border:none;width:5px;">
                                                                    <input name="dont_show_print_popup" type="checkbox"
                                                                        id="print_message_check" value="1">
                                                                </td>
                                                                <td style="border:none;width:500px;">
                                                                    <i>Never show this message again</i>
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    </div>
        
                                                </font>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </td>
                        </tr>
                    </table>
        
                </div>
        
        
        
        
        
                <table cellpadding=0 cellspacing=0 border=0
                    style="width:100%; margin:0px;padding:0px;margin:0 auto;margin-bottom:5px;">
                    <tr>
                        <td style="text-align:left;padding-top:15px;">
                            <h1
                                style="font-size:20px;font-weight:bold;font-family:verdana;color:#3c3c3c;margin:0px; padding:0px;">
                                New Invoice (0000019:Draft)
                            </h1>
                        </td>
                    </tr>
                </table>
        
        
        
                <table cellpadding=0 cellspacing=0 border=0 style="width:100%; margin-left:0px;margin-bottom:20px;">
                    <tr>
        
                        <td style="text-align:left;padding-top:0px;">
        
        
        
        
                            <span class="toggleFilterLink" id="showCustomization" onclick="showOrHideCustomizationLink('show');"
                                style="width:115px;">Show Customization Options</span>
        
        
                            <span class="toggleFilterLink" id="hideCustomization" onclick="showOrHideCustomizationLink('hide');"
                                style="display:none;width:115px;">Hide Customization Options</span>
        
        
        
                        </td>
        
                    </tr>
        
                </table>
        
        
        
        
                <div class="divWithCustomization" style="display:none;" id="divWithCustomization">
        
                    <table border=0 cellspacing=0 cellpadding=0 style="padding-left:30px;padding-right:10px;padding-top:0px;">
        
                        <tr>
        
                            <td style="height:15px;"></td>
        
                        </tr>
        
        
        
        
                        <tr>
        
                            <td style="vertical-align:top;">
        
                                <table border=0 cellpadding=0 cellspacing=0
                                    style="font-family:verdana;font-size:12px;color:#3c3c3c;">
        
                                    <tr>
                                        <td colspan=2 style="padding-bottom:8px;"></td>
                                    </tr>
        
                                    <tr>
                                        <td style="width:30px;"><input onclick="customization_toggleFields(this)"
                                                type="checkbox" name="customization_logo" id="customization_logo"></td>
                                        <td style="width:150px;">Logo</td>
                                    </tr>
                                    <tr>
                                        <td style="width:30px;padding-top:5px"><input onclick="customization_toggleFields(this)"
                                                type="checkbox" name="customization_poNumber" id="customization_poNumber"></td>
                                        <td style="width:150px;padding-top:5px">P.O. #</td>
                                    </tr>
        
                                    <tr>
                                        <td id="payment_checkbox" style="padding-top:5px;"><input
                                                onclick="customization_toggleFields(this)" type="checkbox" data-invoice_id=""
                                                name="customization_payments" id="customization_payments"></td>
                                        <td style="width:150px;padding-top:5px;">Show Payments</td>
                                    </tr>
        
                                    <tr>
                                        <td colspan=2 style="height:16px;">&nbsp;</td>
                                    </tr>
        
        
        
        
                                    <tr>
                                        <td colspan=2
                                            style="width:80px;border-right:0px solid #d1d1d1;font-size:10px;display:none;">
                                            Affects only the finished invoice, not the template below</td>
                                    </tr>
        
                                </table>
                            </td>
        
        
        
                            <td style="vertical-align:top;padding-left:40px;">
        
                                <table border=0 cellpadding=0 cellspacing=0
                                    style="font-family:verdana;font-size:12px;color:#3c3c3c;">
                                    <tr>
                                        <td colspan=2 style="padding-bottom:8px;"></td>
                                    </tr>
        
                                    <tr>
                                        <td colspan=2 style="padding-bottom:8px;border-right:1px solid #d1d1d1;height:120px;">
                                        </td>
                                    </tr>
        
                                </table>
                            </td>
        
        
        
        
        
                            <td style="vertical-align:top;padding-left:75px;">
                                <table border=0 cellpadding=0 cellspacing=0
                                    style="font-family:verdana;font-size:12px;color:#3c3c3c;">
                                    <tr>
                                        <td colspan=2
                                            style="border:0px solid black; padding-top:9px;padding-bottom:8px;border-right:0px solid #d1d1d1;vertical-align:top;">
                                            <table cellspacing=0 cellpadding=0>
                                                <tr>
                                                    <td>Date Format:
                                                        <br>
                                                        <select onchange="customization_toggleDateFormat(this)"
                                                            id="customization_date_format" name="customization_date_format"
                                                            style="margin-top:5px;padding-left:2px; font-weight:normal; font-family:verdana;font-size:13px;color:#3c3c3c;">
                                                            <option value="mm/dd/yy" selected>MM/DD/YYYY</option>
                                                            <option value="dd/mm/yy">DD/MM/YYYY</option>
                                                            <option value="dd.mm.yy">DD.MM.YYYY</option>
                                                            <option value="dd-mm-yy">DD-MM-YYYY</option>
                                                            <option value="yy-mm-dd">YYYY-MM-DD</option>
                                                        </select>
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td &nbsp;</td>
                                    </tr>
        
        
        
                                    <tr>
                                        <td colspan=2 style="width:175px;padding-bottom:8px;">
                                            Language:<br>
        
                                            <select onchange="customization_toggleLanguage(this)" id="customization_language"
                                                style="margin-top:5px; padding-left:2px; font-weight:normal; font-family:verdana;font-size:13px;color:#3c3c3c;">
                                                <option value="Danish">Danish</option>
                                                <option value="Dutch">Dutch</option>
                                                <option value="English" selected="selected">English</option>
                                                <option value="French">French</option>
                                                <option value="German">German</option>
                                                <option value="Italian">Italian</option>
                                                <option value="Norwegian">Norwegian</option>
                                                <option value="Portuguese">Portuguese</option>
                                                <option value="Spanish">Spanish</option>
                                            </select>
                                        </td>
                                    </tr>
        
                                    <tr>
                                        <td colspan=2 style="width:80px;border-right:0px solid #d1d1d1;font-size:10px;">Affects
                                            only the finished invoice, not the template below</td>
                                    </tr>
        
        
        
        
        
                                    <tr>
                                        <td colspan=2 style="padding-bottom:8px;border-right:0px solid #d1d1d1;display:none;">
                                            <table cellspacing=0 cellpadding=0>
                                                <tr>
                                                    <td>
                                                        Currency:<br>
        
                                                        <select onchange="customization_toggleCurrency(this)" id="currency_code"
                                                            name="currency_code"
                                                            style="margin-top:5px; padding-left:2px; font-weight:normal; font-family:verdana;font-size:13px;color:#3c3c3c;">
                                                            <option value="USD" selected="selected">USD US Dollar</option>
                                                            <option value="CAD">CAD Canadian Dollar</option>
                                                            <option value="EUR">EUR Euro</option>
                                                            <option value="GBP">GBP Pound Sterling</option>
                                                            <option value="AUD">AUD Australian Dollar</option>
                                                            <option value="NZD">NZD New Zealand Dollar</option>
                                                            <option disabled></option>
                                                            <option value="AED">AED UAE Dirham</option>
                                                            <option value="AFN">AFN Afghani</option>
                                                            <option value="ALL">ALL Lek</option>
                                                            <option value="AMD">AMD Armenian Dram</option>
                                                            <option value="ANG">ANG Neth. Ant. Guilder</option>
                                                            <option value="AOA">AOA Kwanza</option>
                                                            <option value="ARS">ARS Argentine Peso</option>
                                                            <option value="AWG">AWG Aruban Guilder</option>
                                                            <option value="AZN">AZN Azerbaijanian Manat</option>
                                                            <option value="BAM">BAM Convertible Marks</option>
                                                            <option value="BBD">BBD Barbados Dollar</option>
                                                            <option value="BDT">BDT Bangladeshi Taka</option>
                                                            <option value="BGN">BGN Bulgarian Lev</option>
                                                            <option value="BHD">BHD Bahraini Dinar</option>
                                                            <option value="BIF">BIF Burundian Franc</option>
                                                            <option value="BMD">BMD Bermudian Dollar</option>
                                                            <option value="BND">BND Brunei Dollar</option>
                                                            <option value="BOB">BOB Boliviano</option>
                                                            <option value="BRL">BRL Brazilian Real</option>
                                                            <option value="BSD">BSD Bahamian Dollar</option>
                                                            <option value="BTN">BTN Ngultrum</option>
                                                            <option value="BWP">BWP Pula</option>
                                                            <option value="BZD">BZD Belize dollar</option>
                                                            <option value="CDF">CDF Franc Congolais</option>
                                                            <option value="CHF">CHF Swiss Franc</option>
                                                            <option value="CLP">CLP Chilean Peso</option>
                                                            <option value="CNY">CNY Renminbi</option>
                                                            <option value="COP">COP Colombian Peso</option>
                                                            <option value="CRC">CRC Costa Rican Colon</option>
                                                            <option value="CUP">CUP Cuban Peso</option>
                                                            <option value="CVE">CVE Cape Verde Escudo</option>
                                                            <option value="CZK">CZK Czech Koruna</option>
                                                            <option value="DJF">DJF Djibouti Franc</option>
                                                            <option value="DKK">DKK Danish Krone</option>
                                                            <option value="DOP">DOP Dominican Peso</option>
                                                            <option value="DZD">DZD Algerian Dinar</option>
                                                            <option value="EEK">EEK Kroon</option>
                                                            <option value="EGP">EGP Egyptian Pound</option>
                                                            <option value="ERN">ERN Nakfa</option>
                                                            <option value="ETB">ETB Ethiopian Birr</option>
                                                            <option value="FJD">FJD Fiji Dollar</option>
                                                            <option value="FKP">FKP Falklands Pound</option>
                                                            <option value="GEL">GEL Lari</option>
                                                            <option value="GHS">GHS Cedi</option>
                                                            <option value="GIP">GIP Gibraltar Pound</option>
                                                            <option value="GMD">GMD Dalasi</option>
                                                            <option value="GNF">GNF Guinea Franc</option>
                                                            <option value="GTQ">GTQ Quetzal</option>
                                                            <option value="GYD">GYD Guyana Dollar</option>
                                                            <option value="HKD">HKD Hong Kong Dollar</option>
                                                            <option value="HNL">HNL Lempira</option>
                                                            <option value="HRK">HRK Croatian Kuna</option>
                                                            <option value="HTG">HTG Haiti Gourde</option>
                                                            <option value="HUF">HUF Forint</option>
                                                            <option value="IDR">IDR Rupiah</option>
                                                            <option value="ILS">ILS New Israeli Shekel</option>
                                                            <option value="INR">INR Indian Rupee</option>
                                                            <option value="IQD">IQD Iraqi Dinar</option>
                                                            <option value="IRR">IRR Iranian Rial</option>
                                                            <option value="ISK">ISK Iceland Krona</option>
                                                            <option value="JMD">JMD Jamaican Dollar</option>
                                                            <option value="JOD">JOD Jordanian Dinar</option>
                                                            <option value="JPY">JPY Japanese Yen</option>
                                                            <option value="KES">KES Kenyan Shilling</option>
                                                            <option value="KGS">KGS Som</option>
                                                            <option value="KHR">KHR Riel</option>
                                                            <option value="KMF">KMF Comoro Franc</option>
                                                            <option value="KPW">KPW North Korean Won</option>
                                                            <option value="KRW">KRW South Korean Won</option>
                                                            <option value="KWD">KWD Kuwaiti Dinar</option>
                                                            <option value="KYD">KYD Caymans Dollar</option>
                                                            <option value="KZT">KZT Tenge</option>
                                                            <option value="LAK">LAK Kip</option>
                                                            <option value="LBP">LBP Lebanese Pound</option>
                                                            <option value="LKR">LKR Sri Lanka Rupee</option>
                                                            <option value="LRD">LRD Liberian Dollar</option>
                                                            <option value="LSL">LSL Loti</option>
                                                            <option value="LTL">LTL Lithuanian Litas</option>
                                                            <option value="LVL">LVL Latvian Lats</option>
                                                            <option value="LYD">LYD Libyan Dinar</option>
                                                            <option value="MAD">MAD Moroccan Dirham</option>
                                                            <option value="MDL">MDL Moldovan Leu</option>
                                                            <option value="MGA">MGA Malagasy Ariary</option>
                                                            <option value="MKD">MKD Denar</option>
                                                            <option value="MMK">MMK Myanmar Kyat</option>
                                                            <option value="MNT">MNT Tugrik</option>
                                                            <option value="MOP">MOP Pataca</option>
                                                            <option value="MRO">MRO Ouguiya</option>
                                                            <option value="MUR">MUR Mauritius Rupee</option>
                                                            <option value="MVR">MVR Rufiyaa</option>
                                                            <option value="MWK">MWK Kwacha</option>
                                                            <option value="MXN">MXN Mexican Peso</option>
                                                            <option value="MYR">MYR Malaysian Ringgit</option>
                                                            <option value="MZN">MZN Metical</option>
                                                            <option value="NAD">NAD Namibian Dollar</option>
                                                            <option value="NGN">NGN Naira</option>
                                                            <option value="NIO">NIO Cordoba Oro</option>
                                                            <option value="NOK">NOK Norwegian Krone</option>
                                                            <option value="NPR">NPR Nepalese Rupee</option>
                                                            <option value="OMR">OMR Rial Omani</option>
                                                            <option value="PAB">PAB Balboa</option>
                                                            <option value="PEN">PEN Nuevo Sol</option>
                                                            <option value="PGK">PGK Kina</option>
                                                            <option value="PHP">PHP Philippine Peso</option>
                                                            <option value="PKR">PKR Pakistan Rupee</option>
                                                            <option value="PLN">PLN Zloty</option>
                                                            <option value="PYG">PYG Guarani</option>
                                                            <option value="QAR">QAR Qatari Rial</option>
                                                            <option value="RON">RON Romanian New Leu</option>
                                                            <option value="RSD">RSD Serbian Dinar</option>
                                                            <option value="RUB">RUB Russian Ruble</option>
                                                            <option value="RWF">RWF Rwanda Franc</option>
                                                            <option value="SAR">SAR Saudi Riyal</option>
                                                            <option value="SBD">SBD Solomons Dollar</option>
                                                            <option value="SCR">SCR Seychelles Rupee</option>
                                                            <option value="SDG">SDG Sudanese Pound</option>
                                                            <option value="SEK">SEK Swedish Krona</option>
                                                            <option value="SGD">SGD Singapore Dollar</option>
                                                            <option value="SHP">SHP St Helena Pound</option>
                                                            <option value="SKK">SKK Slovak Koruna</option>
                                                            <option value="SLL">SLL Leone</option>
                                                            <option value="SRD">SRD Surinam Dollar</option>
                                                            <option value="SSP">SSP S. Sudanese Pound</option>
                                                            <option value="STD">STD Dobra</option>
                                                            <option value="SYP">SYP Syrian Pound</option>
                                                            <option value="SZL">SZL Lilangeni</option>
                                                            <option value="THB">THB Baht</option>
                                                            <option value="TJS">TJS Somoni</option>
                                                            <option value="TMM">TMM Manat</option>
                                                            <option value="TND">TND Tunisian Dinar</option>
                                                            <option value="TOP">TOP Pa&#039;anga</option>
                                                            <option value="TRY">TRY Turkish Lira</option>
                                                            <option value="TTD">TTD T&amp;T Dollar</option>
                                                            <option value="TWD">TWD New Taiwan Dollar</option>
                                                            <option value="TZS">TZS Tanzanian Shilling</option>
                                                            <option value="UAH">UAH Hryvnia</option>
                                                            <option value="UGX">UGX Uganda Shilling</option>
                                                            <option value="UYU">UYU Peso Uruguayo</option>
                                                            <option value="UZS">UZS Uzbekistan Som</option>
                                                            <option value="VEF">VEF Bolivar Fuerte</option>
                                                            <option value="VND">VND Vietnamese Dong</option>
                                                            <option value="VUV">VUV Vatu</option>
                                                            <option value="WST">WST Samoan Tala</option>
                                                            <option value="XAF">XAF CFA Franc BEAC</option>
                                                            <option value="XCD">XCD E. Carib. Dollar</option>
                                                            <option value="XOF">XOF CFA Franc BCEAO</option>
                                                            <option value="XPF">XPF CFP Franc</option>
                                                            <option value="YER">YER Yemeni Rial</option>
                                                            <option value="ZAR">ZAR S. African Rand</option>
                                                            <option value="ZMK">ZMK Kwacha</option>
                                                        </select>
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                    <tr>
        
                                        <td style="display:none;"><input onclick="customization_toggleShowCurrencyCode(this)"
                                                type="checkbox" name="show_currency_code" id="show_currency_code"></td>
                                        <td style="width:150px;border-right:0px solid #d1d1d1;font-size:10px;display:none;">Show
                                            three letter currency code on invoice</td>
                                    </tr>
        
                                </table>
                            </td>
        
        
        
                            <td style="vertical-align:top;padding-left:70px; ">
                                <table border=0 cellpadding=0 cellspacing=0
                                    style="font-family:verdana;font-size:12px;color:#3c3c3c;">
                                    <tr>
                                        <td colspan=2 style="padding-bottom:8px;"></td>
                                    </tr>
                                    <tr>
                                        <td colspan=2 style="padding-bottom:8px;border-right:1px solid #d1d1d1;height:120px;">
                                        </td>
                                    </tr>
                                </table>
                            </td>
                            <td style="vertical-align:top;padding-left:30px;">
        
        
        
        
        
                                <table border=0 cellpadding=0 cellspacing=0
                                    style="font-family:verdana;font-size:12px;color:#3c3c3c;">
                                    <tr>
                                        <td colspan=2 style="padding-bottom:8px;"></td>
                                    </tr>
        
                                    <tr>
                                        <td style="width:30px;"><input onclick="customization_toggleTax(this);" type="checkbox"
                                                name="customization_tax" id="customization_tax"></td>
                                        <td style="width:150px;">Sales Tax</td>
                                    </tr>
        
        
        
                                    <tr>
                                        <td class="showTaxColumn" colspan=2 style="padding-bottom:8px;display:none;"></td>
                                    </tr>
        
                                    <tr>
                                        <td class="showTaxColumn" style="width:30px;display:none"><input
                                                onclick="customization_toggleFields(this);" type="checkbox"
                                                name="customization_tax2" id="customization_tax2"></td>
                                        <td class="showTaxColumn" style="width:150px;display:none;">Show tax column</td>
                                    </tr>
        
                                    <tr>
        
                                        <td class="showTaxColumn" colspan=2
                                            style="padding-top:5px; padding-left:5px; width:80px;border-right:0px solid #d1d1d1;font-size:10px;display:none">
                                            Affects only the finished invoice, not the template below</td>
                                    </tr>
        
        
        
        
                                </table>
        
                                <input id="customization_taxname" type="hidden" value="Tax">
                                <input id="customization_taxname2" type="hidden" value="Tax">
        
        
        
        
                            </td>
        
        
        
        
        
        
                        </tr>
        
        
        
                    </table>
        
                </div>
        
                <input type=hidden id="translation_English" value="INVOICE"><input type=hidden id="translation_French"
                    value="FACTURE"><input type=hidden id="translation_Danish" value="FAKTURA"><input type=hidden
                    id="translation_Norwegian" value="FAKTURA"><input type=hidden id="translation_Dutch" value="FACTUUR"><input
                    type=hidden id="translation_German" value="RECHNUNG"><input type=hidden id="translation_Italian"
                    value="FATTURA"><input type=hidden id="translation_Portuguese" value="FATURA"><input type=hidden
                    id="translation_Spanish" value="FACTURA">
                <script type="text/javascript">confirmExitIfModified('invoice_form', 'You have unsaved changes.');</script>
        
        
        
        
                <!-- TB 2 -->
                <link rel=stylesheet href="css/thickbox.css" type="text/css" media=screen>
                <script type="text/javascript" src="javascript/thickbox-compressed.js"></script>
        
                <table cellpadding=0 cellspacing=0 style="width:100%;margin:0px;padding:0px;padding-bottom:10px;">
                    <tr>
                        <td colspan=100 width="100%" style="text-align:left;">
        
                            <!-- TB 3 -->
        
                            <table cellpadding=0 cellspacing=0 width="100%" style="padding:0px; margin:0px;text-align:left;">
        
                                <tr>
        
        
        
        
                                    <td title="You have to save your invoice first"
                                        style="padding-top:0px;margin:0px;text-align:left;">
        
        
        
                                        <form style="margin:0px; padding:0px;" method="GET" action="viewInvoice.php">
        
                                            <input type=hidden name="c" value="0">
        
        
                                            <input type=submit value="View" disabled style="height:32px;width:110px;">
        
        
                                        </form>
        
                                    </td>
        
        
        
        
        
                        </td>
        
                        <td title="You have to save your invoice first" style="padding-top:0px;margin:0px;text-align:left;">
        
                            <form id="print_form" style="margin:0px; padding:0px;" method="post" action="printInvoice.php">
        
                                <input type=hidden name="c" value="0">
        
                                <input type=hidden name="source" value="loggedIn">
        
        
        
        
                                <input type=submit value="Print" disabled
                                    onclick="if(document.getElementById('PDFMessageContent'))document.getElementById('PDFMessageContent').style.display='none';if(document.getElementById('infoMessage'))document.getElementById('infoMessage').style.display='none';document.getElementById('MessageContent').style.display='block';newWindow();"
                                    style="height:32px;width:110px;">
                            </form>
        
                        </td>
        
                        <td title="You have to save your invoice first" style="padding-top:0px;margin:0px;text-align:left;">
        
                            <form id="download_pdf_form" style="margin:0px; padding:0px;" method="post" action="pdfInvoice.php">
        
                                <input type=hidden name="c" value="0">
        
                                <input type=hidden name="source" value="loggedIn">
        
        
                                <input id="pdf_button" style="height:32px;width:110px;" disabled
                                    onclick="document.getElementById('pdf_button').disabled=true; document.getElementById('download_pdf_form').submit(); setTimeout( function() {document.getElementById('pdf_button').disabled=false},3000);"
                                    type=button value="PDF">
        
        
                            </form>
        
                        </td>
        
        
        
                        <td title="You have to save your invoice first" style="padding-top:0px;margin:0px;text-align:left;">
        
                            <form style="margin:0px; padding:0px;" method="GET" action="sendInvoice.php">
        
                                <input type=hidden name="c" value="0">
        
        
                                <input style="height:32px;width:110px;" disabled type=submit value="Send">
        
        
                            </form>
        
                        </td>
        
        
        
        
        
        
        
                        <td title="You have to save your invoice first" style="padding-top:0px;margin:0px;text-align:left;">
        
                            <form style="margin:0px; padding:0px;" method="GET" action="recordPayment.php">
        
                                <input type=hidden name="c" value="0">
        
        
        
                                <input style="height:32px;width:110px;" disabled type=submit value="Mark as Paid">
        
        
                            </form>
        
                        </td>
        
        
        
        
                        <td style="width:200px; padding-top:0px;margin:0px;text-align:left;">&nbsp;
        
                        </td>
        
        
        
        
                        <td style="padding-top:0px;margin:0px;text-align:left;">
        
                            <form method="post" action="">
        
                                <!-- <input id="btnSave" onclick="$('input[type=text]').attr('value', function (i, val) { return val; }); $('textarea').html(function () { return this.value; }); $('select').find(':selected').attr('selected', 'selected'); $('input[type=checkbox],input[type=radio]').attr('checked', function () { return this.checked; }); document.getElementById('html_hidden').value=document.documentElement.innerHTML; remindUser='';document.getElementById('submitButton').value='Save';document.getElementById('invoice_form').submit();" type=button  style="height:32px;width:110px;" value="Save" -->
        
                                <input id="btnSave"
                                    onclick="this.disabled=true;remindUser='';document.getElementById('submitButton').value='Save';document.getElementById('invoice_form').submit();"
                                    type=button style="height:32px;width:110px;" value="Save">
        
                            </form>
        
                        </td>
        
        
                    </tr>
        
                </table> <!-- TB 3 -->
        
                </td>
        
                </tr>
        
        
        
                </table>
        
        
        
        
        
        
                <form id="invoice_form" name="invoice_form" action="newInvoice.php" method="post" enctype="multipart/form-data"
                    style="margin:0px;padding:0px;">
        
                    <input type="hidden" id="customization_options" name="customization_options" value="off">
        
                    <input type=hidden name="submitButton" id="submitButton">
        
                    <input type=hidden name="c" value="">
                    <input type=hidden name="t" value="">
                    <input type=hidden name="tc" value="">
                    <input type=hidden name="emailaddress_logged_in" value="mptomani@gmail.com">
        
                    <input type="hidden" name="customization_logo" id="customization_save_logo" value="">
                    <input type="hidden" name="customization_street2" id="customization_save_street2" value="">
                    <input type="hidden" name="customization_poNumber" id="customization_save_poNumber" value="">
                    <input type="hidden" name="customization_tax" id="customization_save_tax" value="">
                    <input type="hidden" name="customization_tax2" id="customization_save_tax2" value="">
                    <input type="hidden" name="customization_discount" id="customization_save_discount" value="">
                    <input type="hidden" name="customization_payments" id="customization_save_payments" value="">
                    <input type="hidden" name="customization_attention" id="customization_save_attention" value="">
                    <input type="hidden" name="customization_taxid1" id="customization_save_taxid1" value="">
                    <input type="hidden" name="customization_taxid3" id="customization_save_taxid3" value="">
                    <input type="hidden" name="customization_date_format" id="customization_save_date_format" value="mm/dd/yy">
                    <input type="hidden" name="currency_code" id="save_currency_code" value="USD">
                    <input type="hidden" name="show_currency_code" id="save_show_currency_code" value="">
                    <input type='hidden' name="salesTaxModule" id="salesTaxModule" value="1">
                    <input type="hidden" name="taxname" id="taxname" value="Tax">
                    <input type="hidden" name="taxname2" id="taxname2" value="Tax">
                    <input type="hidden" name="language" id="language" value="English">
                    <input type="hidden" name="template_type" id="template_type" value="invoice">
                    <input type="hidden" name="fullfillment_date" id="fulfillment_date" value="">
        
                    <input type="hidden" name="deleted" id="deleted" value="0">
        
                    <input type="hidden" name="status" id="status" value="">
        
                    <input type="hidden" name="customization_logoFilename_session" id="customization_logoFilename_session"
                        value="">
        
        
                    <input type="hidden" name="document_type" id="document_type" value="invoice">
        
        
                    <!-- TB 2 -->
        
        
        
        
        
        
                    <table id="invoiceFormWrapper" border=0 cellpadding=0 cellspacing=0
                        style="width:100%;margin:0px;padding:0px;margin-top:0px;border:0px solid black;">
        
        
        
        
                        <tr>
        
        
        
                            <td colspan=100 width="100%"
                                style="text-align:left;border-left:1px solid silver;border-top:1px solid silver;border-right:2px solid silver;border-bottom:2px solid silver;padding-left:17px;padding-right:18px; padding-top:15px; padding-bottom:15px;">
        
                                <!-- TB 3 -->
        
                                <table border=0 cellpadding=0 cellspacing=0 width="100%"
                                    style="padding:0px; margin:0px;text-align:left;">
        
        
        
                                    <tr>
        
                                        <td>
                                            <table border=0 cellpadding=0 cellspacing=0 style="width:100%;">
                                                <tr style="vertical-align:bottom;">
        
                                                    <td style="padding:0px; margin:0px;">
        
                                                        <font style="font-size:18px;font-family:verdana;color:#3c3c3c;">From
                                                        </font>
        
                                                    </td>
        
        
        
                                                    <td style="padding:0px; margin:0px;text-align:right;">
        
                                                        <font
                                                            style="font-size:28px;font-weight:bold; letter-spacing:5px; font-family:arial;color:#808080;">
        
        
        
        
        
                                                            <div id="invoiceHeadlineNoLogo"
                                                                style="position:relative; z-index:1; margin-bottom:-14px;">
                                                                <input id="invoice_heading"
                                                                    onchange="document.getElementById('invoice_heading_copy').value=this.value"
                                                                    style="text-align:right; padding-top:3px; padding-bottom:3px; padding-right:8px; width:250px; font-weight:bold; letter-spacing:5px; font-family:arial;font-size:28px;color:#808080;"
                                                                    class="invoiceForm_fromNameTD"
                                                                    onfocus="this.className='invoiceForm_fromNameTD_onFocus';"
                                                                    onblur="this.className='invoiceForm_fromNameTD';" type=text
                                                                    name="invoice_heading" value="INVOICE">
                                                            </div>
        
                                                        </font>
        
                                                    </td>
        
        
        
                                                </tr>
        
                                            </table>
        
                                        </td>
        
                                    </tr>
        
        
        
        
        
                                    <tr>
        
                                        <td>
        
                                            <!-- TB 4 -->
        
                                            <table border=0 cellspacing=0 cellpadding=0>
                                                <tr>
                                                    <td rowspan=2 style="vertical-align:top;">
        
                                                        <!-- TB 5 -->
        
                                                        <table border=0 cellpadding=0 cellspacing=0 style="margin-top:5px;">
        
        
        
        
                                                            <tr style="height:25px;">
                                                                <td class="invoiceForm_fromNameTD" id="from_nameTD">
                                                                    <input id="from_name"
                                                                        style="outline:none;border:0px solid white;width:287px; padding-left:7px; font-weight:normal; font-family:verdana;font-size:13px;color:#3c3c3c;"
                                                                        autocomplete="nope" type=text name=from_name
                                                                        onfocus="field_onfocus(this,'Your name');"
                                                                        onblur="field_onblur(this,'Your name');"
                                                                        value="Hidden Oaks Contracting">
                                                                </td>
                                                            </tr>
        
                                                            <tr>
                                                                <td style="height:5px;"></td>
                                                            </tr>
        
                                                            <tr>
                                                                <td>
        
                                                                    <textarea name="from_address" id="from_address" rows=4
                                                                        cols=40 class="invoiceForm_fromNameTD"
                                                                        style="width:289px; overflow:auto; outline:none; padding:5px; font-weight:normal; font-family:verdana;font-size:13px;color:#3c3c3c;"
                                                                        onfocus="field_onfocus(this,'Your address');"
                                                                        onblur="field_onblur(this,'Your address');"
                                                                        onkeyup="sz(this,4);">1390 Jenks Place
                                                                        Farmington, NY 14425
        
                                                                        Mike Tomani 585-203-6767</textarea>
                                                                </td>
                                                            </tr>
        
                                                            <tr>
        
                                                                <td
                                                                    style="padding:0px; margin:0px;padding-top:25px;padding-bottom:5px;">
        
                                                                    <font
                                                                        style="font-size:18px;font-family:verdana;color:#3c3c3c;">
                                                                        To</font>
        
                                                                </td>
        
                                                            </tr>
        
        
        
        
                                                            <tr style="height:25px;">
        
                                                                <td class="invoiceForm_fromNameTD" id="to_nameTD"
                                                                    style="position:relative">
        
                                                                    <input autocomplete="nope" id="customer_name"
                                                                        style="display:none; outline:none;border:0px solid white;width:287px; padding-left:7px; font-weight:normal; font-family:verdana;font-size:13px;color:#3c3c3c;"
                                                                        type=text
                                                                        onfocus="field_onfocus(this,'Your name');this.value=this.value;"
                                                                        onblur="customer_name_update();">
                                                                    <input id="customer_id" style="display:none;">
        
        
                                                                    <select id="to_name" name="to_id"
                                                                        onfocusin="field_onfocus(this,'');"
                                                                        onfocus="field_onfocus(this,'');"
                                                                        onblur="field_onblur(this,'');"
                                                                        onchange="getCustomerAddress(this.value);"
                                                                        style="outline:none;border:0px solid white;width:100%; padding-left:4px; font-weight:normal; font-family:verdana;font-size:13px;height:100%;color:#3c3c3c;">
        
                                                                        <option value="17455125">Brian Mintz</option>
                                                                        <option value="27506549">Daniel & Jeanne Pavlina
                                                                        </option>
                                                                        <option value="18476866">Ed Ziegler</option>
                                                                        <option value="17297983">ELAINE RALLO</option>
                                                                        <option value="28756044">Eric Loose</option>
                                                                        <option value="25448396">Hezekiah Simmons</option>
                                                                        <option value="20632129">Joel and Marilyn Greenberg
                                                                        </option>
                                                                        <option value="28538793">John Tarricone</option>
                                                                        <option value="27304347">Leslie Kramer</option>
                                                                        <option value="16958654">Madonna Ob Gyn</option>
                                                                        <option value="20879410">Owners of Property</option>
                                                                        <option value="28193623">Radha Godugu</option>
                                                                        <option value="28602683">Ray Siena</option>
                                                                        <option value="23388628">Ron Markese</option>
                                                                        <option value="20488166">Sheril Johnson</option>
                                                                        <option value="20488244">Sheril Johnson</option>
                                                                        <option value="17353820">TEST</option>
                                                                        <option value="21031380">Vilas Savant</option>
                                                                        <optgroup label="-----------------------------">
        
                                                                            <option
                                                                                style="margin:0px; padding:0px; padding-left:2px;"
                                                                                value="0" selected>New Customer</option>
        
                                                                    </select>
        
                                                                    <script>function edit_this_name() {

                                                                            var customer_name = document.getElementById('to_name').options[document.getElementById('to_name').selectedIndex].text;
                                                                            var customer_id = document.getElementById('to_name').options[document.getElementById('to_name').selectedIndex].value;
                                                                            document.getElementById('to_name').style.display = 'none';
                                                                            document.getElementById('edit_customer_name').style.display = 'none';
                                                                            document.getElementById('edit_customer_msg_save').style.display = '';

                                                                            document.getElementById('customer_name').style.display = '';
                                                                            document.getElementById('customer_name').focus();
                                                                            document.getElementById('customer_name').value = customer_name;
                                                                            document.getElementById('customer_id').value = customer_id;

                                                                        }
                                                                    </script>
        
                                                                    <button type="button" id="edit_customer_name"
                                                                        onmouseout="document.getElementById('edit_customer_msg').style.display='none';"
                                                                        onmouseover="document.getElementById('edit_customer_msg').style.display='';"
                                                                        onclick="edit_this_name();"
                                                                        style="background:none; padding:0; position:relative; top:2px; float:right; margin:0 1px 0 0; border:0; cursor:pointer;display:none;"><img
                                                                            style="padding-left:3px;vertical-align:bottom;margin-bottom:1px;"
                                                                            src="images/edit_customer.png"></button>
                                                                    <span id="edit_customer_msg"
                                                                        style="display:none;font-size:11px;padding:7px; position:absolute;width:190px;background:#EFF7FA; border:1px solid #cccccc; color:black; font-weight:normal;font-family:verdana;left:100%;top:0;">Click
                                                                        here to edit the name of this customer.<br><br>To create
                                                                        a new customer, select "New Customer" at the bottom of
                                                                        the drop-down to the left.</span>
                                                                    <span id="edit_customer_msg_save"
                                                                        style="display:none;font-size:11px;padding:7px; position:absolute;width:190px;background:#EFF7FA; border:1px solid #cccccc; color:black; font-weight:normal;font-family:verdana;left:100%; top:0;">Click
                                                                        outside the field to save the customer&##39;s
                                                                        name</span>
                                                                </td>
        
                                                            </tr>
        
        
        
                                                            <tr>
                                                                <td style="height:5px;"></td>
                                                            </tr>
        
        
        
        
                                                            <tr id="to_new_customerTR" style="height:25px;">
                                                                <td class="invoiceForm_fromNameTD" id="to_new_customerTD">
                                                                    <input id="to_new_customer" autocomplete="nope"
                                                                        style="outline:none;border:0px solid white;width:287px; padding-left:7px; font-weight:normal; font-family:verdana;font-size:13px;color:silver;"
                                                                        type=text name="to_new_customer"
                                                                        onfocus="field_onfocus(this,'Customer name');"
                                                                        onblur="field_onblur(this,'Customer name');"
                                                                        value="Customer name">
                                                                </td>
                                                            </tr>
        
        
                                                            <tr id="to_new_customerBlankTR" style="">
                                                                <td style="height:5px;"></td>
                                                            </tr>
        
        
                                                            <tr>
                                                                <td>
        
                                                                    <textarea name="to_address" id="to_address" rows=4 cols=40
                                                                        class="invoiceForm_fromNameTD"
                                                                        style="width:289px; overflow:auto; outline:none; padding:5px; font-weight:normal; font-family:verdana;font-size:13px;color:silver;"
                                                                        onfocus="field_onfocus(this,'Customer address');"
                                                                        onblur="field_onblur(this,'Customer address');"
                                                                        onkeyup="sz(this,4);">Customer address</textarea>
                                                                </td>
                                                            </tr>
        
        
                                                            <!-- TB 5 -->
        
                                                        </table>
                                                    </td>
        
        
        
                                                    <td
                                                        style="border:0px solid red; padding-right:0px; width:495px; text-align:right;vertical-align:top;">
        
        
        
                                                        <table border=0 cellspacing=0 cellpadding=0 style="width:100%;">
                                                            <tr>
                                                                <td style="width:100px;"></td>
                                                                <td>
        
        
        
        
        
        
        
                                                                    <div id="upload_area" class="invoiceForm_uploadArea_hidden">
        
        
                                                                    </div>
        
        
        
        
        
                                                                    <input type="hidden" name="maxSize" value="9999999999" />
                                                                    <input type="hidden" name="maxW" value="300" />
                                                                    <input type="hidden" name="fullPath"
                                                                        value="http://www./upload/" />
                                                                    <input type="hidden" name="relPath" value="upload/" />
                                                                    <input type="hidden" name="colorR" value="255" />
                                                                    <input type="hidden" name="colorG" value="255" />
                                                                    <input type="hidden" name="colorB" value="255" />
                                                                    <input type="hidden" name="maxH" value="125" />
                                                                    <input type="hidden" name="filename" value="filename" />
        
        
        
        
                                                                    <div id="customization_uploadField"
                                                                        class="invoiceForm_uploadField_hidden">
        
                                                                    </div>
        
        
        
        
        
        
                                                                    <div style="float:right;margin-top:3px;margin-right:0px;display:none;;"
                                                                        id="customization_uploadDelete">
        
                                                                        <input type=button
                                                                            onclick="customization_uploadDelete();"
                                                                            value="Delete Logo">
        
                                                                    </div>
        
        
        
        
                                                                    <input type="text" style="display:none;"
                                                                        name="customization_logoFilename"
                                                                        id="customization_logoFilename" value="">
        
        
        
                                                                </td>
                                                            </tr>
                                                        </table>
        
        
        
                                                    </td>
                                                </tr>
        
                                                <tr>
        
                                                    <td style="vertical-align:bottom;">
        
        
        
                                                        <!-- TB 5 -->
        
                                                        <table border=0 cellpadding=0 cellspacing=0
                                                            style="width:100%; height:100%; vertical-align:bottom;border:1px solid white;">
                                                            <tr>
                                                                <td style="width:155px;"></td>
                                                                <td></td>
                                                                <td></td>
                                                            </tr>
        
        
        
                                                            <tr>
                                                                <td colspan=3>
        
        
        
        
                                                                    <div id="invoiceHeadlineWhenLogo"
                                                                        style="display:none; float:right; vertical-align:top;margin-top:5px;margin-bottom:20px;text-align:right;letter-spacing:3px;font-size:22px;color:#3c3c3c;font-weight:normal;font-family:arial;">
                                                                        <br>
                                                                        <input id="invoice_heading_copy"
                                                                            onchange="document.getElementById('invoice_heading').value=this.value"
                                                                            style="text-align:right; padding-top:3px; padding-bottom:3px; padding-right:8px; width:200px; font-weight:normal; letter-spacing:3px; font-family:arial;font-size:22px;color:#3c3c3c;"
                                                                            class="invoiceForm_fromNameTD"
                                                                            onfocus="this.className='invoiceForm_fromNameTD_onFocus';"
                                                                            onblur="this.className='invoiceForm_fromNameTD';"
                                                                            type=text value="INVOICE">
                                                                    </div>
        
        
                                                                </td>
                                                            </tr>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
                                                            <tr style="height:25px;">
        
                                                                <td></td>
        
                                                                <td id="number_label"
                                                                    style="width:146px; padding-right:8px;text-align:right;font-weight:bold;font-family:verdana;font-size:13px;color:#3c3c3c;">
                                                                    Invoice # </td>
        
        
        
                                                                <td class="invoiceForm_fromNameTD" id="invoice_numberTD"
                                                                    style="position:relative">
        
        
                                                                    <input id="invoice_number"
                                                                        style="outline:none;border:0px solid white; width:110px; padding-left:7px; font-weight:normal; font-family:verdana;font-size:13px;color:#3c3c3c;"
                                                                        type=text name="invoice_number"
                                                                        onfocus="field_onfocus(this,'');"
                                                                        onkeyup="onlyNumbersLettersOrDashes(this)"
                                                                        onblur="field_onblur(this,'');isUniqueInvoiceNumber(this,'newInvoice','invoice','')"
                                                                        value="0000019">
        
                                                                    <a onclick="show_numbering_overlay()"
                                                                        title="Click this link to change the invoice numbering scheme"
                                                                        style="position:absolute; top:4px; right:14px">
                                                                        <img style="cursor:pointer; border: 0;"
                                                                            src='/images/edit_customer.png'>
                                                                    </a>
                                                                </td>
        
                                                            </tr>
        
        
        
                                                            <tr>
                                                                <td style="height:5px;"></td>
                                                            </tr>
        
                                                            <input type="hidden" name="html_hidden" id="html_hidden">
        
        
        
        
        
        
        
                                                            <tr id="po_numberTR" style="height:25px;display:none;">
        
                                                                <td></td>
        
                                                                <td
                                                                    style="width:126px; padding-right:8px;text-align:right;font-weight:bold;font-family:verdana;font-size:13px;color:#3c3c3c;">
        
                                                                    P.O. #
                                                                </td>
        
        
        
                                                                <td class="invoiceForm_fromNameTD" id="po_numberTD">
        
                                                                    <input id="po_number"
                                                                        style="outline:none;border:0px solid white; width:141px; padding-left:7px; font-weight:normal; font-family:verdana;font-size:13px;color:#3c3c3c;"
                                                                        type=text name="po_number"
                                                                        onfocus="field_onfocus(this,'');"
                                                                        onkeyup="onlyNumbersLettersOrDashes(this)"
                                                                        onblur="field_onblur(this,'');" value="">
                                                                </td>
        
                                                            </tr>
        
        
        
                                                            <tr id="po_numberBlankTR" style="display:none;">
                                                                <td style="height:5px;"></td>
                                                            </tr>
        
                                                            <input type='hidden' id='gmtnow' value="2024-10-21 00:36:40">
                                                            <input type='hidden' name="add_date" id="add_date"
                                                                value="2024-10-21 00:36:40">
                                                            <input type='hidden' id="tax_popup" value="1">
        
                                                            <tr style="height:25px;">
                                                                <td></td>
                                                                <td id="date_label"
                                                                    style="padding-right:8px;text-align:right;font-weight:bold;font-family:verdana;font-size:13px;color:#3c3c3c;">
                                                                    Invoice Date
                                                                </td>
                                                                <td class="invoiceForm_fromNameTD" id="invoice_dateTD">
                                                                    <input id="invoice_date"
                                                                        style="width:141px;outline:none;border:0px solid white;cursor:pointer;background: url(images/calendar-16.png) 120px 2px no-repeat; padding-left:7px; font-weight:normal; font-family:verdana;font-size:13px;color:#3c3c3c;"
                                                                        onfocus="field_onfocus(this,'');"
                                                                        onblur="field_onblur(this,'');"
                                                                        onchange='dueAfterInvoice()' type=text id="invoice_date"
                                                                        name="invoice_date" value="10/20/2024">
                                                                </td>
                                                            </tr>
        
                                                            <tr>
                                                                <td style="height:5px;"></td>
                                                            </tr>
        
                                                            <tr style="height:25px;">
                                                                <td></td>
                                                                <td id="due_date_label"
                                                                    style="padding-right:8px;text-align:right;font-weight:bold;font-family:verdana;font-size:13px;color:#3c3c3c;">
                                                                    Due Date </td>
                                                                <td class="invoiceForm_fromNameTD" id="payment_due_dateTD">
                                                                    <input
                                                                        style="width:141px;outline:none;border:0px solid white;cursor:pointer;background: url(images/calendar-16.png) 120px 2px no-repeat; padding-left:7px; font-weight:normal; font-family:verdana;font-size:13px;color:#3c3c3c;"
                                                                        onfocus="field_onfocus(this,'');"
                                                                        onblur="field_onblur(this,'');" type=text
                                                                        name="payment_due_date" id="payment_due_date"
                                                                        onchange='invoiceBeforeDue()' value="10/20/2024">
                                                                </td>
                                                            </tr>
        
        
        
                                                            <!-- TB 5 -->
        
                                                        </table>
        
        
        
        
        
        
        
        
        
        
        
                                                    </td>
        
                                                </tr>
        
        
        
        
        
                                                <!-- TB 4 -->
        
                                            </table>
        
        
        
                                        </td>
        
        
        
        
        
        
        
        
        
                                    </tr>
        
        
        
                                    <tr>
                                        <td colspan=100 style="width:100%;vertical-align:top;padding-top:35px;">
        
        
        
                                            <!-- TB 4 -->
                                            <input type="hidden" id="swapOccurred" name="swapOccurred" value="0"
                                                defaultValue="0" />
                                            <table id="dataTable" border=0 cellpadding=0 cellspacing=0 width="100%"
                                                style="vertical-align:top;">
        
                                                <tbody>
        
                                                    <tr id="topRow" style="background-color:#54A0E7;height:30px;">
        
                                                        <th style='width:14px;'></th>
        
                                                        <th id="item_headline"
                                                            style="height:30px; color:#FFFFFD;font-family:arial;font-size:14px;font-weight:400;padding-left:8px;text-align:left;">
                                                            Item</th>
        
                                                        <th id="description_headline"
                                                            style="color:#FFFFFD;font-family:arial;font-size:14px;font-weight:400;padding-left:5px;text-align:left;">
                                                            Description</th>
        
                                                        <th id="unit_price_headline"
                                                            style="color:#FFFFFD;font-family:arial;font-size:14px;font-weight:400;padding-left:0px;text-align:right;padding-right:4px;">
                                                            Unit Price</th>
        
                                                        <th id="quantity_headline"
                                                            style="color:#FFFFFD;font-family:arial;font-size:14px;font-weight:400;padding-left:0px;text-align:right;padding-right:4px;">
                                                            Quantity</th>
        
        
        
        
                                                        <th id="topRowTax"
                                                            style="display:none;color:#FFFFFD;font-family:arial;font-size:14px;font-weight:400;padding-left:0px;text-align:right;padding-right:26px;padding-left:35px;">
                                                            Tax <input type="hidden" name="sales_tax_new_enabled" value="true">
                                                        </th>
        
        
                                                        <th id="amount_headline"
                                                            style="color:#FFFFFD;font-family:arial;font-size:14px;font-weight:400;padding-left:0px;text-align:right;padding-right:10px;">
                                                            Amount</th>
        
                                                    </tr>
        
        
        
        
        
                                                    <tr class="invoiceDataHeadRow">
                                                        <input type=hidden name='lineid[]' id='lineid[]' value='0'>
                                                        <input type=hidden name='isdirty[]' id='isdirty[]' value='0'>
                                                        <input type=hidden name='numRows' id='numRows' value='2'>
        
                                                        <td class="invoiceDataDelete">
                                                            <img style="" onclick="zapthisrow(this,'dataTable');" border=0
                                                                title="Delete Line" src="images/delete_item.gif">
                                                        </td>
        
        
                                                        <td class="invoiceDataItem">
        
                                                            <select onfocus="invoiceForm_changeBackground(this,'#FFFADC');"
                                                                onfocusin="objSelected=this; invoiceForm_changeBackground(this,'#FFFADC');"
                                                                onblur="invoiceForm_changeBackground(this,'#FFFFFF');"
                                                                name="item[]" id="itemSelect0" class="inputInvoiceDataItem ">
        
                                                                <option value="" selected="selected"></option>
                                                                <option value="Days">Days</option>
                                                                <option value="Hours">Hours</option>
                                                                <option value="Product">Product</option>
                                                                <option value="Service">Service</option>
                                                                <option value="Expense">Expense</option>
                                                                <option value="Discount_aynax">Discount</option>
                                                            </select>
                                                            <input type="hidden" name="expense_category[]"
                                                                value="Other Expenses">
        
                                                        </td>
        
        
        
                                                        <td class="invoiceDataDescription">
        
        
        
        
        
                                                            <textarea name="description[]" id="description[]" rows=1 cols=40
                                                                class="inputInvoiceDataDescription"
                                                                onfocus="invoiceForm_changeBackground(this,'#FFFADC');"
                                                                onblur="invoiceForm_changeBackground(this,'#FFFFFF');"
                                                                onkeyup="sz(this);"></textarea>
                                                            <input type="hidden" name="expense_id[]" value="">
                                                            <input type="hidden" name="project_id[]" value="0">
                                                            <input type="hidden" name="hour_id[]" value="0">
                                                            <input type="hidden" class="jPaymentId" name="payment_id[]"
                                                                value="0">
        
        
                                                        </td>
        
        
                                                        <td class="invoiceDataPriceOrQty">
                                                            <input name="unit_price[]" id="unit_price[]" type=text
                                                                autocomplete="nope" class="inputInvoiceDataPriceOrQty"
                                                                style="color:silver;" onkeyup="sanitizeInvoiceLineValues(this);"
                                                                onblur="invoiceForm_changeBackground(this,'#FFFFFF');forceDiscountNegative(this);checkIfEmpty(this);reCalculate(this, 'dataTable', this.value);"
                                                                onfocus="valueItemFocus(this)" value="0.00">
                                                        </td>
        
                                                        <td class="invoiceDataPriceOrQty">
        
                                                            <input name="qty[]" id="qty[]" type=text autocomplete="nope"
                                                                class="inputInvoiceDataPriceOrQty" style="color:silver;"
                                                                onkeyup="sanitizeInvoiceLineValues(this);"
                                                                onblur="invoiceForm_changeBackground(this,'#FFFFFF');checkIfEmpty(this);reCalculate(this, 'dataTable', this.value);"
                                                                onfocus="valueItemFocus(this)" value="0.00">
        
                                                        </td>
        
        
        
        
        
                                                        <td class="tax1 invoiceDataTax_hidden" style="">
        
                                                            <!-- Note: The first input of class 'tax1' must be the total tax in order for the recalculate function in javascript.js to work.  -->
                                                            <input name="tax_total[]" id="tax_total[]" class="tax_total"
                                                                type="hidden" value="0.00">
        
                                                            <!-- tax inputs - for saving separate tax rates in invoice_line -->
                                                            <input type="hidden" name="tax[]" class="tax_rate" value="">
                                                            <input type="hidden" name="tax2[]" class="tax2_rate" value="">
                                                            <input type="hidden" name="tax3[]" class="tax3_rate" value="">
        
                                                            <!-- tax-id inputs: -->
                                                            <input type="hidden" name="tax_id[]" class="tax_id" value="">
                                                            <input type="hidden" name="tax2_id[]" class="tax2_id" value="">
                                                            <input type="hidden" name="tax3_id[]" class="tax3_id" value="">
        
                                                            <div style="position: relative;">
        
                                                                <div class="downarrow currentTax" onclick="focusTaxSelect(this)"
                                                                    style="font-size: 13px;
            padding: 5px; font-family: verdana; color:silver" data-groupid=>
        
                                                                    <span class="jtaxTotal">0.00% </span>
                                                                    <img class="jActiveTax" src="images/dropdown_none.png">
                                                                    <img class="jInactiveTax" style="display:none"
                                                                        src="images/dropdown_none_grey.png">
        
                                                                </div>
        
                                                                <div style="position: absolute; left:0; top:100%; max-width:180px; display:none; z-index:2; white-space:nowrap"
                                                                    class="dropdown-sel">
        
                                                                    <ul class="tax_dropdown"
                                                                        style="font-family:verdana, sans-serif;">
                                                                        <li style="border-bottom:1px solid #d2d2d2;">
                                                                            <label><input onclick="changeTaxSelect(this);"
                                                                                    type="checkbox" class="NoTax" data-tax="0"
                                                                                    checked><span>No Tax</span></label></li>
        
                                                                        <!--Tax components: -->
        
                                                                        <li style="border-top:1px solid #d2d2d2;"><label><input
                                                                                    onclick="changeTaxSelect(this);"
                                                                                    type="checkbox" class="NewTax"><span>New
                                                                                    Tax</span></label></li>
                                                                    </ul>
        
                                                                </div>
        
                                                            </div>
        
                                                        </td>
                                                        <td class="invoiceDataTax_hidden"> <input>
                                                            <!-- Empty td-input to mimic TAX2 --> </td>
        
        
        
        
                                                        <td class="invoiceDataAmount">
        
                                                            <div style="position: absolute;width: 88px;height: 32px;"
                                                                onclick="alert('The amount is calculated automatically as soon as you have entered something into both the unit price and the quantity field.\n\nExample: If you wish to invoice a service for $100.00, you should enter 100.00 in the unit price field and 1.00 in the quantity field.')">
                                                            </div>
                                                            <input name="total[]" id="total[]" type=text autocomplete="nope"
                                                                readonly class="inputInvoiceDataAmount" value="0.00">
        
                                                        </td>
        
                                                    </tr>
        
        
                                                    <tr class="invoiceDataHeadRow">
                                                        <input type=hidden name='lineid[]' id='lineid[]' value='1'>
                                                        <input type=hidden name='isdirty[]' id='isdirty[]' value='0'>
                                                        <input type=hidden name='numRows' id='numRows' value='2'>
        
                                                        <td class="invoiceDataDelete">
                                                            <img style="" onclick="zapthisrow(this,'dataTable');" border=0
                                                                title="Delete Line" src="images/delete_item.gif">
                                                        </td>
        
        
                                                        <td class="invoiceDataItem">
        
                                                            <select onfocus="invoiceForm_changeBackground(this,'#FFFADC');"
                                                                onfocusin="objSelected=this; invoiceForm_changeBackground(this,'#FFFADC');"
                                                                onblur="invoiceForm_changeBackground(this,'#FFFFFF');"
                                                                name="item[]" id="itemSelect1" class="inputInvoiceDataItem ">
        
                                                                <option value="" selected="selected"></option>
                                                                <option value="Days">Days</option>
                                                                <option value="Hours">Hours</option>
                                                                <option value="Product">Product</option>
                                                                <option value="Service">Service</option>
                                                                <option value="Expense">Expense</option>
                                                                <option value="Discount_aynax">Discount</option>
                                                            </select>
                                                            <input type="hidden" name="expense_category[]"
                                                                value="Other Expenses">
        
                                                        </td>
        
        
        
                                                        <td class="invoiceDataDescription">
        
        
        
        
        
                                                            <textarea name="description[]" id="description[]" rows=1 cols=40
                                                                class="inputInvoiceDataDescription"
                                                                onfocus="invoiceForm_changeBackground(this,'#FFFADC');"
                                                                onblur="invoiceForm_changeBackground(this,'#FFFFFF');"
                                                                onkeyup="sz(this);"></textarea>
                                                            <input type="hidden" name="expense_id[]" value="">
                                                            <input type="hidden" name="project_id[]" value="0">
                                                            <input type="hidden" name="hour_id[]" value="0">
                                                            <input type="hidden" class="jPaymentId" name="payment_id[]"
                                                                value="0">
        
        
                                                        </td>
        
        
                                                        <td class="invoiceDataPriceOrQty">
                                                            <input name="unit_price[]" id="unit_price[]" type=text
                                                                autocomplete="nope" class="inputInvoiceDataPriceOrQty"
                                                                style="color:silver;" onkeyup="sanitizeInvoiceLineValues(this);"
                                                                onblur="invoiceForm_changeBackground(this,'#FFFFFF');forceDiscountNegative(this);checkIfEmpty(this);reCalculate(this, 'dataTable', this.value);"
                                                                onfocus="valueItemFocus(this)" value="0.00">
                                                        </td>
        
                                                        <td class="invoiceDataPriceOrQty">
        
                                                            <input name="qty[]" id="qty[]" type=text autocomplete="nope"
                                                                class="inputInvoiceDataPriceOrQty" style="color:silver;"
                                                                onkeyup="sanitizeInvoiceLineValues(this);"
                                                                onblur="invoiceForm_changeBackground(this,'#FFFFFF');checkIfEmpty(this);reCalculate(this, 'dataTable', this.value);"
                                                                onfocus="valueItemFocus(this)" value="0.00">
        
                                                        </td>
        
        
        
        
        
                                                        <td class="tax1 invoiceDataTax_hidden" style="">
        
                                                            <!-- Note: The first input of class 'tax1' must be the total tax in order for the recalculate function in javascript.js to work.  -->
                                                            <input name="tax_total[]" id="tax_total[]" class="tax_total"
                                                                type="hidden" value="0.00">
        
                                                            <!-- tax inputs - for saving separate tax rates in invoice_line -->
                                                            <input type="hidden" name="tax[]" class="tax_rate" value="">
                                                            <input type="hidden" name="tax2[]" class="tax2_rate" value="">
                                                            <input type="hidden" name="tax3[]" class="tax3_rate" value="">
        
                                                            <!-- tax-id inputs: -->
                                                            <input type="hidden" name="tax_id[]" class="tax_id" value="">
                                                            <input type="hidden" name="tax2_id[]" class="tax2_id" value="">
                                                            <input type="hidden" name="tax3_id[]" class="tax3_id" value="">
        
                                                            <div style="position: relative;">
        
                                                                <div class="downarrow currentTax" onclick="focusTaxSelect(this)"
                                                                    style="font-size: 13px;
            padding: 5px; font-family: verdana; color:silver" data-groupid=>
        
                                                                    <span class="jtaxTotal">0.00% </span>
                                                                    <img class="jActiveTax" src="images/dropdown_none.png">
                                                                    <img class="jInactiveTax" style="display:none"
                                                                        src="images/dropdown_none_grey.png">
        
                                                                </div>
        
                                                                <div style="position: absolute; left:0; top:100%; max-width:180px; display:none; z-index:2; white-space:nowrap"
                                                                    class="dropdown-sel">
        
                                                                    <ul class="tax_dropdown"
                                                                        style="font-family:verdana, sans-serif;">
                                                                        <li style="border-bottom:1px solid #d2d2d2;">
                                                                            <label><input onclick="changeTaxSelect(this);"
                                                                                    type="checkbox" class="NoTax" data-tax="0"
                                                                                    checked><span>No Tax</span></label></li>
        
                                                                        <!--Tax components: -->
        
                                                                        <li style="border-top:1px solid #d2d2d2;"><label><input
                                                                                    onclick="changeTaxSelect(this);"
                                                                                    type="checkbox" class="NewTax"><span>New
                                                                                    Tax</span></label></li>
                                                                    </ul>
        
                                                                </div>
        
                                                            </div>
        
                                                        </td>
                                                        <td class="invoiceDataTax_hidden"> <input>
                                                            <!-- Empty td-input to mimic TAX2 --> </td>
        
        
        
        
                                                        <td class="invoiceDataAmount">
        
                                                            <div style="position: absolute;width: 88px;height: 32px;"
                                                                onclick="alert('The amount is calculated automatically as soon as you have entered something into both the unit price and the quantity field.\n\nExample: If you wish to invoice a service for $100.00, you should enter 100.00 in the unit price field and 1.00 in the quantity field.')">
                                                            </div>
                                                            <input name="total[]" id="total[]" type=text autocomplete="nope"
                                                                readonly class="inputInvoiceDataAmount" value="0.00">
        
                                                        </td>
        
                                                    </tr>
        
        
        
        
                                                </tbody>
        
        
        
                                                <!-- TB 4 -->
        
                                            </table>
        
        
        
                                        </td>
                                    </tr>
        
        
        
        
        
                                    <tr>
                                        <td style="padding-top:10px;margin:0px;text-align:left;">
        
        
                                            <button type="button" onclick="newLineClick()"
                                                style="display:inline-block; cursor: pointer; padding:3px 11px 4px 5px; font-size:11px; text-align: center; white-space: nowrap; font-family: sans-serif; line-height: 16px; border: 1px solid #aaaaaa; border-radius: 3px; background-color: #ffffff; background-image: linear-gradient(to bottom, #ffffff, #ffffff 33%, #ececec); color: #3c3c3c;">
                                                <img style="vertical-align:middle" src="images/icons/plus.svg" alt=""> <span
                                                    style="line-height: 12px; position: relative; top: 1px;">New
                                                    Line</span></button>
        
        
        
        
        
                                        </td>
        
                                    </tr>
        
        
        
                                    <tr>
                                        <td>&nbsp;</td>
                                    </tr>
        
                                    <tr>
                                        <td>&nbsp;</td>
                                    </tr>
        
        
        
                                    <tr>
        
                                        <td>
        
                                            <!-- TB 4 -->
        
                                            <table border=0 cellpadding=0 cellspacing=0>
        
        
        
                                                <tr>
        
                                                    <td style="width:500px;vertical-align:top;">
        
        
        
                                                        <!-- TB 5 -->
        
                                                        <table border=0 cellspacing=0 cellpadding=0>
        
        
        
                                                            <tr>
                                                                <td
                                                                    style="width:110px;padding-left:2px; font-family:verdana; font-size:13px; color:#3c3c3c; font-weight:bold;">
                                                                    Invoice&nbsp;Notes </td>
        
        
                                                                <td style="padding-top:5px;">
        
                                                                    <span id="edit_notes_name"
                                                                        onmouseout="document.getElementById('edit_notes_msg').style.display='none';"
                                                                        onmouseover="document.getElementById('edit_notes_msg').style.display='';"
                                                                        onclick="edit_default_notes('invoice'); bind_notes_counter();"
                                                                        style="cursor:pointer;"><img
                                                                            style="padding-left:3px;vertical-align:bottom;margin-bottom:1px;"
                                                                            src="images/edit_customer.png"></span>
                                                                    <span id="edit_notes_msg"
                                                                        style="display:none;font-size:11px;padding:7px; position:absolute;width:190px;background:#EFF7FA; border:1px solid #cccccc; color:black; font-weight:normal;font-family:verdana;">Click
                                                                        here to edit the default notes. The default notes are
                                                                        automatically added to all new
                                                                        invoices.</span>
                                                                    <span id="edit_notes_msg_save"
                                                                        style="display:none;font-size:11px;padding:7px; position:absolute;width:190px;background:#EFF7FA; border:1px solid #cccccc; color:black; font-weight:normal;font-family:verdana;">Click
                                                                        outside the field to save the default notes</span>
        
                                                                </td>
        
                                                            </tr>
        
                                                            <tr>
        
                                                                <td colspan=2 style="padding-top:3px;">
        
                                                                    <textarea id="invoice_notes" name="invoice_notes"
                                                                        class="invoiceForm_fromNameTD"
                                                                        onfocus="this.className='invoiceForm_fromNameTD_onFocus';"
                                                                        onblur="this.className='invoiceForm_fromNameTD';" rows=6
                                                                        cols=60
                                                                        style="width:430px; overflow:auto; outline:none; padding:5px; font-weight:normal; font-family:verdana;font-size:13px;color:#3c3c3c;"></textarea>
        
                                                                </td>
        
        
        
                                                            </tr>
        
                                                            <!-- TB 5 -->
        
                                                        </table>
        
                                                    </td>
        
                                                    <td style="width:1px;">
        
                                                        &nbsp;
        
                                                    </td>
        
        
        
                                                    <td style="vertical-align:top;">
        
                                                        <!-- TB 5 -->
        
                                                        <table id="table_sums" border=0 cellpadding=0 cellspacing=0>
        
        
        
                                                            <tr>
                                                                <td>&nbsp;</td>
                                                            </tr>
        
        
        
        
                                                            <tr>
        
                                                                <td style="width:15px; border-top:2px solid #eaedee;">&nbsp;
                                                                </td>
        
                                                                <td id="subtotal_label"
                                                                    style="width:200px; border-top:2px solid #eaedee;font-family:verdana; font-size:13px; color:#3c3c3c; font-weight:bold;padding-top:6px;padding-bottom:3px;">
        
                                                                    Subtotal
                                                                </td>
        
                                                                <td
                                                                    style="text-align:right;padding-right:4px;border-right:1px solid white;border-top:2px solid #eaedee;border-left:1px solid white;padding-top:6px;padding-bottom:3px;">
        
                                                                    <input id="sum_subtotal"
                                                                        onclick="alert('The subtotal is calculated automatically as soon as you have entered something into both the unit price and the quantity field in the lines above.\n\nExample: If you wish to invoice a service for $100.00, you should enter 100.00 in the unit price field and 1.00 in the quantity field.')"
                                                                        style="border:0px solid white;text-align:right; width:100px; padding-right:5px; font-weight:normal; font-family:verdana;font-size:13px;color:#3c3c3c;"
                                                                        readonly type=text name="sum_subtotal" value="0.00">
        
                                                                </td>
        
                                                            </tr>
        
        
        
        
        
        
        
        
                                                            <tr id="sum_blankSubtotalTR" style="height:3px;display:none;">
                                                                <td></td>
                                                            </tr>
        
        
        
                                                            <tr id="sum_discountTR" style="display:none;">
        
                                                                <td style="width:0px;"></td>
        
                                                                <td id="discount_label"
                                                                    style="width:200px; font-family:verdana; font-size:11px; color:#3c3c3c; padding-left:10px;padding-bottom:1px;">
                                                                    - Discount </td>
                                                                <td align=right>
                                                                    <table border=0 cellpadding=0 cellspacing=0
                                                                        style="width:70px;">
        
                                                                        <tr>
                                                                            <td>&nbsp;</td>
                                                                            <td class="invoiceForm_fromNameTD"
                                                                                id="sum_discountTD"
                                                                                style="border:0px solid white; text-align:right;padding-right:4px;padding-bottom:1px;"
                                                                                onclick="alert('The discount is calculated automatically as the sum of all amounts from invoice lines with item discount above.')">
        
        
                                                                                <input id="sum_discount" autocomplete="nope"
                                                                                    style="outline:none; border:1px solid white;text-align:right; width:70px; padding-right:5px; font-family:verdana;font-size:13px;color:#3c3c3c;"
                                                                                    type=text name="sum_discount"
                                                                                    onkeyup="sanitizeInvoiceLineValues(this);"
                                                                                    readonly value="0.00">
        
                                                                            </td>
        
                                                                        </tr>
        
                                                                    </table>
        
                                                                </td>
        
                                                            </tr>
        
        
        
                                                            <tr id="sum_blankAfterDiscountOrTaxTR" style="height:7px;">
                                                                <td></td>
                                                            </tr>
        
        
                                                            <tr>
        
                                                                <td style="width:15px; border-top:2px solid #eaedee;">&nbsp;
                                                                </td>
        
                                                                <td id="total_label"
                                                                    style="border-top:2px solid #eaedee;font-family:verdana; font-size:13px; color:#3c3c3c; font-weight:bold;padding-top:7px;">
        
                                                                    Total
                                                                </td>
        
                                                                <td
                                                                    style="padding-top:7px; text-align:right;padding-right:4px;border-right:1px solid white;border-top:2px solid #eaedee;border-left:1px solid white;">
        
                                                                    <input
                                                                        onclick="alert('The total is calculated automatically as soon as you have entered something into both the unit price and the quantity field in the lines above.\n\nExample: If you wish to invoice a service for $100.00, you should enter 100.00 in the unit price field and 1.00 in the quantity field.')"
                                                                        style="border:0px solid white;text-align:right; width:100px; padding-right:5px; font-weight:normal; font-family:verdana;font-size:13px;color:#3c3c3c;"
                                                                        readonly type=text name="sum_total" id="sum_total"
                                                                        value="0.00">
        
                                                                </td>
        
                                                            </tr>
        
        
        
        
                                                            <tr>
        
                                                                <td style="width:15px; border-top:0px solid #eaedee;">&nbsp;
                                                                </td>
        
                                                                <td id="amount_paid_label"
                                                                    style="border-top:0px solid #eaedee;font-family:verdana; font-size:13px; color:#3c3c3c; font-weight:bold;">
        
                                                                    Amount Paid
                                                                </td>
        
                                                                <td
                                                                    style="padding-bottom:7px;text-align:right;padding-right:4px;border-right:1px solid white;border-top:0px solid #eaedee;border-left:1px solid white;">
                                                                    <input
                                                                        onclick="alert('To enter the amount paid, first save your invoice. Thereafter click the button [Mark as Paid] directly above the invoice form.')"
                                                                        style="border:0px solid white;text-align:right; width:100px; padding-right:5px; font-weight:normal; font-family:verdana;font-size:13px;color:#3c3c3c;"
                                                                        readonly type=text name="amount_paid" id="amount_paid"
                                                                        value="0.00">
                                                                </td>
        
                                                            </tr>
        
        
        
        
                                                            <tr style="background-color:#FBFF9E;">
        
                                                                <td
                                                                    style="background-color:#FBFF9E;width:15px; border-top:2px solid #eaedee;">
                                                                    &nbsp;</td>
        
                                                                <td id="balance_due_label"
                                                                    style="background-color:#FBFF9E;width:200px; border-top:2px solid #eaedee;font-family:verdana; font-size:13px; color:#3c3c3c; font-weight:bold;padding-top:7px;padding-bottom:7px;">
                                                                    Balance Due&nbsp;<span id="currency_code_output"
                                                                        style="font-family:verdana; font-size:13px; color:#3c3c3c; font-weight:normal;"></span>
                                                                </td>
        
                                                                <td
                                                                    style="background-color:#FBFF9E;text-align:right;padding-right:4px;border-right:1px solid white;border-top:2px solid #eaedee;border-left:1px solid #FBFF9E;">
        
                                                                    <input
                                                                        onclick="alert('The balance due is calculated automatically as soon as you have entered something into both the unit price and the quantity field in the lines above.\n\nExample: If you wish to invoice a service for $100.00, you should enter 100.00 in the unit price field and 1.00 in the quantity field.')"
                                                                        style="background-color:#FBFF9E;border:0px solid white;text-align:right; width:100px; padding-right:5px; font-weight:normal; font-family:verdana;font-size:13px;color:#3c3c3c;"
                                                                        readonly type=text name=balance_due id=balance_due
                                                                        value="$">
        
                                                                </td>
        
                                                            </tr>
        
        
        
        
        
                                                            <!-- TB 5 -->
        
                                                        </table>
        
                                                    </td>
        
                                                </tr>
        
        
        
                                                <tr>
                                                    <td>&nbsp;</td>
                                                </tr>
        
        
        
                                                <!-- TB 4 -->
        
                                            </table>
        
                                        </td>
        
        
        
        
        
                            </td>
        
        
        
                        </tr>
        
        
        
                        <!-- TB 3 -->
        
                    </table>
        
                    </td>
        
        
        
                    </tr>
        
                    <!-- TB 2 -->
        
                    </table>
        
                    <!-- Dummy input as the last input to invoice form in order to verify that all of $_POST is successfully posted-->
                    <input type=hidden id="lastInvoiceFormInput" name="lastInvoiceFormInput" value="POST_OK">
        
                </form>
        
                <br><br><br><br>
                <input type=hidden id='deletedRowIdList' name='deletedRowIdList' value=''>
        
        
        
                <script type="text/javascript" src='/javascript/jquery.jqEasyCharCounter.js'></script>
                <script type="text/javascript" src='/javascript/moment.js'></script>
                <script type="text/javascript" src="/javascript/jquery.fancybox.js"></script>
                <link rel=stylesheet href="css/jquery.fancybox.css" type="text/css" media=screen>
        
                <script type="text/javascript">
                    var logoBrowseExperiment29 = false; var itemExpenseOpened = null;
                    var initialExpensesLoaded = false;
                    var jsonItemList = '{"":"","Days":"Days","Hours":"Hours","Product":"Product","Service":"Service","Expense":"Expense","Discount_aynax":"Discount"}';
                    jsonItemList = (jsonItemList) ? $.parseJSON(jsonItemList) : {};

                    $(function () {


                        //Hide tax-dropdown upon event-click elsewhere:
                        $(document).on("click", function (event) {
                            if (!$(event.target).closest('.currentTax').length && !$(event.target).closest('.tax_dropdown').length && !$(event.target).closest('#salesTaxModal').length && !$(event.target).closest('.autocomplete-suggestions').length) {

                                $('.dropdown-sel').hide();
                                $('.currentTax').css('background-color', '#FFFFFF');


                            }
                        });



                        bindExpenseDialog();

                        $(document).mouseup(function (e) {
                            var container = $(".drop-down-line");
                            var containerUl = $(".drop-down-line ul");

                            if (!$(e.target).hasClass('dropdown-label') && container.has(e.target).length == 0 && (containerUl.has(e.target).length === 0 && container.hasClass('show-menu'))) {

                                container.removeClass('show-menu');
                                $('.submenu-expense-dropdown').hide();

                            }

                        });




                    });

                    function customization_toggleTax(obj) {


                        /* save value inside the invoice form */
                        if (document.getElementById('customization_save_tax') != null && obj.checked) document.getElementById('customization_save_tax').value = 'on';
                        if (document.getElementById('customization_save_tax') != null && !obj.checked) document.getElementById('customization_save_tax').value = '';

                        //Toggle tax column
                        $.each($('.tax1'), function (i, obj) {

                            if ($(obj).hasClass('invoiceDataTax_visible')) $(obj).removeClass('invoiceDataTax_visible').addClass('invoiceDataTax_hidden');
                            else if ($(obj).hasClass('invoiceDataTax_hidden')) $(obj).removeClass('invoiceDataTax_hidden').addClass('invoiceDataTax_visible');

                            $(obj).find('.NoTax').click().attr('checked', true);;

                        });

                        //Toggle description classes
                        $.each($('.invoiceDataDescription'), function (i, obj) {

                            cell = $(obj).find("textarea");
                            if (cell.hasClass('inputInvoiceDataDescription')) cell.removeClass('inputInvoiceDataDescription').addClass('inputInvoiceDataDescription_wTAX');
                            else if (cell.hasClass('inputInvoiceDataDescription_wTAX')) cell.removeClass('inputInvoiceDataDescription_wTAX').addClass('inputInvoiceDataDescription');

                        });

                        //Toggle unit price and qty classes
                        $.each($('.invoiceDataPriceOrQty'), function (i, obj) {

                            cell = $(obj).find("input");
                            if (cell.hasClass('inputInvoiceDataPriceOrQty')) cell.removeClass('inputInvoiceDataPriceOrQty').addClass('inputInvoiceDataPriceOrQty_wTAX');
                            else if (cell.hasClass('inputInvoiceDataPriceOrQty_wTAX')) cell.removeClass('inputInvoiceDataPriceOrQty_wTAX').addClass('inputInvoiceDataPriceOrQty');

                        });

                        //Toggle amount classes
                        $.each($('.invoiceDataAmount'), function (i, obj) {

                            cell = $(obj).find("input");
                            if (cell.hasClass('inputInvoiceDataAmount')) cell.removeClass('inputInvoiceDataAmount').addClass('inputInvoiceDataAmount_wTAX');
                            else if (cell.hasClass('inputInvoiceDataAmount_wTAX')) cell.removeClass('inputInvoiceDataAmount_wTAX').addClass('inputInvoiceDataAmount');

                        });

                        //Toggle tax column header
                        if ($('#topRowTax').css('display') == "none") $('#topRowTax').css('display', '');
                        else $('#topRowTax').css('display', 'none');

                        //Toggle show tax column on invoice template. 
                        if (obj.checked) $('.showTaxColumn').css('display', '');
                        else $('.showTaxColumn').css('display', 'none');

                        reCalculateTax('dataTable');

                    }

                    function bindExpenseDialog() {
                        $('select.inputInvoiceDataItem').change(function () {

                            var self = $(this);
                            var selectedOption = self.find(":selected");



                            if (selectedOption.val() == 'Expense' && !selectedOption.data('invoiced')) {

                                $("#addNewExpenseModal").show();

                                itemExpenseOpened = self;

                                if (!initialExpensesLoaded) {

                                    loadListExpenses();

                                    initialExpensesLoaded = true;
                                }

                                $('#listExpensesModal').show();

                                $('#listNoExpensesModal').hide();

                            }




                            if (selectedOption.val() == 'Discount_aynax') {

                                //Recalculate totals						
                                id = $(this).closest("tr").index() - 1;
                                new_unit_price = (-1) * Math.abs(parseFloat(document.getElementsByName("unit_price[]")[id].value));
                                new_qty = Math.abs(parseFloat(document.getElementsByName("qty[]")[id].value));

                                //Set tax to No tax. 
                                NoTaxSelector = self.closest("tr").find(".tax_dropdown :input").first();
                                NoTaxSelector.click(); //NOTE: This will run reCalculate and remove any tax from the totals.
                                NoTaxSelector.attr("checked", true);

                                //Zero the line and recalculate the totals before inserting Discount line:
                                self.val("");
                                document.getElementsByName("unit_price[]")[id].value = "0.00";
                                reCalculate(this, 'dataTable', '0.00')

                                //Insert Discount line:
                                self.val("Discount_aynax");
                                document.getElementsByName("unit_price[]")[id].value = new_unit_price.toFixed(2);
                                document.getElementsByName("qty[]")[id].value = new_qty.toFixed(2);

                                //Make tax inactive
                                self.closest('tr').find('.currentTax').removeClass("currentTax").removeAttr("onclick");
                                self.closest('tr').find('img.jActiveTax').hide();
                                self.closest('tr').find('img.jInactiveTax').show();

                                reCalculate(this, 'dataTable', '0.00')

                                //Lock items for this line to Discount:
                                self.html('<option value="Discount_aynax">Discount</option>')

                                //Display total discount field:				
                                var obj = Object();
                                obj.id = "customization_discount";
                                obj.fromInvoiceLine = true;
                                obj.checked = true;
                                customization_toggleFields(obj);


                            }



                        });

                    }


                    function restoreExpenseLine(node) {

                        var expenseId = $(node).data('expense_id') || 0;

                        $('.expense-row-' + expenseId).show().addClass('expense-available');



                    }

                    function updateItemList(selObj) {

                        selObj.find('option').remove();

                        $.each(jsonItemList, function (value, text) {
                            var opt = new Option(text, value);
                            selObj.get(0).add(opt);
                        });

                    }

                    function addProductsClick() {

                        $("#invoice_form").submit(function (e) {

                            var url = "listProducts.php"; // the script where you handle the form input.

                            $.ajax({
                                type: "POST",
                                url: url,
                                //data: $("#idForm").serialize(), // serializes the form's elements.
                                success: function (data) {
                                    alert(data); // show response from the php script.
                                }
                            });

                            e.preventDefault(); // avoid to execute the actual submit of the form.
                        });
                    }

                    function newLineClick() {

                        addRow('dataTable');
                        //Last row is recently added
                        updateItemList($('#dataTable').find('tbody tr:last-child').find('td.invoiceDataItem select'));
                        bindEnterKey();
                        bind_description_counter();
                        rebindRows();
                        bindExpenseDialog();

                        //Make sure to remove readonly (in case copied row has item Payment_aynax):
                        $('#dataTable').find('tbody tr:last-child').find('.invoiceDataPriceOrQty input').attr("readonly", false);

                        //Make sure to Activate tax (in case row copied has item Discount_aynax):
                        $('#dataTable').find('tbody tr:last-child').find('div.downarrow').addClass("currentTax");
                        $('#dataTable').find('tbody tr:last-child').find('div.downarrow').attr("onclick", "focusTaxSelect(this)");
                        $('#dataTable').find('tbody tr:last-child').find('img.jActiveTax').show();
                        $('#dataTable').find('tbody tr:last-child').find('img.jInactiveTax').hide();

                        //Add pricelist dropdown			



                    }

                    function bindEnterKey() {
                        $('input,.inputInvoiceDataItem,#to_name,#invoice_heading_copy').unbind('keydown').keydown(function (e) {
                            if (e.keyCode == 13) {
                                if (e.target.id == 'from_name') $('#from_address').focus();
                                else if (e.target.id == 'to_name') {
                                    if ($('#to_new_customer').is(":visible")) $('#to_new_customer').focus();
                                    else $('#to_address').focus();
                                } else if (e.target.id == 'to_new_customer') $('#to_address').focus();
                                else if (e.target.id == 'sum_discount') { $('#invoice_notes').focus(); }
                                else if (e.target.id == 'invoice_heading_copy') {
                                    $('#invoice_number').focus();
                                } else if (e.target.id == 'invoice_number') {
                                    if ($('#po_number').is(":visible")) $('#po_number').focus();
                                    else $('#invoice_date').focus();
                                } else if (e.target.id == 'po_number') {
                                    $('#invoice_date').focus();
                                } else if (e.target.id == 'invoice_date') {
                                    if ($('#payment_due_date').is(":visible")) $('#payment_due_date').focus();
                                    else {
                                        $('#item\\[\\]:first').focus();
                                        $('#ui-datepicker-div').remove();
                                    }
                                } else if (e.target.id == 'payment_due_date') {
                                    $("#payment_due_date").datepicker("hide");
                                    $('#ui-datepicker-div').remove();
                                    $('#item\\[\\]:first').focus();
                                } else if (e.target.id == 'item[]') {
                                    $(e.target).closest('tr').find('#description\\[\\]').focus();
                                } else if (e.target.id == 'unit_price[]') {
                                    $(e.target).closest('tr').find('#qty\\[\\]').focus();
                                } else if (e.target.id == 'qty[]') {
                                    if ($(e.target).closest('tr').find('#tax\\[\\]').parent().css('display') == 'none'
                                        && $(e.target)[0] == $('.inputInvoiceDataPriceOrQty:visible:last')[0]
                                        && $('#sum_discountTR').css('display') != 'none') {
                                        $('#sum_discount').focus();
                                    } else if ($(e.target).closest('tr').find('#tax\\[\\]').parent().css('display') == 'none'
                                        && $(e.target)[0] == $('.inputInvoiceDataPriceOrQty:visible:last')[0]) {
                                        $('#invoice_notes').focus();
                                    } else if ($(e.target).closest('tr').find('#tax\\[\\]').parent().css('display') == 'none') {
                                        $(e.target).closest('tr').next('tr').find('#item\\[\\]').focus();
                                    } else {
                                        $(e.target).closest('tr').find('#tax\\[\\]').focus();
                                    }
                                } else if (e.target.id == 'tax[]') {
                                    if ($(e.target).closest('tr').find('#tax2\\[\\]').parent().css('display') == 'none'
                                        && $(e.target)[0] == $('.inputInvoiceDataTax:visible:last')[0]
                                        && $('#sum_discountTR').css('display') != 'none') {
                                        $('#sum_discount').focus();
                                    } else if ($(e.target).closest('tr').find('#tax2\\[\\]').parent().css('display') == 'none'
                                        && $(e.target)[0] == $('.inputInvoiceDataTax:visible:last')[0]) {
                                        $('#invoice_notes').focus();
                                    } else if ($(e.target).closest('tr').find('#tax2\\[\\]').parent().css('display') == 'none') {
                                        $(e.target).closest('tr').next('tr').find('#item\\[\\]').focus();
                                    } else {
                                        $(e.target).closest('tr').find('#tax2\\[\\]').focus();
                                    }
                                } else if (e.target.id == 'tax2[]') {
                                    if ($(e.target)[0] == $('.inputInvoiceDataTax:last')[0]
                                        && $('#sum_discountTR').css('display') != 'none') {
                                        $('#sum_discount').focus();
                                    } else if ($(e.target)[0] == $('.inputInvoiceDataTax:visible:last')[0]) {
                                        $('#invoice_notes').focus();
                                    }
                                    else $(e.target).closest('tr').next('tr').find('#item\\[\\]').focus();
                                }
                                else return true;

                                e.preventDefault();

                                return false;
                            }
                        });
                    }

                    function dueAfterInvoice() {
                        var format = $('#customization_date_format').val().toUpperCase();
                        if (format == 'YY-MM-DD') format = "YY" + format;
                        else format += "YY";
                        var startmoment = moment($('#invoice_date').val(), format);
                        var endmoment = moment($('#payment_due_date').val(), format);

                        if (startmoment > endmoment) {
                            $('#payment_due_date').attr("disabled", "disabled").val($('#invoice_date').val()).removeAttr("disabled");
                        }
                    }

                    function invoiceBeforeDue() {
                        var format = $('#customization_date_format').val().toUpperCase();
                        if (format == 'YY-MM-DD') format = "YY" + format;
                        else format += "YY";
                        var startmoment = moment($('#invoice_date').val(), format);
                        var endmoment = moment($('#payment_due_date').val(), format);

                        if (startmoment > endmoment) {
                            $('#invoice_date').attr("disabled", "disabled").val($('#payment_due_date').val()).removeAttr("disabled");
                        }
                    }

                    function valueItemFocus(obj) {
                        $(obj).css('background-color', '#FFFADC');
                        $(obj).closest('td').css('background-color', '#FFFADC');
                        if (obj.value == '0.00') {
                            obj.value = '';
                            obj.style.color = '#3c3c3c';
                        }
                    }

                    function deleteCurrentRow() {
                        zapthisrow($(currentSwapRow)[0], 'dataTable');

                        // append to list
                        var lineid = $(currentSwapRow).find('input#lineid\\[\\]').val();
                        $('#deletedRowIdList').val(function (i, val) {
                            return val + (!val ? '' : ', ') + lineid;
                        });
                    }

                    var rowSelected = '';
                    var colSelected = '';

                    var mouseIsDown = false;
                    function startHighlightRow() {
                        if (rowDragging) return;
                        highlightStopped = false;
                        checkFocusSelection();
                        $('.invoiceDataHeadRow').find('td,input,select,textarea').css('background-color', 'white');
                        $(currentSwapRow).find('.invoiceDataAmount, #total\\[\\]').css('background-image', 'none');
                        $(currentSwapRow).find('td,input,select,textarea').css('background-color', 'rgb(255, 250, 220)');
                    }

                    var highlightStopped = false;
                    function stopHighlightRow() {
                        if (highlightStopped) return;
                        highlightStopped = true;
                        $('.invoiceDataHeadRow').find('td,input,select,textarea').css('background-color', 'white');
                        $('.invoiceDataAmount').css('background-color', '#eaedee').css('background-color', 'url(images/grey.png)');
                        $('.invoiceDataHeadRow').find('.invoiceDataAmount, #total\\[\\]').attr('style', '');
                        returnSelectedItem();
                    }

                    function getSelectedItem() {
                        var adjcol = colSelected.replace(/\[\]/g, "\\[\\]");
                        var focusId = null;
                        $('.invoiceDataHeadRow #lineid\\[\\]').each(function () {
                            if ($(this).val() == rowSelected) {
                                focusId = $(this);
                            }
                        });

                        var searchRow = $(focusId).closest('tr');
                        return searchRow.find('#' + adjcol);
                    }

                    var selectedIsDifferentRow = false;
                    function checkFocusSelection() {
                        if (rowSelected == '' || colSelected == '') return;
                        var sel = getSelectedItem();
                        selectedIsDifferentRow = $(sel).closest('tr').find('#lineid\\[\\]').val() != $(currentSwapRow).find('#lineid\\[\\]').val();
                        var color = sel.css('background-color');
                        if (color != "rgb(255, 250, 220)") {
                            rowSelected = '';
                            colSelected = '';
                        }
                    }

                    function returnSelectedItem() {
                        if (rowSelected == '' || colSelected == '') return;
                        var sel = getSelectedItem();
                        if (selectedIsDifferentRow) {
                            $(':focus').focus();
                        } else {
                            sel.focus();
                        }
                    }

                    var currentSwapRow = null;
                    var rowDragging = false;


                    var lineIconTimeoutId = null;

                    function rebindRows() {
                    }
                    rebindRows();


                    function hidelineIcons() {
                        window.clearTimeout(lineIconTimeoutId);
                        $('#deleteLine').css('background-image', 'none');
                        $('#swapLine').css('background-image', 'none');
                    }

                    function swapRows(element, goingUp) {

                        $('#swapOccurred').val(1);

                        var rowElement = $(currentSwapRow);

                        var lineElementSrc = $(rowElement).find('#lineid\\[\\]');

                        var lineElementDest = $(rowElement).next().find('#lineid\\[\\]');
                        if (goingUp)
                            lineElementDest = $(rowElement).prev().find('#lineid\\[\\]');

                        if (lineElementDest.length > 0) {
                            if (goingUp) {
                                jQuery(rowElement).prev().before(jQuery(rowElement));
                                $(rowElement).find('textarea,input,tr,td,select').css('background-color', 'rgb(255, 250, 220)');
                                $(rowElement).next().find('textarea,input,tr,td,select').css('background-color', 'white');
                            } else {
                                jQuery(rowElement).next().after(jQuery(rowElement));
                                $(rowElement).find('textarea,input,tr,td,select').css('background-color', 'rgb(255, 250, 220)');
                                $(rowElement).prev().find('textarea,input,tr,td,select').css('background-color', 'white');
                            }

                            var temp = lineElementDest.val();
                            lineElementDest.val(lineElementSrc.val());
                            lineElementSrc.val(temp);
                            rowSelected = temp;
                        }
                    }



                    $('#default_notes_textarea, #to_address, #from_address').jqEasyCounter({
                        'maxChars': 1000,
                        'maxCharsWarning': 980,
                        'msgFontSize': '10px',
                        'msgFontColor': 'silver',
                        'msgFontFamily': 'Arial',
                        'msgTextAlign': 'right',
                        'msgWarningColor': 'red',
                        'msgAppendMethod': 'insertAfter',
                        'allocateSpace': false,
                        'showWarning': true
                    });

                    function bind_description_counter() {
                        $('.invoiceDataHeadRow #description\\[\\]').jqEasyCounter({
                            'maxChars': 10000,
                            'maxCharsWarning': 9800,
                            'msgFontSize': '10px',
                            'msgFontColor': 'silver',
                            'msgFontFamily': 'Arial',
                            'msgTextAlign': 'right',
                            'msgWarningColor': 'red',
                            'msgAppendMethod': 'insertAfter',
                            'allocateSpace': true,
                            'showWarning': false,
                            'alertText': "You have reached the maximum number of characters this field can hold (MAXCHAR characters).\n\nYou can enter the rest of the description in the line\nbelow (you don't have to enter anything in the unit price and quantity fields)."
                        });
                    }
                    bind_description_counter();

                    function bind_notes_counter() {
                        $('#invoice_notes,#default_notes_textarea').jqEasyCounter({
                            'maxChars': 10000,
                            'maxCharsWarning': 9800,
                            'msgFontSize': '10px',
                            'msgFontColor': 'silver',
                            'msgFontFamily': 'Arial',
                            'msgTextAlign': 'right',
                            'msgWarningColor': 'red',
                            'msgAppendMethod': 'insertAfter',
                            'allocateSpace': false,
                            'showWarning': true
                        });
                    }
                    bind_notes_counter();

                    reCalculate(document.getElementById('sum_discount'), 'dataTable', '0.00');


                    function loadReceiptLayer(obj) {
                        var to_id = $('#to_name').val();

                        if (obj.checked) {
                            $('#receipts_layer').show(100, function () {
                                if (!$(this).attr('rloaded')) {
                                    $(this).attr('rloaded', 'true');
                                    $('#receipts_layer').html('<img src="images/loadingsmall.gif">');

                                    $.ajax({

                                        url: "showExpenses.php?action=displayReceiptList&customer_id=" + to_id + "&list=",
                                        type: 'GET',
                                        cache: false,
                                        async: true,
                                        dataType: 'json',
                                        success: function (response) {
                                            if (response && response.success)
                                                $('#receipts_layer').html(response.html);
                                            else
                                                $('#receipts_layer').html('Fail to load. Try Again');
                                        },
                                        error: function () {
                                            $('#receipts_layer').html('There was an error. Try Again');
                                        }
                                    });




                                }
                            });
                        }
                        else {
                            $('#receipts_layer').hide();
                        }
                    }


                    $('#receipts_include').click(function () {


                        var obj = $('#receipts_layer');
                        if (document.getElementById('receipts_include').checked) {


                            if (obj.attr('rloaded') == 'true') {
                                obj.show();
                            }
                            else {
                                loadReceiptLayer(document.getElementById('receipts_include'));
                            }
                        } else {
                            obj.hide();
                        }



                    });


                    function show_numbering_overlay() {
                        var boxdata = '';

                        $.ajax({
                            url: "invoiceNumbers2.php",
                            type: "GET",
                            async: false,
                            success: function (data) {
                                boxdata = data;
                            }
                        });

                        $.fancybox({
                            content: boxdata,
                            autoSize: false,
                            autoDimensions: false,
                            width: 620,
                            height: 320,
                            fitToView: false,
                            scrolling: 'no',
                            padding: 0,
                            type: 'inline'
                        });

                    }

                    function close_numbering_overlay() {
                        $('.fancybox-close').click()
                    }


                </script>
        
        
        
                <style type="text/css">
                    #addNewExpenseModal * {
                        -webkit-box-sizing: border-box;
                        -moz-box-sizing: border-box;
                        box-sizing: border-box;
                        line-height: 14px !important;
                    }
        
                    .modal-body label {
                        display: block;
                        width: 100%;
                        padding-bottom: 4px;
                    }
        
                    .close {
                        float: right;
                        font-size: 21px;
                        font-weight: bold;
                        line-height: 1;
                        color: #000;
                        text-shadow: 0 1px 0 #fff;
                        filter: alpha(opacity=20);
                        opacity: .2;
                    }
        
                    .close:hover,
                    .close:focus {
                        color: #000;
                        text-decoration: none;
                        cursor: pointer;
                        filter: alpha(opacity=50);
                        opacity: .5;
                    }
        
                    button.close {
                        -webkit-appearance: none;
                        padding: 0;
                        cursor: pointer;
                        background: transparent;
                        border: 0;
                    }
        
                    .modal-open {
                        overflow: hidden;
                    }
        
                    .modal {
                        position: fixed;
                        top: 0;
                        right: 0;
                        bottom: 0;
                        left: 0;
                        z-index: 1050;
                        -webkit-overflow-scrolling: touch;
                        outline: 0;
                    }
        
                    .modal.fade .modal-dialog {
                        -webkit-transition: -webkit-transform .3s ease-out;
                        -moz-transition: -moz-transform .3s ease-out;
                        -o-transition: -o-transform .3s ease-out;
                        transition: transform .3s ease-out;
                        -webkit-transform: translate(0, -25%);
                        -ms-transform: translate(0, -25%);
                        transform: translate(0, -25%);
                    }
        
                    .modal.in .modal-dialog {
                        -webkit-transform: translate(0, 0);
                        -ms-transform: translate(0, 0);
                        transform: translate(0, 0);
                    }
        
                    .modal-dialog {
                        position: relative;
                        width: auto;
                        margin: 10px;
                    }
        
                    .modal-content {
                        position: relative;
                        font-size: 13px;
                        background-color: #fff;
                        background-clip: padding-box;
                        border: 1px solid #999;
                        border: 1px solid rgba(0, 0, 0, .2);
                        border-radius: 6px;
                        outline: none;
                        -webkit-box-shadow: 0 3px 9px rgba(0, 0, 0, .5);
                        box-shadow: 0 3px 9px rgba(0, 0, 0, .5);
                    }
        
                    .modal-backdrop {
                        position: fixed;
                        top: 0;
                        right: 0;
                        bottom: 0;
                        left: 0;
                        z-index: 1040;
                        background-color: #000;
                    }
        
                    .modal-backdrop.fade {
                        filter: alpha(opacity=0);
                        opacity: 0;
                    }
        
                    .modal-backdrop.in {
                        filter: alpha(opacity=70);
                        opacity: .7;
                    }
        
                    .modal-header {
                        min-height: 16px;
                        border-bottom: 1px solid #e5e5e5;
                    }
        
                    .modal-header .close {
                        margin-top: -2px;
                    }
        
                    .modal-title {
                        margin: 0;
                        line-height: 1.5em;
                    }
        
                    .modal-body {
                        position: relative;
                        padding: 20px 50px;
                        max-height: 100%;
                        overflow: auto;
                    }
        
                    .modal-footer {
                        padding: 20px;
                        margin-top: 15px;
                        text-align: left;
                        /*tom*/
                        border-top: 1px solid #e5e5e5;
                    }
        
                    @media (min-width: 768px) {
                        .modal-dialog {
                            width: 600px;
                            margin: 80px auto;
                        }
        
                        .modal-content {
                            -webkit-box-shadow: 0 5px 15px rgba(0, 0, 0, .5);
                            box-shadow: 0 5px 15px rgba(0, 0, 0, .5);
                        }
        
                        .modal-sm,
                        .modal-sm .modal-content {
                            width: 300px;
                        }
        
                        .modal-med .modal-footer {
                            padding-left: 45px;
                        }
                    }
        
        
                    .modal .alert {
                        margin: 0px 0px 25px 0px;
                    }
        
                    .modal-title {
                        margin: 0;
                        line-height: 18px;
                        font-size: 18px;
                        font-weight: bold;
                    }
        
                    .modal-footer:before,
                    .modal-footer:after {
                        display: table;
                        content: " ";
                    }
        
                    .modal-footer:after {
                        clear: both;
                    }
        
                    .form-group {
                        margin-bottom: 15px;
                    }
        
                    .row {
                        margin-right: -10px;
                        margin-left: -10px;
                    }
        
                    .col-50 {
                        width: 50%;
                        float: left;
                        position: relative;
                        min-height: 1px;
                        padding-right: 10px;
                        padding-left: 10px;
                    }
        
                    .modal-footer button {
                        padding: 8px 16px !important;
                        font-family: sans-serif;
                        min-width: 90px !important;
                    }
        
                    #addNewExpenseModal {
                        position: fixed;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        overflow: hidden;
                        z-index: 9999;
                        background: rgba(0, 0, 0, .75);
                    }
        
                    #newExpenseModal,
                    #addNewAccountModal {
                        position: fixed;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        overflow: hidden;
                        z-index: 9999;
                        background: rgba(0, 0, 0, .75);
                    }
        
                    #addNewAccountModal .modal input,
                    #addNewAccountModal .modal select {
                        width: 100%;
                        height: 28px;
                    }
        
                    .alert {
                        padding: 15px;
                        margin-top: 15px;
                        border: 1px solid transparent;
                        border-radius: 4px;
                        width: 100%;
                        line-height: 1.5em;
                    }
        
                    .alert-dismissable {
                        padding-right: 35px;
                    }
        
                    .alert-dismissable .close {
                        position: relative;
                        top: -2px;
                        right: -21px;
                        color: inherit;
                    }
        
                    .close {
                        float: right;
                        font-size: 21px;
                        font-weight: bold;
                        line-height: 1;
                        color: #000;
                        text-shadow: 0 1px 0 #fff;
                        filter: alpha(opacity=20);
                        opacity: .2;
                        width: 24px;
                    }
        
                    .close:hover,
                    .close:focus {
                        color: #000;
                        text-decoration: none;
                        cursor: pointer;
                        filter: alpha(opacity=50);
                        opacity: .5;
                    }
        
                    button.close {
                        -webkit-appearance: none;
                        padding: 0;
                        cursor: pointer;
                        background: transparent;
                        border: 0;
                    }
        
                    .alert-success,
                    .alert-warning,
                    .alert-danger {
                        padding: 10px 24px 10px 42px;
                        margin-top: 15px;
                        border: 2px solid #FCF5CD;
                    }
        
                    .alert-danger,
                    .bg-danger {
                        background: #FFFADC url('../../images/red_error_25.gif') 6px 6px no-repeat;
                    }
        
                    .alert-info {
                        padding: 10px 24px;
                        color: #31708f;
                        background-color: #d9edf7;
                        border-color: #bce8f1;
                    }
        
                    /*
            .multicheck { width:100%; }
            .multicheck td { vertical-align:top; }
            .odd { padding:.5em 2em .1em 2em; color: #888888;}
            .even { padding:.1em 2em .5em 2em; border-bottom:1px solid #c0c0c0; }
            hr.or { display:block; height: 1px; color: #aaa; background: #aaa; font-size: 0; border: 0; position:relative; margin:25px 0;}
            hr.or:after {content:"or"; font-family:Verdana, sans-serif; font-size:12px; color:#999; font-style:italic; text-align:center;
                width:2em; background:#fff; position:absolute; top:-6px; left:50%; margin-left:-1em;  }
        	*/
        
                    .expscroll {
                        max-height: 280px;
                        overflow-y: scroll;
                        border: 1px solid #c0c0c0;
                        margin-top: 15px;
                    }
        
                    .expcheck {
                        width: 100%;
                    }
        
                    .expcheck td {
                        vertical-align: top;
                        padding: 8px;
                        border-bottom: 1px solid #d2d2d2;
                    }
        
                    .expcheck tr:last-of-type td {
                        border-bottom-color: #e2e2e2;
                    }
        
                    .expcat,
                    .expdate {
                        color: #888888;
                    }
        
                    .td-checkbox {
                        width: 6%;
                    }
        
                    /* lgwt: changed from 1% to make checkbox fully visible (Safari) and tickable in iOS Chrome/Safari */
                </style>
        
                <!--[if lt IE 9]>
        <style>
        .modal-content { width:600px; margin:80px auto;  }
        .expscroll { height:280px; }
        </style>
        <![endif]-->
        
        
        
                <div id="addNewExpenseModal" style="display:none;">
                    <div class="modal" id="addNewAccount" tabindex="-1" role="dialog" aria-hidden="true"
                        style="display:block !important;">
                        <div class="modal-dialog modal-med">
                            <div class="modal-content">
        
                                <div id="listExpensesModal" style="display: none">
        
        
                                    <div class="modal-header">
                                        <button type="button" class="close" onclick="hideModal();"
                                            aria-hidden="true">&times;</button>
                                        <h4 class="modal-title">Add Expense(s) to this Invoice</h4>
                                    </div>
                                    <div class="modal-body">
                                        <div class="expscroll">
        
                                            <table id="listExpenseTableAdd" class="expcheck" cellspacing="0">
                                                <tr>
                                                    <td colspan="5">
                                                        <div id="listExpenseTableLoadingMessage"
                                                            style="text-align: center;color: #888;">Loading...</div>
                                                    </td>
                                                </tr>
                                            </table>
        
                                        </div>
        
                                        <br />
        
                                        <div class="textright" style="position:relative; top:10px;">
                                            Want to enter a new expense now?<br />
        
                                            <a href="javascript:addNewExpense(false,false)"><i>Add new expense</i></a>
        
                                        </div>
        
                                    </div>
                                    <div class="modal-footer">
                                        <button class="btn btn-primary" type="button" onclick="attachExpenseToInvoice()">Add to
                                            Invoice</button>
                                        <button class="btn btn-cancel" style="width: 90px !important;cursor: pointer;"
                                            type="button" onclick="hideModal();">Cancel</button>
                                    </div>
                                </div>
        
                            </div>
                        </div>
                    </div><!-- end modal -->
                </div>
        
        
        
        
        
                <script>
                    var listWasEmpty = false;
                    var loadingDiv = false;
                    var offsetExpenseList = 0;
                    var scrollAjaxActive = true;

                    function hideModal() {
                        if (!itemExpenseOpened.data('added')) {
                            itemExpenseOpened.val('');
                        } else {
                            //added
                            var opt = new Option("Expense", "Expense");
                            itemExpenseOpened.find('option').remove();
                            itemExpenseOpened.append(opt);
                        }

                        $('.input-row-expense:checked').removeAttr('checked');
                        $('#addNewExpenseModal').hide();

                    }

                    function attachExpenseToInvoice() {
                        var originalBlankLines = numberBlankLines();

                        removeBlankLines();

                        var chkList = $('.input-row-expense:checked');
                        var k = 0;
                        var line = null;
                        var description = '';
                        $.each(chkList, function (key, obj) {

                            description = $(obj).data('category') + ' from ' + $(obj).data('vendor') + ' on ' + $(obj).attr('data-date');

                            if (k == 0) {
                                line = itemExpenseOpened.parent().parent();
                                addLine($(obj).data('id'), $(obj).data('amount'), description, line)
                            } else {
                                addLine($(obj).data('id'), $(obj).data('amount'), description);
                            }
                            k++;

                        });
                        chkList.removeAttr('checked');
                        chkList.parent().parent().removeClass('expense-available').hide();

                        hideModal();

                        for (var i = 0; i < originalBlankLines; i++)
                            newLineClick();



                    }

                    function isBlankLine(tr) {
                        var item = $(tr).find('td.invoiceDataItem select').val();
                        var description = $(tr).find('td.invoiceDataDescription textarea').val();
                        var unitPrice = $(tr).find('td.invoiceDataPriceOrQty input[name="unit_price[]"]').val();
                        var qty = $(tr).find('td.invoiceDataPriceOrQty input[name="qty[]"]').val();

                        if (item != '' || description != '' || unitPrice != '0.00' || qty != '0.00')
                            return false;
                        else
                            return true;
                    }

                    function numberBlankLines() {
                        var number = 0;

                        var lines = $('.invoiceDataHeadRow');
                        $.each(lines, function (key, tr) {
                            //alert(tr)
                            if (isBlankLine(tr))
                                number++;
                        });

                        return number;
                    }

                    function removeBlankLines() {
                        var lines = $('.invoiceDataHeadRow');
                        $.each(lines, function (key, tr) {
                            //alert(tr)
                            if (isBlankLine(tr))
                                $(tr).remove();
                        });

                    }

                    function addLine(id, amount, description, tr) {

                        if (!tr) {
                            newLineClick();
                            tr = $('#dataTable').find('tbody tr:last-child');
                        }

                        var opt = new Option("Expense", "Expense");

                        tr.data('expense_id', id);
                        var sel = tr.find('td.invoiceDataItem select');
                        sel.data('added', true).find('option').remove();
                        sel.append(opt);
                        tr.find('td.invoiceDataDescription textarea').val(description).blur().keyup();
                        tr.find('td.invoiceDataDescription input[name="expense_id[]"]').val(id);
                        tr.find('td.invoiceDataPriceOrQty input[name="qty[]"]').val('1.00').blur();
                        //tr.find("input[name*='tax']").css('background-color','#f8f8f8').attr('disabled','disabled').val('').next().css('color','#f8f8f8').parent().css('background-color','#f8f8f8');
                        tr.find('td.invoiceDataPriceOrQty input[name="unit_price[]"]').val(amount.toFixed(2)).blur();

                        //Set tax to No tax. 
                        NoTaxSelector = tr.find(".tax_dropdown :input").first();
                        NoTaxSelector.click(); //NOTE: This will run reCalculate and remove any tax from the totals.
                        NoTaxSelector.attr("checked", true);

                        //Make tax inactive
                        tr.find('.currentTax').removeClass("currentTax").removeAttr("onclick");
                        tr.find('img.jActiveTax').hide();
                        tr.find('img.jInactiveTax').show();

                    }

                    function addNewExpense(emptyList, closeModal) {
                        listWasEmpty = emptyList;


                        //Hide expense list:
                        $('#addNewExpenseModal').hide();
                        //Load new expense form data (if not already loaded):
                        if ($('#newExpenseIframe').attr("src") != "newExpenseFrame.php") $('#newExpenseIframe').attr("src", "newExpenseFrame.php");
                        //show new expense form:
                        $('#newExpenseModal').show();

                    }

                    function loadListExpenses(page) {
                        //        console.log("loadListExpenses(), document.getElementsByName('expense_id[]'): ",document.getElementsByName('expense_id[]'));
                        expenseIdsToExclude = [];
                        expenseIdInputs = document.getElementsByName('expense_id[]');
                        //        expenseIdInputs.forEach(function(elem) {
                        $.each(expenseIdInputs, function (elem) {
                            if (elem.value != "0" && elem.value != "") expenseIdsToExclude.push(elem.value);
                        });
                        //        console.log("loadListExpenses(), expenseIdsToExclude after removing empty: ", expenseIdsToExclude);

                        loadingDiv = true;

                        page = page || 500;

                        var data = { action: 'load_expense_list_json', offset: offsetExpenseList, page: page };
                        if (expenseIdsToExclude.length > 0) {
                            data.expenseIdsToExclude = expenseIdsToExclude;
                        }
                        //        console.log("loadListExpenses(), data: ", data);

                        $('#listExpenseTableLoadingMessage').show();
                        $.ajax({
                            url: 'editInvoice.php',
                            data: data,
                            type: 'GET',
                            cache: false,
                            async: true,
                            dataType: 'json',
                            success: function (response) {

                                if (response && response.success) {

                                    var list = response.list;

                                    var html = '';


                                    if (list.length == 0 && $('#listExpenseTableAdd tr').length == 1) { //Only default row with "Loading..."

                                        //no available expenses
                                        $('#listNoExpensesModal').show();
                                        $('#listExpensesModal').hide();
                                        addNewExpense(true, true);

                                    }

                                    else if (list.length == 0 && $('#listExpenseTableAdd tr').length > 1) { //At least one expense loaded - no more available

                                        //Deactivate ajax call on further down scrolling
                                        scrollAjaxActive = false;

                                    }

                                    else if (list.length) { //New expenses returned. Add new rows to table listExpenseTableAdd:

                                        $.each(list, function (indx, expense) {

                                            html += '<tr class="expense-row-' + expense.id + ' expense-row expense-available">';
                                            html += '<td class="td-checkbox"><input type="checkbox" class="input-row-expense" data-id="' + expense.id + '" data-number="' + expense.number + '" data-category="' + expense.category_name + '" data-vendor="' + expense.vendor_name + '" data-date="' + expense.bill_date + '" data-amount="' + expense.amount + '"></td>';
                                            html += '<td class="expnumber">' + expense.number + '<br><span class="expcat">' + expense.category_name + '</span></td>';
                                            html += '<td class="expvendor" colspan="2">' + expense.vendor_name + '<br><span class="expdate">' + expense.bill_date + '</span></td>';
                                            html += '<td class="expamount">' + expense.amount + '</td>';
                                            html += '</tr>';


                                        });

                                        $('#listExpenseTableAdd tr:last').before(html);
                                    }
                                    offsetExpenseList += 500;

                                } else if (response && !response.success) {

                                    aynaxConsoleLog('There was an error loading the list.');

                                }

                                $('#listExpenseTableLoadingMessage').hide();
                                loadingDiv = false;
                            },
                            error: function () {
                                aynaxConsoleLog('There was an error loading the list.');
                                $('#listExpenseTableLoadingMessage').hide();
                                loadingDiv = false;
                            }

                        });
                    }



                    $('#addNewExpenseModal .expscroll').bind('scroll', function () {
                        //        console.log("addNewExpenseModal .expscroll bind scroll");

                        var self = $(this);
                        if (self.scrollTop() + self.innerHeight() >= self[0].scrollHeight) {
                            //            console.log("addNewExpenseModal .expscroll bind scroll, loadListExpenses()");
                            if (scrollAjaxActive) loadListExpenses();
                        }
                    });


                    function addExpenseToNewList(jsonStr) {
                        var obj = $.parseJSON(jsonStr);

                        var numberRows = $('#listExpenseTableAdd tr').length;

                        var table = document.getElementById('listExpenseTableAdd');

                        var newRow = table.insertRow(0);

                        newRow.className = 'expense-row-' + obj.id + ' expense-row expense-available';

                        var cell1 = newRow.insertCell(0);
                        cell1.className = 'td-checkbox';

                        var checkbox = document.createElement('input');
                        checkbox.type = "checkbox";
                        checkbox.className = "input-row-expense";
                        checkbox.setAttribute("data-id", obj.id);
                        checkbox.setAttribute("data-number", obj.number);
                        checkbox.setAttribute("data-category", obj.category_name);
                        checkbox.setAttribute("data-vendor", obj.vendor_name);
                        checkbox.setAttribute("data-date", obj.bill_date);
                        checkbox.setAttribute("data-amount", obj.amount);
                        checkbox.setAttribute("checked", true);

                        cell1.appendChild(checkbox);


                        var cell2 = newRow.insertCell(1);
                        cell2.className = 'expnumber';

                        cell2.appendChild(document.createTextNode(obj.number));
                        cell2.appendChild(document.createElement('br'));

                        var span1 = document.createElement('span');
                        span1.className = 'expcat';
                        span1.appendChild(document.createTextNode(obj.category_name));

                        cell2.appendChild(span1);

                        var cell3 = newRow.insertCell(2);
                        cell3.className = 'expvendor';
                        cell3.setAttribute('colspan', '2');

                        cell3.appendChild(document.createTextNode(obj.vendor_name));
                        cell3.appendChild(document.createElement('br'));

                        var span2 = document.createElement('span');
                        span2.className = 'expdate';
                        span2.appendChild(document.createTextNode(obj.bill_date));

                        cell3.appendChild(span2);


                        var cell4 = newRow.insertCell(3);
                        cell4.className = 'expamount';
                        cell4.appendChild(document.createTextNode(obj.amount));

                        if (listWasEmpty) {
                            attachExpenseToInvoice();
                            hideModal();
                            hideModalNewExpense();
                            $('#addNewExpenseModal').hide();

                        } else {
                            $('#listExpensesModal').show();
                            $('#listNoExpensesModal').hide();
                        }


                    }


                </script>
        
                <div id="newExpenseModal" style="display: none">
                    <div class="modal" tabindex="-1" role="dialog" aria-hidden="true" style="display:block !important;">
                        <div class="modal-dialog modal-med" style="width: 960px;">
                            <div class="modal-content">
        
        
                                <div class="modal-header">
                                    <button type="button" class="close" onclick="hideModalNewExpense();"
                                        aria-hidden="true">&times;</button>
                                    <h4 class="modal-title">&nbsp;</h4>
                                </div>
                                <div class="modal-body">
        
                                    <iframe id="newExpenseIframe" src="/images/loading.gif" width="850" height="385"
                                        style="display: block; border: 0;"></iframe>
        
        
                                </div>
                                <div class="modal-footer">
                                    <button type="button" id="newExpenseSaveBtn" class="btn btn-primary"
                                        style="padding:0 16px !important; line-height:30px" onclick="saveFrame();">Save</button>
                                    <button type="button" id="newExpenseCancelBtn" class="btn btn-cancel"
                                        style="padding:0 16px !important; line-height:30px; width: 90px !important;"
                                        onclick="hideModalNewExpense();">Cancel</button>
                                </div>
        
        
                            </div>
                        </div>
                    </div>
                </div><!-- end modal -->
            </div>
        
        
        
        
        
            <script>
                function hideModalNewExpense() {

                    $('#newExpenseIframe').contents().find('#no_amount').hide();
                    $('#newExpenseIframe').contents().find('#no_vendor').hide();
                    $('#newExpenseIframe').contents().find('#error_duedate').hide();
                    $('#newExpenseIframe').contents().find('#error_paymentdate').hide();

                    $('#newExpenseIframe').contents().find('#new_paysource_name_empty').hide();

                    $('#newExpenseModal').hide();

                    if (!listWasEmpty) {
                        $('#addNewExpenseModal').show();
                    } else {
                        hideModal();
                    }


                }

                function saveFrame() {



                    var form = $('#newExpenseIframe').contents().find('#newExpenseForm');

                    var amount = $('#newExpenseIframe').contents().find("input[name=amount]").val();
                    var vendor = $('#newExpenseIframe').contents().find("input[name=vendor]").val();
                    var newvendor = $('#newExpenseIframe').contents().find("input[name=new_vendor]").val();
                    var bill_date = new Date($('#newExpenseIframe').contents().find("input[name=bill_date]").val());
                    var due_date = new Date($('#newExpenseIframe').contents().find("input[name=due_date]").val());
                    var payment = $('#newExpenseIframe').contents().find("select[name=paid]").val();
                    var payment_date = new Date($('#newExpenseIframe').contents().find("input[name=payment_date]").val());

                    $(this).data('submited', true);

                    if (amount == "") {
                        $('#newExpenseIframe').contents().find('#no_amount').show();
                    } else if (vendor == "0" && newvendor == "") {
                        $('#newExpenseIframe').contents().find('#no_vendor').show();
                    } else if (due_date < bill_date) {
                        $('#newExpenseIframe').contents().find('#error_duedate').show();
                    } else if (payment_date < bill_date && payment == true) {
                        $('#newExpenseIframe').contents().find('#error_paymentdate').show();
                    } else if ($('#newExpenseIframe').contents().find('#addNewAccount').is(":visible")) {
                        if ($('#newExpenseIframe').contents().find('#new_paysource_name').val() == "") {
                            $('#newExpenseIframe').contents().find('#new_paysource_name_empty').show();
                        }
                    } else {
                        form.submit();
                    }

                    if ($('#newExpenseIframe').contents().find('#no_amount').is(":visible")) {
                        $('#newExpenseIframe').contents().find("input[name=amount]").click(function () {
                            $('#newExpenseIframe').contents().find('#no_amount').hide();
                        });
                    }
                    if ($('#newExpenseIframe').contents().find('#no_vendor').is(":visible")) {
                        $('#newExpenseIframe').contents().find("input[name=vendor]").parent().click(function () {
                            $('#newExpenseIframe').contents().find('#no_vendor').hide();
                        });
                    }
                    if ($('#newExpenseIframe').contents().find('#error_duedate').is(":visible")) {
                        $('#newExpenseIframe').contents().find("input[name=due_date]").click(function () {
                            $('#newExpenseIframe').contents().find('#error_duedate').hide();
                        });
                    }
                    if ($('#newExpenseIframe').contents().find('#error_paymentdate').is(":visible")) {
                        $('#newExpenseIframe').contents().find("input[name=payment_date]").click(function () {
                            $('#newExpenseIframe').contents().find('#error_paymentdate').hide();
                        });
                    }
                    if ($('#newExpenseIframe').contents().find('#new_paysource_name_empty').is(":visible")) {
                        $('#newExpenseIframe').contents().find("#new_paysource_name").click(function () {
                            $('#newExpenseIframe').contents().find('#new_paysource_name_empty').hide();
                        });
                    }


                }

            </script>
            <style>
                #addNewAccountModal * {
                    -webkit-box-sizing: border-box;
                    -moz-box-sizing: border-box;
                    box-sizing: border-box;
                    line-height: 14px !important;
                }
        
                #addNewAccountModal {
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    overflow: hidden;
                    z-index: 1050;
                    background: rgba(0, 0, 0, .75);
                }
        
                .ui-datepicker {
                    z-index: 1060 !important;
                }
            </style>
        
            <div id="addNewAccountModal" style="display:none;">
        
                <div class="modal" id="addNewAccount" tabindex="-1" role="dialog" aria-hidden="true"
                    style="margin-top:35px; display:block !important;">
                    <div class="modal-dialog modal-med">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" onclick="hideNewAccountModal();"
                                    aria-hidden="true">&times;</button>
                                <h4 class="modal-title">Add Bank Account / Credit Card</h4>
                            </div>
                            <div class="modal-body">
        
                                <div class="alert alert-danger alert-dismissable" id="message" style="display:none;">
                                    <button type="button" class="close" aria-hidden="true">&times;</button>
                                    <span id="message_content"></span>
                                </div>
        
        
                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-50">
                                            <label
                                                style="display:block; color:#777777; font-size:13px; margin-bottom:3px;">Name</label>
                                            <input name="p_name" id="p_name" type="text" />
                                        </div>
                                        <div class="col-50">
                                            <label
                                                style="display:block; color:#777777; font-size:13px; margin-bottom:3px;">Starting
                                                Balance Date</label>
                                            <input name="p_date" id="p_date"
                                                style="border: 1px solid #ccc;cursor:pointer;background: url(images/calendar-16.png)  center right no-repeat; padding:2px; padding-left:5px; font-weight:normal; font-family:verdana;font-size:12px;color:#3c3c3c;background-color:white;"
                                                readonly type=text value="10/21/2024">
        
                                        </div>
        
                                    </div>
        
                                </div>
        
                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-50">
                                            <label
                                                style="display:block; color:#777777; font-size:13px; margin-bottom:3px;">Account
                                                Type</label>
                                            <select name="p_type" id="p_type" onchange="ccTip();">
                                                <option>Bank Account</option>
                                                <option>Credit Card</option>
                                            </select>
                                        </div>
                                        <div class="col-50">
                                            <label
                                                style="display:block; color:#777777; font-size:13px; margin-bottom:3px;">Starting
                                                Balance</label>
                                            <input id="p_balance" type="text" placeholder="0.00" name="p_balance" />
                                            <small id="tip" style="display: none"><br><br>NB: For credit cards: If you owe $200
                                                on the credit card, enter 200</small>
                                        </div>
                                    </div>
                                </div>
        
                            </div>
                            <div class="modal-footer">
                                <button class="btn btn-primary" id="save_button" type="button"
                                    onclick="newAccount();">Save</button>
                                <button class="btn btn-cancel" type="button" onclick="hideNewAccountModal();">Cancel</button>
                            </div>
                        </div>
                    </div>
                </div><!-- end modal -->
        
            </div>
        
            <script>


                function showNewAccount() {

                    $('#addNewAccountModal').show();

                    $('#newExpenseModal').hide();

                }

                $(function () {
                    $(".addNewAccountModal-hide").click(function () {
                        $('#addNewAccountModal').hide();
                    });

                })

                function sortByName(a, b) {
                    var aName = a.name.toLowerCase();
                    var bName = b.name.toLowerCase();
                    return ((aName < bName) ? -1 : ((aName > bName) ? 1 : 0));
                }

                function addOptionsToElement(element, arrObj, selectedId) {

                    for (var key in arrObj) {
                        if (arrObj.hasOwnProperty(key)) {
                            var obj = arrObj[key];

                            var opt = new Option(obj.name, obj.id);

                            element.appendChild(opt);
                        }
                    }

                }

                function addAccountOption(value, text, type) {
                    var frameDocument = document.getElementById('newExpenseIframe').contentWindow;
                    var accountElement = frameDocument.document.getElementById('account');

                    $(accountElement).html('');

                    if (type == 'Bank Account') {
                        frameDocument.bankAccountsArr.push({ id: value, name: text });
                        frameDocument.bankAccountsArr.sort(sortByName);
                    } else {
                        frameDocument.creditAccountsArr.push({ id: value, name: text });
                        frameDocument.creditAccountsArr.sort(sortByName);
                    }

                    addOptionsToElement(accountElement, frameDocument.cashAccountsArr, value);

                    if (frameDocument.bankAccountsArr != "") {
                        var groupBank = document.createElement("optgroup");
                        groupBank.label = 'Bank Accounts';
                        addOptionsToElement(groupBank, frameDocument.bankAccountsArr, value);
                        accountElement.appendChild(groupBank);
                    }

                    if (frameDocument.creditAccountsArr != "") {
                        var groupCredit = document.createElement("optgroup");
                        groupCredit.label = 'Credit Cards';
                        addOptionsToElement(groupCredit, frameDocument.creditAccountsArr, value);
                        accountElement.appendChild(groupCredit);
                    }

                    var groupNew = document.createElement("optgroup");
                    groupNew.label = '-----------------------------';

                    var opt = new Option('New Account', 0);
                    groupNew.appendChild(opt);
                    accountElement.appendChild(groupNew);

                    accountElement.value = value;

                }


                function ccTip() {

                    if (document.getElementById('p_type').selectedIndex == 1) show = "yes"; else show = "no";
                    if (show == "yes") document.getElementById('tip').style.display = '';
                    else document.getElementById('tip').style.display = 'none';
                }


                function hideNewAccountModal(clearIndex) {
                    var frameDocument = document.getElementById('newExpenseIframe').contentWindow.document;

                    $('#addNewAccountModal').hide();
                    if (!clearIndex) frameDocument.getElementById('account').selectedIndex = 0;
                    document.getElementById('p_name').value = "";
                    document.getElementById('p_balance').value = "";
                    document.getElementById('p_type').selectedIndex = 0;
                    document.getElementById('message').style.display = "none";


                    $('#newExpenseModal').show();

                }

                function isNumber(n) {
                    return !isNaN(parseFloat(n)) && isFinite(n);
                }

                function trim(value) {
                    return value.replace(/^\s+|\s+$/g, "");
                }

                function newAccount() {
                    var frameDocument = document.getElementById('newExpenseIframe').contentWindow.document;

                    var regex = new RegExp("[^A-Za-z0-9#_.,' ()&-]", "i");

                    if (document.getElementById('p_name').value == "") {

                        document.getElementById('message_content').innerHTML = "Please enter an account name";
                        document.getElementById('message').style.display = "";
                        return;
                    }

                    if (document.getElementById('p_name').value.search(regex) != -1) {
                        var match = document.getElementById('p_name').value.match(regex);
                        if (match == " ") var space = "Empty space"; else var space = "";

                        document.getElementById('p_name').value = document.getElementById('p_name').value.replace(regex, '');
                        document.getElementById('message_content').innerHTML = "Illegal character removed from your account name: " + match;
                        document.getElementById('message').style.display = "";
                        return;
                    }


                    if ((document.getElementById('p_balance').value != "") && (!isNumber(document.getElementById('p_balance').value))) {

                        document.getElementById('message_content').innerHTML = "The Starting Balance can only contain numbers";
                        document.getElementById('message').style.display = "";
                        return;
                    }


                    if (frameDocument.getElementById('account').value == 0) {

                        var x = frameDocument.getElementById("account");
                        var i;
                        var type;

                        for (i = 0; i < x.length; i++) {

                            if (x.options[i].parentNode.label == "Bank Accounts") { type = "Bank Account: "; }
                            else if (x.options[i].parentNode.label == "Credit Cards") { type = "Credit Card: "; }

                            if ((type + trim(x.options[i].text)) == trim(document.getElementById('p_type').value + ": " + document.getElementById('p_name').value)) {

                                document.getElementById('message_content').innerHTML = "This account name already exists";
                                document.getElementById('message').style.display = "";
                                return;
                            }
                        }
                    }

                    // For some reason IE8 is not able to retrieve id-values in this modal, hence the test below (further debugging not given priority):	
                    if (document.getElementById('p_type').value != "Bank Account" && document.getElementById('p_type').value != "Credit Card") {

                        document.getElementById('message_content').innerHTML = "Unfortunately we were not able to create the new account. Please contact support.";
                        document.getElementById('message').style.display = "";
                        return;

                    }

                    document.getElementById('save_button').disabled = true;

                    if (frameDocument.getElementById('account').value == 0) {

                        var data = "p_balance=" + document.getElementById('p_balance').value + "&p_name=" + document.getElementById('p_name').value + "&p_type=" + document.getElementById('p_type').value + "&p_date=" + document.getElementById('p_date').value;



                        ajax("../newPaymentAccount.inc.php", data, function () {

                            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                                //document.getElementById('default_notes_textarea').value = xmlhttp.responseText;

                                addAccountOption(xmlhttp.responseText, document.getElementById('p_name').value, document.getElementById('p_type').value);


                                hideNewAccountModal(true);

                                document.getElementById('save_button').disabled = false;
                                //alert(xmlhttp.responseText);
                            }

                        });


                    }
                }

                /*! jQuery Placeholder Enhanced 1.6.9 | @tdecs | under the MIT license */
                (function (e, q) { var g = "placeholder" in q.createElement("input") && "placeholder" in q.createElement("textarea"), k = { cssClass: "placeholder", normalize: !0 }, h = e.fn.val, l = function (c) { return e.nodeName(c, "input") || e.nodeName(c, "textarea") }, t = function (c) { for (var d = ["placeholder", "name", "id"], f = {}, b, a = 0, s = c.attributes.length; a < s; a++)b = c.attributes[a], b.specified && 0 > e.inArray(b.name, d) && (f[b.name] = b.value); return f }, p = function (c) { c.css({ position: "", left: "" }) }, r = function (c) { c.css({ position: "absolute", left: "-9999em" }) }; if (!g || k.normalize) g ? g && k.normalize && (e.fn.val = function () { var c = arguments; if (this[0]) return c.length ? this.each(function (d, f) { var b = e(f), a = e.data(f, "placeholderEnhanced"), g = f._placeholder; a && g && l(f) && (c[0] || f.value === g ? c[0] && b.hasClass(a.cssClass) && b.removeClass(a.cssClass) : b.addClass(a.cssClass).attr("placeholder", g)); h.apply(b, c) }) : h.apply(this, c) }) : e.fn.val = function () { var c = arguments, d = this[0], f; if (d) return c.length ? this.each(function (b, a) { var d = e(a), f = e.data(a, "placeholderEnhanced"), g; g = d.attr("placeholder"); f && g && l(a) ? c[0] || a.value === g ? c[0] && (d.hasClass(f.cssClass) && d.removeClass(f.cssClass), h.apply(d, c)) : a.value = d.addClass(f.cssClass).attr("placeholder") : h.apply(d, c) }) : (f = e(d).attr("placeholder")) && l(d) ? d.value === f ? "" : d.value : h.apply(this, c) }, e.fn.placeholderEnhanced = function (c) { var d = e.extend(k, c); if (this.length && (!g || d.normalize)) return "destroy" === c ? this.filter(function (d, b) { return e.data(b, "placeholderEnhanced") }).removeClass(d.cssClass).each(function (d, b) { var a = e(b).unbind(".placeholder"), c = "password" === b.type, m = a.attr("placeholder"); g ? delete b._placeholder : (b.value === m && (b.value = ""), c && (p(a), a.prev().unbind(".placeholder").remove())); e.fn.val = h; e.removeData(b, "placeholderEnhanced") }) : this.each(function (c, b) { if (!e.data(b, "placeholderEnhanced")) { e.data(b, "placeholderEnhanced", d); var a = e(b), h = "password" === b.type, m = a.attr("placeholder"), k = null, l = null, n = null; g ? g && d.normalize && (b._placeholder = a.attr("placeholder"), l = function () { b.value || a.addClass(d.cssClass).attr("placeholder", m) }, n = function () { a.removeAttr("placeholder").removeClass(d.cssClass) }) : (l = function () { a.val() ? a.val() && h && n() : h ? (p(k), r(a)) : a.val(m).addClass(d.cssClass) }, h ? (n = function () { p(a); r(k) }, k = e("<input>", e.extend(t(b), { type: "text", value: m, tabindex: -1 })).addClass(d.cssClass).bind("focus.placeholder", function () { a.trigger("focus.placeholder") }).insertBefore(a)) : n = function () { a.hasClass(d.cssClass) && (b.value = "", a.removeClass(d.cssClass)) }); a.bind("blur.placeholder", l).bind("focus.placeholder", n).trigger("blur.placeholder") } }) }, e(function () { e("input[placeholder], textarea[placeholder]").placeholderEnhanced() }) })(jQuery, document);

                /*Starting balance date*/
                $(document).ready(function () {

                    $('#p_date').datepicker({ dateFormat: 'mm/dd/yy' });
                });



            </script>
        
        
        
        
        
        
            <style type="text/css">
                .modal,
                .modal * {
                    box-sizing: border-box;
                }
        
                #salesTaxModal {
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    overflow: hidden;
                    z-index: 9999;
                    background: rgba(0, 0, 0, .75);
                    line-height: 20px;
                    font-family: verdana, sans-serif;
                }
        
                #tabsTax {
                    padding: 0px;
                    margin-top: 25px;
                    width: 620px
                }
        
                #tabsTax li {
                    float: left;
                    list-style-type: none;
                    margin: 2px;
                    border: 1px solid #888;
                    padding: 5px;
                    background: #c0c0c0;
                }
        
                #tabsTax li.active {
                    background: #ffffff;
                    border-bottom: 1px solid #ffffff
                }
        
                #tabsTax a {
                    text-decoration: none;
                }
        
                .single-table-tax td {
                    line-height: 13px !important;
                }
        
                .error-tax-message {
                    visibility: hidden;
                    padding: 6px 9px;
                    border-radius: 3px;
                    font-size: 12px;
                    background-color: #fff6f7;
                    color: #be1e2d;
                    border: 1px solid #be1e2d;
                    line-height: 18px !important;
                }
        
                .redborder {
                    border: 2px solid #be1e2d;
                }
        
        
                .modal.fade .modal-dialog {
                    -webkit-transition: -webkit-transform 0.3s ease-out;
                    -moz-transition: -moz-transform 0.3s ease-out;
                    -o-transition: -o-transform 0.3s ease-out;
                    transition: transform 0.3s ease-out;
                    -webkit-transform: translate(0, -25%);
                    -ms-transform: translate(0, -25%);
                    transform: translate(0, -25%);
                }
        
                .modal.in .modal-dialog {
                    -webkit-transform: translate(0, 0);
                    -ms-transform: translate(0, 0);
                    transform: translate(0, 0);
                }
        
                .modal-dialog {
                    position: relative;
                    width: auto;
                    margin: 10px;
                }
        
                .modal-content {
                    position: relative;
                    background-color: #fff;
                    background-clip: padding-box;
                    border-radius: 5px;
                    outline: none;
                    box-shadow: 0 3px 9px rgba(0, 0, 0, .5);
                }
        
                .modal-backdrop {
                    position: fixed;
                    top: 0;
                    right: 0;
                    bottom: 0;
                    left: 0;
                    z-index: 1040;
                    background-color: #000;
                }
        
                .modal-backdrop.fade {
                    filter: alpha(opacity=0);
                    opacity: 0;
                }
        
                .modal-backdrop.in,
                .modal-backdrop.fade.in {
                    filter: alpha(opacity=70);
                    opacity: 0.7;
                }
        
                .modal-header {
                    min-height: 16px;
                    border-bottom: thin solid #e5e5e5;
                }
        
                .modal-title {
                    margin: 0;
                    line-height: 18px;
                    font-size: 18px;
                    font-weight: bold;
                    padding: 15px;
                }
        
                .modal-body {
                    position: relative;
                    padding: 15px;
                }
        
                .modal-footer {
                    padding: 10px 15px;
                    text-align: left;
                    border-top: thin solid #e5e5e5;
                }
        
                .modal-footer:after {
                    content: "";
                    display: block;
                    width: 100%;
                    height: 0;
                    clear: both;
                }
        
                .modal-footer .btn {
                    float: left;
                    margin-left: 5px;
                }
        
                .modal-footer .btn:first-child {
                    margin-left: 0;
                }
        
                .modal-body p:last-child {
                    padding-bottom: 0;
                    margin-bottom: 0;
                }
        
                @media (min-width: 768px) {
                    .modal-dialog {
                        width: 600px;
                        margin: 50px auto;
                    }
        
                    .modal-sm {
                        width: 360px;
                        margin: 100px auto;
                    }
        
                    .modal-content {
                        -webkit-box-shadow: 0 5px 15px rgba(0, 0, 0, .5);
                        box-shadow: 0 5px 15px rgba(0, 0, 0, .5);
                    }
        
                    .modal-med .form-group {
                        padding-left: 48px;
                        padding-right: 50px;
                    }
                }
        
                @media (min-width: 900px) {
                    .modal-lg {
                        width: 800px;
                    }
                }
        
                .modal-body .alert {
                    display: block;
                    font-weight: normal;
                    margin-top: 0;
                    margin-bottom: 20px;
                }
        
                .modal button.close {
                    position: relative;
                    padding: 0;
                    cursor: pointer;
                    background: transparent;
                    border: 0;
                    float: right;
                    color: #000;
                    opacity: 0.25;
                    width: 36px;
                    line-height: 36px;
                    height: 36px;
                }
        
                .modal button.close:hover,
                .modal button.close:focus {
                    color: #000;
                    text-decoration: none;
                    cursor: pointer;
                    opacity: 0.5;
                }
        
                .btn {
                    display: inline-block;
                    vertical-align: top;
                    margin: 0;
                    width: auto;
                    max-width: 100%;
                    text-align: center;
                    padding: 0 16px;
                    line-height: 30px;
                    font-family: sans-serif;
                    font-size: 12.5px;
                    border: 0;
                    box-shadow: inset 0 0 0 1px #aaa;
                    border-radius: 3px;
                    background-color: #fff;
                    background-image: linear-gradient(to bottom, #fff, #fff 33%, #ececec);
                    color: #3c3c3c;
                    white-space: nowrap;
                    user-select: none;
                }
        
                .btn:hover,
                .btn:focus {
                    outline: 0;
                    text-decoration: none;
                }
        
                .btn:focus {
                    box-shadow: inset 0 0 0 1px #317ebd;
                }
        
                .btn-green {
                    color: #fff;
                    background-color: #73bd0b;
                    background-image: linear-gradient(to bottom, #73bd0b, #5c9904);
                }
        
                #salesTaxModal .btn {
                    padding: 0 16px !important;
                }
        
                #salesTaxModal .modal-header {
                    padding: 0 !important;
                }
        
                #salesTaxModal .modal-footer {
                    margin-top: 0 !important;
                }
        
                #salesTaxModal .modal-footer button {
                    min-width: 80px !important;
                }
            </style>
        
        
            <div id="salesTaxModal" style="display:none;">
                <div class="modal" tabindex="-1" role="dialog" aria-hidden="true" style="display:block !important;">
                    <div class="modal-dialog">
                        <div class="modal-content" style="width:670px">
        
                            <div>
                                <div class="modal-header">
                                    <button type="button" class="close" onclick="hideSalesModal();"
                                        aria-hidden="true">&times;</button>
                                    <h4 class="modal-title">New Tax Rate</h4>
                                </div>
                                <div class="modal-body" style="padding:24px 30px 34px 30px; position:relative;">
        
                                    <div class="tab-tax-content" style="width:100%; max-width:440px; margin:0 auto;">
        
                                        <div class="error-tax-message"></div>
        
                                        <table class="single-table-tax" style="margin:30px 0;">
        
                                            <tr>
                                                <td style="width:75%;">Tax Name</td>
                                                <td style="width:25%;">Tax Rate</td>
                                            </tr>
                                            <tr>
                                                <td><input type="text" id="singleTaxName" class="single-tax-name error-border"
                                                        style="padding:5px; width:100%" value="Tax"></td>
                                                <td><input type="text" id="singleTaxRate" class="single-tax-rate error-border"
                                                        style="padding:5px; width:100%" maxlength="6" value=""
                                                        onkeyup="onlyNumbersRate(this)" placeholder="0.00"></td>
                                            </tr>
        
                                            <tr>
                                                <td colspan="2" style="padding-top:8px">Method</td>
                                            </tr>
                                            <tr>
                                                <td colspan="2">
                                                    <select id="singleMethod" style="padding:5px; width:100%">
                                                        <option value="0">Accrual</option>
                                                        <option value="1">Cash</option>
                                                    </select>
                                                </td>
                                            </tr>
        
                                        </table>
        
                                    </div>
        
                                </div>
                                <div class="modal-footer">
                                    <button id="newTaxSaveBtn" type="button" class="btn btn-green" style="width:80px"
                                        onclick="saveSingleTax();">Save</button>
                                    <button id="newTaxCancelBtn" type="button" class="btn" style="width:80px"
                                        onclick="hideSalesModal();">Cancel</button><img class="loader-gif"
                                        style="display: none;margin-left: 10px;" src="/images/loadingsmall.gif">
                                </div>
                            </div>
        
                        </div>
                    </div>
                </div><!-- end modal -->
            </div>
        
        
        
        
        
        
        
            <script>


                function hideSalesModal(bln) {

                    clearSingleTax();

                    $('#salesTaxModal').hide();
                    $('.NewTax').attr("checked", false);

                    //In the case that just No Tax was checked prior to checking New Tax, need to recheck No Tax:	
                    var rowNumber = $('body').data('selectedRow');
                    tax_dropdown = $('#dataTable tr:eq(' + rowNumber + ') .tax_dropdown :input:checked');
                    if (tax_dropdown.length == 0) $('#dataTable tr:eq(' + rowNumber + ') .tax_dropdown .NoTax').attr("checked", true);

                    $('.dropdown-sel').hide();
                    $('.currentTax').css('background-color', '#FFFFFF');

                }

                function clearSingleTax() {

                    $('.single-table-tax input').val('');
                    $('.single-tax-name').val('Tax');
                    $('.error-tax-message').css('visibility', 'hidden');
                    $('.error-border').removeClass("redborder").prop('disabled', false);

                }

                function displayTaxError(msg, id) {

                    $('.error-tax-message').html(msg).css('visibility', 'visible');
                    $('#' + id).addClass("redborder");
                    $('.btn-green').attr("disabled", false);
                }

                function saveSingleTax() {

                    $('.btn-green').attr("disabled", true);

                    var data = {
                        name: $('#singleTaxName').val().trim(),
                        tax: $('#singleTaxRate').val().trim(),
                        method: $('#singleMethod').val().trim(),
                        single_tax_save: true,
                        listSalesTax: true
                    };

                    if (data.name == '') {

                        displayTaxError('Sales tax name cannot be blank. Please fill in the required field.', 'singleTaxName');
                        return;
                    }

                    if (data.tax == '') {

                        displayTaxError('Tax rate cannot be blank. Please fill in the required field.', 'singleTaxRate');
                        return;
                    }

                    if (parseFloat(data.tax) == 0) {

                        displayTaxError('Tax rate cannot be 0.00. Please fill in the required field.', 'singleTaxRate');
                        return;
                    }

                    if (parseFloat(data.tax) > 100.00) {
                        displayTaxError('Tax rate cannot be greater than 100%.', 'singleTaxRate');
                        return;
                    }


                    $.ajax({
                        url: '/salesTax.php',
                        type: 'POST',
                        cache: false,
                        dataType: 'json',
                        async: true,
                        beforeSend: function () {
                            $('.loader-gif').show();
                        },
                        complete: function () {
                            $('.loader-gif').hide();
                        },
                        data: data,
                        success: function (response) {
                            if (response && response.success) {

                                populateTaxComponents(response.single);
                                hideSalesModal();
                                $('.btn-green').attr("disabled", false);
                            }
                            else {
                                var msg = (response ? response.error : "An error has occurred while saving. Please try again.");
                                displayTaxError(msg, response.field);
                            }
                        },
                        error: function () {
                            aynaxConsoleLog("Response error");
                            displayTaxError("An error has occurred while saving. Please try again.");
                        }
                    });



                }

                function populateTaxComponents(single) {

                    var rowNumber = $('body').data('selectedRow');

                    //Retrieve the taxes in the line specific dropdown that triggered the save event:		
                    tax_dropdown = $('#dataTable tr:eq(' + rowNumber + ') .tax_dropdown li');

                    //Locate the tax-id of the tax-component following alphabetically and find number of checked taxes:
                    var line_id = 0;
                    var num_checked = 0;
                    var found = false;

                    $.each(tax_dropdown, function (i, obj) {

                        //"No Tax" should always be on top and should not be counted in checked taxes, so skipping i=0:
                        if (i != 0) {

                            //Find new tax name position in dropdown list:
                            tax_name = $(obj).find('label').find('span').text();
                            tax_name = tax_name.trim();
                            if (tax_name > single.component_name && !found) { line_id = $(obj).find('input').data('component_id'); found = true; }

                            //Add number of checked taxes (not including last element in list which is "New Tax"):
                            if (i < (tax_dropdown.length - 1) && $(obj).find('input').attr('checked') == "checked") num_checked++;

                        }



                    });

                    //Retrieve all tax dropdowns from all lines:		
                    tax_dropdowns = $('.tax_dropdown');

                    var checked = "";
                    $.each(tax_dropdowns, function (i, obj) {


                        //Update all tax dropdowns with the new tax:
                        if (line_id > 0) next_tax_line = $(obj).find("[data-component_id='" + line_id + "']").closest('li'); else next_tax_line = $(obj).find(".NewTax").closest('li');

                        num_of_decimals = Math.abs(100 * parseFloat(single.tax) - Math.round(100 * parseFloat(single.tax))) > 0 ? 3 : 2;

                        next_tax_line.before('<li><label><input onclick="changeTaxSelect(this);" type="checkbox" class="SingleTax" data-name="' + single.component_name + '" data-component_id="' + single.id + '" data-tax="' + parseFloat(single.tax).toFixed(num_of_decimals) + '"  ><span>' + single.component_name + ' (' + parseFloat(single.tax).toFixed(num_of_decimals) + '%)</span></label></li>');


                    });

                    //If less than 3 taxes are selected for this specific line, autoselect the new tax for this line:
                    if (num_checked < 3) {

                        $('.NewTax').attr("checked", false);

                        var new_tax = $('#dataTable tr:eq(' + rowNumber + ') .tax_dropdown input[data-component_id=' + single.id + ']')

                        new_tax.attr("checked", "checked");

                        updateTax(new_tax);
                    }


                }

                function focusTaxSelect(obj) {

                    //Clear possibly open tax selectors:
                    $('.dropdown-sel').hide();
                    $('.currentTax').css('background-color', '#FFFFFF');

                    //Displays clicked tax selector
                    $(obj).css('background-color', '#FFFADC');
                    $(obj).next().show();
                    $(obj).next().find("ul").focus();

                }

                function changeTaxSelect(obj) {

                    //Update the html to facilitate row copying:
                    if ($(obj).attr("checked") == "checked") $(obj).attr("checked", true); else $(obj).attr("checked", false)

                    //Find the row number the event happened at and store it data-selectedRow in body-tag
                    node = obj;
                    while (node != null) {

                        if (node.tagName == "TR") {
                            rowNumber = node.rowIndex;
                            break;
                        }
                        node = node.parentNode;
                    }

                    $('body').data('selectedRow', rowNumber);


                    //Handle the tax selected:

                    if ($(obj).closest("ul").find(":input:checked").length == 4 && $(obj).hasClass("SingleTax")) {

                        //Uncheck the latest event:
                        $(obj).attr("checked", false);
                        alert("You cannot combine more than three tax components.");
                    }

                    else if ($(obj).attr("class") == "NewTax") {

                        //Uncheck NoTax:
                        $(obj).closest("ul").find(".NoTax").attr("checked", false);
                        //Launch modal:
                        $("#salesTaxModal").show();
                    }

                    else if (($(obj).attr("class") == "SingleTax")) {

                        //Uncheck No Tax: 
                        $(obj).closest("ul").find(".NoTax").attr("checked", false);
                        updateTax(obj)
                    }


                    if (($(obj).attr("class") == "NoTax") || ($(obj).closest("ul").find(":input:checked").length == 0)) {

                        //Check "No Tax":
                        $(obj).closest("ul").find(":input").attr("checked", false);
                        $(obj).closest("ul").find(".NoTax").attr("checked", true);

                        updateTax(obj);
                    }

                }

                function updateTax(obj) {

                    //obj is the tax input field checked

                    var total_tax = 0;
                    var tax_rate = 0;

                    //Clear all tax-rates and tax-id's:
                    $(obj).closest(".tax1").find(".tax_id, .tax2_id, .tax3_id").attr("value", "");
                    $(obj).closest(".tax1").find(".tax_rate, .tax2_rate, .tax3_rate").attr("value", "");

                    taxes = $(obj).closest("ul").find(":input:checked")

                    $.each(taxes, function (i, tax_obj) {

                        //Set tax-rates and tax-id's:
                        if (i == 0) { $(tax_obj).closest(".tax1").find(".tax_rate").attr("value", $(tax_obj).data('tax')); $(tax_obj).closest(".tax1").find(".tax_id").attr("value", $(tax_obj).data('component_id')); }
                        if (i == 1) { $(tax_obj).closest(".tax1").find(".tax2_rate").attr("value", $(tax_obj).data('tax')); $(tax_obj).closest(".tax1").find(".tax2_id").attr("value", $(tax_obj).data('component_id')); }
                        if (i == 2) { $(tax_obj).closest(".tax1").find(".tax3_rate").attr("value", $(tax_obj).data('tax')); $(tax_obj).closest(".tax1").find(".tax3_id").attr("value", $(tax_obj).data('component_id')); }

                        //Calculate total tax
                        tax_rate = parseFloat($(tax_obj).data('tax'));
                        total_tax += parseFloat(tax_rate);

                    });

                    //Set tax_rate variable		
                    num_of_decimals = Math.abs(100 * total_tax - Math.round(100 * total_tax)) > 0 ? 3 : 2;
                    $(obj).closest(".tax1").find(".tax_total").attr("value", total_tax.toFixed(num_of_decimals));
                    //Set tax_rate display

                    $(obj).closest(".tax1").find(".jtaxTotal").html(total_tax.toFixed(num_of_decimals) + '% ');
                    //Set tax_rate color:
                    if (total_tax > 0) $(obj).closest(".tax1").find(".currentTax").css("color", "#3c3c3c")
                    else $(obj).closest(".tax1").find(".currentTax").css("color", "silver")

                    //Recalculate tax:
                    reCalculate($(obj).closest(".tax1").find(".tax_total").get(0), 'dataTable', total_tax);

                }


                function onlyNumbersRate(obj) {
                    var $this = $(obj);
                    $this.val($this.val().replace(/[^\d.]/g, ''));
                }


                $(function () {

                    $('.tab-tax-content input').click(function () {

                        $('.error-tax-message').css('visibility', 'hidden');
                        $('.error-border').removeClass("redborder");

                    });


                    $('.single-tax-rate').blur(function () {

                        var currentValue = this.value;

                        if (!currentValue) return;

                        currentValue = parseFloat(currentValue);

                        if (Math.abs(100 * currentValue - Math.round(100 * currentValue)) > 0.05) this.value = currentValue.toFixed(3);
                        else this.value = currentValue.toFixed(2);




                    });


                })


            </script>
        
        
        
        
        
        
            <footer class="page-footer">
                <div class="container">
        
                    <div class="footer-links">
                        <a href="https://www.skynova.com/app/about">About</a>
        
        
        
                        <a href="https://www.skynova.com/app/privacy">Privacy Policy</a>
                        <a href="https://www.skynova.com/app/tos">Terms of Service</a>
        
                    </div>
        
                    <div class="copyright">
                        skynova.com | PO Box 628 | West Chester, PA 19381 | United States
                    </div>
        
                </div>
            </footer>
        
        
        
        
        
            <script defer
                src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015"
                integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ=="
                data-cf-beacon='{"rayId":"8d5d2cba2c21c325","serverTiming":{"name":{"cfExtPri":true,"cfL4":true,"cfSpeedBrain":true,"cfCacheStatus":true}},"version":"2024.10.1","token":"984c858828644809a4fdf1ea68f32b03"}'
                crossorigin="anonymous"></script>

</body>
</html>